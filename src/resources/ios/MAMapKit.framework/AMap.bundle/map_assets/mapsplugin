_jsload_('WebGLRender', '!function(){"use strict";var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function __decorate(t,e,r,n){var i,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.yV)o=Reflect.yV(t,e,r,n);else for(var f=t.length-1;0<=f;f--)(i=t[f])&&(o=(a<3?i(o):3<a?i(e,r,o):i(e,r))||o);return 3<a&&o&&Object.defineProperty(e,r,o),o}function __spreadArrays(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,f=a.length;o<f;o++,i++)n[i]=a[o];return n}var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;function getRawTag(t){var e=hasOwnProperty.call(t,symToStringTag),r=t[symToStringTag];try{var n=!(t[symToStringTag]=void 0)}catch(t){}var i=nativeObjectToString.call(t);return n&&(e?t[symToStringTag]=r:delete t[symToStringTag]),i}var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(t){return nativeObjectToString$1.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol?Symbol.toStringTag:void 0;function baseGetTag(t){return null==t?void 0===t?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(t)?getRawTag:objectToString)(t)}function isObjectLike(t){return null!=t&&"object"==typeof t}var symbolTag="[object Symbol]";function isSymbol(t){return"symbol"==typeof t||isObjectLike(t)&&baseGetTag(t)==symbolTag}function arrayMap(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var isArray=Array.isArray,INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(t){if("string"==typeof t)return t;if(isArray(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var e=t+"";return"0"==e&&1/t==-INFINITY?"-0":e}function isObject(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var NAN=NaN,reTrim=/^\\s+|\\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if("number"==typeof t)return t;if(isSymbol(t))return NAN;if(isObject(t)&&(t=isObject(e="function"==typeof t.valueOf?t.valueOf():t)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=t.replace(reTrim,"");var e=reIsBinary.test(t);return e||reIsOctal.test(t)?freeParseInt(t.slice(2),e?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){return t?(t=toNumber(t))!==INFINITY$1&&t!==-INFINITY$1?t==t?t:0:(t<0?-1:1)*MAX_INTEGER:0===t?t:0}function toInteger(t){var e=toFinite(t),t=e%1;return e==e?t?e-t:e:0}function identity(t){return t}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(t){if(isObject(t)){t=baseGetTag(t);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}}var coreJsData=root["__core-js_shared__"],maskSrcKey=(oa=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.Xb||""),oa?"Symbol(src)_1."+oa:""),oa;function isMasked(t){return maskSrcKey&&maskSrcKey in t}var funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(t){if(null!=t){try{return funcToString.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g,reIsHostCtor=/^\\[object .+?Constructor\\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");function baseIsNative(t){return isObject(t)&&!isMasked(t)&&(isFunction(t)?reIsNative:reIsHostCtor).test(toSource(t))}function getValue(t,e){return null==t?void 0:t[e]}function getNative(t,e){e=getValue(t,e);return baseIsNative(e)?e:void 0}var WeakMap=getNative(root,"WeakMap");function apply(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(r){var n=0,i=0;return function(){var t=nativeNow(),e=HOT_SPAN-(t-i);if(i=t,0<e){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),baseSetToString=defineProperty?function(t,e){return defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:constant(e),writable:!0})}:identity,setToString=shortOut(baseSetToString);function arrayEach(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function baseFindIndex(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(t,e){var r=typeof t;return!!(e=null==e?MAX_SAFE_INTEGER:e)&&("number"==r||"symbol"!=r&&reIsUint.test(t))&&-1<t&&t%1==0&&t<e}function baseAssignValue(t,e,r){"__proto__"==e&&defineProperty?defineProperty(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function eq(t,e){return t===e||t!=t&&e!=e}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(t,e,r){var n=t[e];hasOwnProperty$2.call(t,e)&&eq(n,r)&&(void 0!==r||e in t)||baseAssignValue(t,e,r)}function copyObject(t,e,r,n){var i=!r;r=r||{};for(var a=-1,o=e.length;++a<o;){var f=e[a],s=n?n(r[f],t[f],f,r,t):void 0;void 0===s&&(s=t[f]),(i?baseAssignValue:assignValue)(r,f,s)}return r}var nativeMax=Math.max;function overRest(a,o,f){return o=nativeMax(void 0===o?a.length-1:o,0),function(){for(var t=arguments,e=-1,r=nativeMax(t.length-o,0),n=Array(r);++e<r;)n[e]=t[o+e];e=-1;for(var i=Array(o+1);++e<o;)i[e]=t[e];return i[o]=f(n),apply(a,this,i)}}function baseRest(t,e){return setToString(overRest(t,e,identity),t+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=MAX_SAFE_INTEGER$1}function isArrayLike(t){return null!=t&&isLength(t.length)&&!isFunction(t)}function isIterateeCall(t,e,r){if(isObject(r)){var n=typeof e;return("number"==n?isArrayLike(r)&&isIndex(e,r.length):"string"==n&&e in r)&&eq(r[e],t)}}function createAssigner(f){return baseRest(function(t,e){var r=-1,n=e.length,i=1<n?e[n-1]:void 0,a=2<n?e[2]:void 0,i=3<f.length&&"function"==typeof i?(n--,i):void 0;for(a&&isIterateeCall(e[0],e[1],a)&&(i=n<3?void 0:i,n=1),t=Object(t);++r<n;){var o=e[r];o&&f(t,o,r,i)}return t})}var objectProto$4=Object.prototype;function isPrototype(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||objectProto$4)}function baseTimes(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var argsTag="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag}var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$3.call(t,"callee")&&!propertyIsEnumerable.call(t,"callee")};function stubFalse(){return!1}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Zb:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(e){return function(t){return e(t)}}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.Qb&&freeModule$1.Qb("util").types;return t?t:freeProcess&&freeProcess.tg&&freeProcess.tg("util")}catch(t){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.rg,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(t,e){var r,n=isArray(t),i=!n&&isArguments(t),a=!n&&!i&&isBuffer(t),o=!n&&!i&&!a&&isTypedArray(t),f=n||i||a||o,s=f?baseTimes(t.length,String):[],u=s.length;for(r in t)!e&&!hasOwnProperty$4.call(t,r)||f&&("length"==r||a&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||isIndex(r,u))||s.push(r);return s}function overArg(e,r){return function(t){return e(r(t))}}var nativeKeys=overArg(Object.keys,Object),objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys(t);var e,r=[];for(e in Object(t))hasOwnProperty$5.call(t,e)&&"constructor"!=e&&r.push(e);return r}function keys(t){return(isArrayLike(t)?arrayLikeKeys:baseKeys)(t)}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,assign=createAssigner(function(t,e){if(isPrototype(e)||isArrayLike(e))copyObject(e,keys(e),t);else for(var r in e)hasOwnProperty$6.call(e,r)&&assignValue(t,r,e[r])}),reIsDeepProp=/\\.|\\[(?:[^[\\]]*|(["\'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey(t,e){if(!isArray(t)){var r=typeof t;return"number"==r||"symbol"==r||"boolean"==r||null==t||isSymbol(t)||(reIsPlainProp.test(t)||!reIsDeepProp.test(t)||null!=e&&t in Object(e))}}var nativeCreate=getNative(Object,"create");function hashClear(){this.ng=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(t){t=this.has(t)&&delete this.ng[t];return this.size-=t?1:0,t}var HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashGet(t){var e=this.ng;if(nativeCreate){var r=e[t];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$7.call(e,t)?e[t]:void 0}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashHas(t){var e=this.ng;return nativeCreate?void 0!==e[t]:hasOwnProperty$8.call(e,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,e){var r=this.ng;return this.size+=this.has(t)?0:1,r[t]=nativeCreate&&void 0===e?HASH_UNDEFINED$1:e,this}function Hash(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function listCacheClear(){this.ng=[],this.size=0}function assocIndexOf(t,e){for(var r=t.length;r--;)if(eq(t[r][0],e))return r;return-1}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var e=this.ng,t=assocIndexOf(e,t);return!(t<0)&&(t==e.length-1?e.pop():splice.call(e,t,1),--this.size,!0)}function listCacheGet(t){var e=this.ng,t=assocIndexOf(e,t);return t<0?void 0:e[t][1]}function listCacheHas(t){return-1<assocIndexOf(this.ng,t)}function listCacheSet(t,e){var r=this.ng,n=assocIndexOf(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function ListCache(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map=getNative(root,"Map");function mapCacheClear(){this.size=0,this.ng={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function getMapData(t,e){t=t.ng;return isKeyable(e)?t["string"==typeof e?"string":"hash"]:t.map}function mapCacheDelete(t){t=getMapData(this,t).delete(t);return this.size-=t?1:0,t}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){var r=getMapData(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function MapCache(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(n,i){if("function"!=typeof n||null!=i&&"function"!=typeof i)throw new TypeError(FUNC_ERROR_TEXT);var a=function(){var t=arguments,e=i?i.apply(this,t):t[0],r=a.cache;if(r.has(e))return r.get(e);t=n.apply(this,t);return a.cache=r.set(e,t)||r,t};return a.cache=new(memoize.Cache||MapCache),a}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var t=memoize(t,function(t){return e.size===MAX_MEMOIZE_SIZE&&e.clear(),t}),e=t.cache;return t}var rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,reEscapeChar=/\\\\(\\\\)?/g,stringToPath=memoizeCapped(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(rePropName,function(t,e,r,n){i.push(r?n.replace(reEscapeChar,"$1"):e||t)}),i});function toString(t){return null==t?"":baseToString(t)}function castPath(t,e){return isArray(t)?t:isKey(t,e)?[t]:stringToPath(toString(t))}var INFINITY$2=1/0;function toKey(t){if("string"==typeof t||isSymbol(t))return t;var e=t+"";return"0"==e&&1/t==-INFINITY$2?"-0":e}function baseGet(t,e){for(var r=0,n=(e=castPath(e,t)).length;null!=t&&r<n;)t=t[toKey(e[r++])];return r&&r==n?t:void 0}function get(t,e,r){e=null==t?void 0:baseGet(t,e);return void 0===e?r:e}function arrayPush(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function stackClear(){this.ng=new ListCache,this.size=0}function stackDelete(t){var e=this.ng,t=e.delete(t);return this.size=e.size,t}function stackGet(t){return this.ng.get(t)}function stackHas(t){return this.ng.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,e){var r=this.ng;if(r instanceof ListCache){var n=r.ng;if(!Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([t,e]),this.size=++r.size,this;r=this.ng=new MapCache(n)}return r.set(t,e),this.size=r.size,this}function Stack(t){t=this.ng=new ListCache(t);this.size=t.size}function arrayFilter(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function stubArray(){return[]}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var objectProto$b=Object.prototype,propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),arrayFilter(nativeGetSymbols(e),function(t){return propertyIsEnumerable$1.call(e,t)}))}:stubArray;function baseGetAllKeys(t,e,r){e=e(t);return isArray(t)?e:arrayPush(e,r(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols)}var DataView=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1)&&(getTag=function(t){var e=baseGetTag(t),t=e==objectTag$1?t.constructor:void 0,t=t?toSource(t):"";if(t)switch(t){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}return e});var getTag$1=getTag,Uint8Array$1=root.Uint8Array,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(t){return this.ng.set(t,HASH_UNDEFINED$2),this}function setCacheHas(t){return this.ng.has(t)}function SetCache(t){var e=-1,r=null==t?0:t.length;for(this.ng=new MapCache;++e<r;)this.add(t[e])}function arraySome(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function cacheHas(t,e){return t.has(e)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(t,e,r,n,i,a){var o=r&COMPARE_PARTIAL_FLAG,f=t.length,s=e.length;if(f!=s&&!(o&&f<s))return!1;var u=a.get(t),s=a.get(e);if(u&&s)return u==e&&s==t;var l=-1,c=!0,h=r&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(a.set(t,e),a.set(e,t);++l<f;){var v,d=t[l],_=e[l];if(n&&(v=o?n(_,d,l,e,t,a):n(d,_,l,t,e,a)),void 0!==v){if(v)continue;c=!1;break}if(h){if(!arraySome(e,function(t,e){if(!cacheHas(h,e)&&(d===t||i(d,t,r,n,a)))return h.push(e)})){c=!1;break}}else if(d!==_&&!i(d,_,r,n,a)){c=!1;break}}return a.delete(t),a.delete(e),c}function mapToArray(t){var r=-1,n=Array(t.size);return t.forEach(function(t,e){n[++r]=[e,t]}),n}function setToArray(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto$1=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag(t,e,r,n,i,a,o){switch(r){case dataViewTag$2:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case arrayBufferTag$1:return t.byteLength==e.byteLength&&a(new Uint8Array$1(t),new Uint8Array$1(e))?!0:!1;case boolTag$1:case dateTag$1:case numberTag$1:return eq(+t,+e);case errorTag$1:return t.name==e.name&&t.message==e.message;case regexpTag$1:case stringTag$1:return t==e+"";case mapTag$2:var f=mapToArray;case setTag$2:var s=n&COMPARE_PARTIAL_FLAG$1,f=f||setToArray;if(t.size!=e.size&&!s)return!1;s=o.get(t);if(s)return s==e;n|=COMPARE_UNORDERED_FLAG$1,o.set(t,e);f=equalArrays(f(t),f(e),n,i,a,o);return o.delete(t),f;case symbolTag$1:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(e)}return!1}var COMPARE_PARTIAL_FLAG$2=1,objectProto$c=Object.prototype,hasOwnProperty$9=objectProto$c.hasOwnProperty;function equalObjects(t,e,r,n,i,a){var o=r&COMPARE_PARTIAL_FLAG$2,f=getAllKeys(t),s=f.length;if(s!=getAllKeys(e).length&&!o)return!1;for(var u=s;u--;){var l=f[u];if(!(o?l in e:hasOwnProperty$9.call(e,l)))return!1}var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var v=!0;a.set(t,e),a.set(e,t);for(var d=o;++u<s;){var _,y=t[l=f[u]],g=e[l];if(n&&(_=o?n(g,y,l,e,t,a):n(y,g,l,t,e,a)),!(void 0===_?y===g||i(y,g,r,n,a):_)){v=!1;break}d=d||"constructor"==l}return!v||d||(c=t.constructor)!=(h=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof c&&c instanceof c&&"function"==typeof h&&h instanceof h)&&(v=!1),a.delete(t),a.delete(e),v}var COMPARE_PARTIAL_FLAG$3=1,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]",objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty;function baseIsEqualDeep(t,e,r,n,i,a){var o=isArray(t),f=isArray(e),s=o?arrayTag$1:getTag$1(t),u=f?arrayTag$1:getTag$1(e),l=(s=s==argsTag$2?objectTag$2:s)==objectTag$2,f=(u=u==argsTag$2?objectTag$2:u)==objectTag$2,u=s==u;if(u&&isBuffer(t)){if(!isBuffer(e))return!1;l=!(o=!0)}if(u&&!l)return a=a||new Stack,o||isTypedArray(t)?equalArrays(t,e,r,n,i,a):equalByTag(t,e,s,r,n,i,a);if(!(r&COMPARE_PARTIAL_FLAG$3)){l=l&&hasOwnProperty$a.call(t,"__wrapped__"),f=f&&hasOwnProperty$a.call(e,"__wrapped__");if(l||f)return i(l?t.value():t,f?e.value():e,r,n,a=a||new Stack)}return!!u&&equalObjects(t,e,r,n,i,a=a||new Stack)}function baseIsEqual(t,e,r,n,i){return t===e||(null==t||null==e||!isObjectLike(t)&&!isObjectLike(e)?t!=t&&e!=e:baseIsEqualDeep(t,e,r,n,baseIsEqual,i))}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var f=r[i];if(o&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++i<a;){var s=(f=r[i])[0],u=t[s],l=f[1];if(o&&f[2]){if(void 0===u&&!(s in t))return!1}else{var c,h=new Stack;if(n&&(c=n(u,l,s,t,e,h)),!(void 0===c?baseIsEqual(l,u,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,n,h):c))return!1}}return!0}function isStrictComparable(t){return t==t&&!isObject(t)}function getMatchData(t){for(var e=keys(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,isStrictComparable(i)]}return e}function matchesStrictComparable(e,r){return function(t){return null!=t&&(t[e]===r&&(void 0!==r||e in Object(t)))}}function baseMatches(e){var r=getMatchData(e);return 1==r.length&&r[0][2]?matchesStrictComparable(r[0][0],r[0][1]):function(t){return t===e||baseIsMatch(t,e,r)}}function baseHasIn(t,e){return null!=t&&e in Object(t)}function hasPath(t,e,r){for(var n=-1,i=(e=castPath(e,t)).length,a=!1;++n<i;){var o=toKey(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&isLength(i)&&isIndex(o,i)&&(isArray(t)||isArguments(t))}function hasIn(t,e){return null!=t&&hasPath(t,e,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(r,n){return isKey(r)&&isStrictComparable(n)?matchesStrictComparable(toKey(r),n):function(t){var e=get(t,r);return void 0===e&&e===n?hasIn(t,r):baseIsEqual(n,e,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return"function"==typeof t?t:null==t?identity:"object"==typeof t?isArray(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function createBaseFor(s){return function(t,e,r){for(var n=-1,i=Object(t),a=r(t),o=a.length;o--;){var f=a[s?o:++n];if(!1===e(i[f],f,i))break}return t}}var baseFor=createBaseFor();function baseForOwn(t,e){return t&&baseFor(t,e,keys)}function createBaseEach(a,o){return function(t,e){if(null==t)return t;if(!isArrayLike(t))return a(t,e);for(var r=t.length,n=o?r:-1,i=Object(t);(o?n--:++n<r)&&!1!==e(i[n],n,i););return t}}var baseEach=createBaseEach(baseForOwn);function castFunction(t){return"function"==typeof t?t:identity}function forEach(t,e){return(isArray(t)?arrayEach:baseEach)(t,castFunction(e))}function arrayEvery(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function baseEvery(t,n){var i=!0;return baseEach(t,function(t,e,r){return i=!!n(t,e,r)}),i}function every(t,e,r){var n=isArray(t)?arrayEvery:baseEvery;return r&&isIterateeCall(t,e,r)&&(e=void 0),n(t,baseIteratee(e))}function createFind(a){return function(t,e,r){var n,i=Object(t);isArrayLike(t)||(n=baseIteratee(e),t=keys(t),e=function(t){return n(i[t],t,i)});r=a(t,e,r);return-1<r?i[n?t[r]:r]:void 0}}var nativeMax$1=Math.max;function findIndex(t,e,r){var n=null==t?0:t.length;if(!n)return-1;r=null==r?0:toInteger(r);return r<0&&(r=nativeMax$1(n+r,0)),baseFindIndex(t,baseIteratee(e),r)}var find=createFind(findIndex);function baseMap(t,n){var i=-1,a=isArrayLike(t)?Array(t.length):[];return baseEach(t,function(t,e,r){a[++i]=n(t,e,r)}),a}function map(t,e){return(isArray(t)?arrayMap:baseMap)(t,baseIteratee(e))}function isEqual(t,e){return baseIsEqual(t,e)}function isUndefined(t){return void 0===t}function baseSome(t,n){var i;return baseEach(t,function(t,e,r){return!(i=n(t,e,r))}),!!i}function some(t,e,r){var n=isArray(t)?arraySome:baseSome;return r&&isIterateeCall(t,e,r)&&(e=void 0),n(t,baseIteratee(e))}var CONSTS={ID:"__id__",Rp:22,Mp:2,jp:.8,Pp:.2,YM:5,KM:{dom:"div",id:"_amap_custom_labellayer_div_",className:"amap-layer",style:{cssText:"position:absolute;top:0;left:0;",zIndex:"",width:"",height:"",visible:""}},Dp:{Op:180,Ad:70,Td:260,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:"top",QM:"right",tj:"bottom",LEFT:"left",nj:"middle",ij:"center",ej:"alphabetic"},oj:{CLICK:"click",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",aj:"touchstart",uj:"touchend"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:[3,20],icon:{type:"image",image:"://visuallocal.amap.com/public/poi-marker.png",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:"bottom-center",angel:0,pe:!0,zooms:[3,20]},text:{type:"billboard",direction:"top",offset:[0,0],zooms:[3,20],style:{fj:6,fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:"transparent",padding:[3,3,3,3],backgroundColor:""}}},hj:{cj:{opacity:.2},vj:"fadeIn",lj:"fadeOut",dj:{bj:"start",RUNNING:"running",pj:"complete"},yj:{mj:"opacity",gj:"size"}},_d:3,wj:"_AMap_sdf_com_words",Mj:128,pc:["://sdf.amap.com","://sdf01.amap.com","://sdf02.amap.com","://sdf03.amap.com","://sdf04.amap.com"],sp:4,ec:24,Cd:.78125,Ld:205/256,Aj:{kj:"纹理加载失败，请重试",Oj:"资源加载失败，请重试"},xj:"bufferChanged",Ij:"frameBufferChanged",Tj:"combineFrameBufferChanged",ic:1,ud:12,Cj:12,Ej:"__icon_combination",Nj:"__text_combination",Lj:{file:{0:"://vdata.amap.com/style_icon/2.0/icon-normal-big.png",1:"://vdata.amap.com/style_icon/2.0/icon-biz-big.png"},size:[40,40],Rj:10},Kp:{buffer:3,family:"ios9",size:24},Color:{Uj:[0,0,0,1],Gp:[0,0,0,0]},gH:"sdf",RB:"sdfJson",FN:"version"},EnumTextureIndex,Ci;Ci=EnumTextureIndex=EnumTextureIndex||{},Ci[Ci.dynamic=0]="dynamic",Ci[Ci.icon=1]="icon";var TextureMaxLength=2,ImageStatus,Di;Di=ImageStatus=ImageStatus||{},Di.BLOB="blob",Di.TOLOAD="toload",Di.LOADING="loading",Di.LOADED="loaded",Di.UNLOADED="unloaded",Di.ERROR="error",Di.RELOADING="reloading",Di.UNCOMBINED="uncombined",Di.COMBINING="combining",Di.COMBINED="combined";var globalInstance=self,assert=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];Boolean(t)||console.log.apply(console,e)},URLObject="undefined"!=typeof window?window.URL||window.webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}}:URL||webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}},Util=AMap.Util,LayerRender=(Hi.prototype.destroy=function(){assert(!1,"please implement destroy for LayerRender")},Hi);function Hi(){this.hS=Util.stamp(this)}var ColorMode=(Ii.wi={ZERO:0,ONE:1,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771},Ii.tH=[!0,!0,!0,!0],Ii.iH=[!1,!1,!1,!1],Ii.disabled=new Ii([Ii.wi.ONE,Ii.wi.ZERO,Ii.wi.ONE,Ii.wi.ZERO],Ii.iH),Ii.Mi=new Ii([Ii.wi.ONE,Ii.wi.ZERO,Ii.wi.ONE,Ii.wi.ZERO],Ii.tH),Ii.Ri=new Ii([Ii.wi.SRC_ALPHA,Ii.wi.ONE_MINUS_SRC_ALPHA,Ii.wi.SRC_ALPHA,Ii.wi.ONE_MINUS_SRC_ALPHA],Ii.tH),Ii.zi=new Ii([Ii.wi.ONE,Ii.wi.ONE_MINUS_SRC_ALPHA,Ii.wi.ONE,Ii.wi.ONE_MINUS_SRC_ALPHA],Ii.tH),Ii.Si=new Ii([Ii.wi.SRC_ALPHA,Ii.wi.ONE_MINUS_SRC_ALPHA,Ii.wi.ONE,Ii.wi.ONE_MINUS_SRC_ALPHA],Ii.tH),Ii.FV=new Ii([Ii.wi.SRC_ALPHA,Ii.wi.ONE_MINUS_SRC_ALPHA,Ii.wi.ONE,Ii.wi.ZERO],Ii.tH),Ii);function Ii(t,e){this.Ci=t,this.mask=e}var Support=M.Support,scale=Support.scale,LabelsRender=(Li.prototype.Mz=function(t){var e=t.map,r=t.R_,n=t.z_,t=t.$i;this._map=e,this.Mf=r,this.ac=n,this._f=t},Li.prototype.Ce=function(t,e,r,n){var i=this;void 0===r&&(r={});var a=CONSTS.ud,o=CONSTS.sp,f=this._f,s=t.$n,u=t.size;if(!s)return n.iterator;var l=s.mvpMatrix,c=s.zoom,h=s.viewMode,v=u[0],d=u[1],_=n.Sa,s=n.from,y=void 0===s?"inner":s,u=n.opacity,g=void 0===u?1:u,s=n.offset,p=void 0===s?[0,0]:s,u=(n.Sz,n.LF),m=void 0===u?{}:u,b=n.iterator,x=1;"3D"===h&&(x=t.map.getView().EF()),window.BO=function(t){var e=i.fd(n.zV);i.gp(n.oo,e.De[t])};s=r.Rz,u=r.buffer,h=r.od,t=r.zz;e.bindFramebuffer.set(null),e.be.set([0,0,v*scale,d*scale]);var S=s.pp,r=u,s=this.fd(n.zV),u=s.De,M=void 0===u?[]:u,s=s.sizes,C=void 0===s?[]:s,s=a*o,A=S.length;if(!r||!h)return b;if(A){e.ge.set(f),f.Ae({a_vertex:{type:"vec2",buffer:r,Re:s,offset:0},a_texcoord:{type:"vec2",buffer:r,Re:s,offset:2*o},a_origin:{type:"vec2",buffer:r,Re:s,offset:4*o},a_texIndex:{type:"float",buffer:r,Re:s,offset:6*o},a_type:{type:"float",buffer:r,Re:s,offset:7*o},a_zooms:{type:"vec2",buffer:r,Re:s,offset:8*o},a_height:{type:"float",buffer:r,Re:s,offset:10*o},a_visible:{type:"float",buffer:h,Re:0,offset:t[b]&&t[b].start}});for(var k="inner"===this.l_?ColorMode.Ri:ColorMode.Si,w=0;w<A;w++){var T,$,I,L,F=S[w],P=F.start,z=void 0===P?0:P,B=F.end,P=void 0===B?0:B;F.dp;b++,P-z&&(B=void 0,"labelsLayer"!==y||!F.pd||(T=this.ac.getImage(F.pd)).img&&(I=($=this.dd(e,T)).texture,L=$.size,I&&I.context&&(M[EnumTextureIndex.icon]=I,(B=C.slice(0))[2*EnumTextureIndex.icon]=L[0],B[2*EnumTextureIndex.icon+1]=L[1])),T=F.vd.slice(0,4),$=F.vd.slice(4,8),I=F.vd.slice(11,15),L=F.vd.slice(15,19),f.Le({u_matrix:l,u_texture:{De:M,count:4},u_gl_size:[v,d],u_texsize:B||C,u_color:T,u_strokeColor:$,u_borderColor:L,u_gamma:F.vd[8],u_borderBuffer:F.vd[9],u_buffer:F.vd[10],u_backgroundColor:I,u_opacity:F.opacity*g,u_zoom:c,u_event:0,u_delta_center:_,u_offset:p,u_transform:[0,0,1,0],u_skyHeight:x}),f.Pe((P-z)/a,z/a,void 0,void 0,m.depthTest,k))}}return b},Li.prototype.Cz=function(t,e,r,n,i){var a=this._f,o=CONSTS.sp,f=t.$n,s=t.size,u=f.zoom||20,l=f.mvpMatrix||null,c=s[0],h=s[1],v=i.Az,d=i.Iz,_=(i.centerCoord,1);if("3D"===f.viewMode&&(_=t.map.getView().EF()),l){var t=n.$z||{},y=t.pp,n=t.zs,t=t.od,n=n&&n.buffer,g=Math.pow(2,u-d);e.be.set([0,0,c*scale,h*scale]);var p,m,b,x,h=this.fd(i.zV),i=h.De,S=void 0===i?[]:i,h=h.sizes,M=void 0===h?[]:h,C=y.length,h=12*o,A=[0,0,u<=d?g:1,0];if(n&&t){C&&(e.ge.set(this._f),a.Ae({a_vertex:{type:"vec2",buffer:n,Re:h,offset:0},a_texcoord:{type:"vec2",buffer:n,Re:h,offset:2*o},a_origin:{type:"vec2",buffer:n,Re:h,offset:4*o},a_texIndex:{type:"float",buffer:n,Re:h,offset:6*o},a_type:{type:"float",buffer:n,Re:h,offset:7*o},a_zooms:{type:"vec2",buffer:n,Re:h,offset:8*o},a_height:{type:"float",buffer:n,Re:h,offset:10*o},a_angle:{type:"float",buffer:n,Re:h,offset:11*o},a_visible:{type:"float",buffer:t,Re:0,offset:0}}));for(var k=0;k<C;k++){var w=y[k];if(w[0],w[1],p=w[11],m=w[12],b=w[13],w[14],m-p){for(var T=0,$=v;T<$.length;T++){var I,L=$[T];(I=r[L])&&L===b&&(x=I.Sa)}!x||g<.6||I&&(x=[0,0],a.Le({u_matrix:l,u_delta_center:x,u_transform:A,u_texture:{De:S,count:S.length},u_gl_size:s,u_texsize:M,u_color:w[3],u_strokeColor:w[4],u_gamma:w[5],u_borderBuffer:w[7],u_buffer:w[8],u_backgroundColor:w[9],u_opacity:1,u_zoom:u,u_event:0,u_skyHeight:_}),a.Pe((m-p)/12,p/12,void 0,void 0,void 0,ColorMode.Si))}}}}},Li.prototype.gp=function(t,e){var r=t.context,t=t.Jn(),e=e,r=r.fe(new Uint16Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]),8);e&&t.Ce({u_texture:e},{a_pos:{type:"vec2",buffer:r,Re:8,offset:0},a_coord:{type:"vec2",buffer:r,Re:8,offset:4}},4,void 0,"TRIANGLE_FAN",void 0,ColorMode.Mi)},Li.prototype.reset=function(){this.Df()},Li.prototype.destroy=function(){if(this.Lz){for(var t=0,e=this.Lz.De;t<e.length;t++)e[t].destroy();delete this.Lz}},Li.prototype.Dz=function(t,e,r){void 0===r&&(r={});for(var n=r.start,i=void 0===n?0:n,n=r.dp,a=r.style,o=i,f=0,s=0,u=n;s<u.length;s++){var l=u[s],c=l.id,h=l.kd,v=e[c];t.uf<i+f+h&&t.ff(2*t.uf);var d=t.value;if(v){var v=(a[c]||{}).showText,_=void 0===v?1:v,y=0,g=1/0,p=-1/0;for(_||(c=l.icon,v=l.bg,g=6*c,p=6*(c+l.Rd+v));y<h;)!_&&g<=y&&y<=p||(d[o+f+y]=1),y+=1}f+=h}return o+=f},Li.prototype.Df=function(){},Li.prototype.fd=function(t){var e=[],r=[];t&&(e[0]=t,r[0]=t.size[0],r[1]=t.size[1]);t=this._map.so.texture;return t&&(e.push(t),t=t.size,r.push(t[0],t[1])),{De:e,sizes:r}},Li.prototype.dd=function(t,e){var r=t.gl,n=e.img,i=e.width,a=e.height,o=n;return n&&!n.context&&((o=t.createTexture(n)).bind(r.CLAMP_TO_EDGE,r.LINEAR,r.LINEAR),e.img=o),{texture:o,size:[i,a]}},Li);function Li(){this.Lz={De:[],sizes:[]},this._f=null,this.CG=0}var transforms=M.transform,Support$1=M.Support,LabelsRenderUtil=M.LabelsRenderUtil,LabelsRenderDOMRender=(Dl.prototype.Ce=function(t,e,r,n,i){if(t){var a=(this.wf=t).size;this._size=a;var o=i.centerCoord,a=i.Uf,f=void 0===a?{}:a,a=(i.$f,i.Sa),s=void 0===a?[0,0]:a;this.Tz(),this.Pz();var i=t.$n,u=i.zoom,a=i.viewMode;if(this.Oz(u,e.zooms)){!this._map&&n&&(t=i.projectionId,this._map=n,this.If=transforms[t],this._view=n.getView(),this.ac=n.z_);var r=r&&r.other,l=r.coords,c=r.style,h=r.Nf,r=r.Fz,r=void 0===r?[]:r,v={$n:i,size:this.wf.size,transform:this.If,view:this._view,viewMode:a,centerCoord:o};this.Bz(e);for(var d=0,_=r;d<_.length;d++)for(var y=_[d],g=0;g<y.length;g++){var p=y[g];if(f[p]){var m=h[p]||{},b=l[p]||{},x=c[p]||{},S=(m.data.extData||{}).Sa||s||[0,0],M=(m.data||{}).txt,C=m.opts||{},A=(x.icon||[])[0]||{},k=A.image,p=isUndefined(x.opacity)?1:C.opacity,w=x.text;if(k&&A&&this.Oz(u,x.icon&&x.icon.zooms)&&(C=(m=this.ac.getImage(k)).img,k={size:[m.width,m.height],opacity:p},$=b.icon.origin,I=b.icon.anchorOffset,m=[(m=LabelsRenderUtil.wu($[0]+S[0],$[1]+S[1],u,v))[0]+I[0],m[1]+I[1]],this.drawImage(C,A,m,k)),M&&w&&this.Oz(u,x.text&&x.text.zooms)){var T={opacity:p,padding:b.padding},$=b.text.origin,I=b.text.offset,b=LabelsRenderUtil.wu($[0]+S[0],$[1]+S[1],u,v),S=w.style,L=S.fontSize||12,F=[b[0]+I[0],b[1]+I[1]+L];this.Ez(x.text,b,T);for(var P=M.length,S=!1===S.BV?100:6,z=Math.ceil(P/S),B=Math.floor(P/z),E=0;E<z;E++){var O=E===z-1?P-E*B:B,O=M.substr(E*B,O);this.gp(O,w,F,T);O=5*L/4+3;F[1]=F[1]+O}}}}}}},Dl.prototype.Ez=function(t,e,r){var n=this.Nz,i=Support$1.scale,a=void 0===i?1:i,o=t.style.backgroundColor,f=r.padding,i=f.offsetX,t=f.offsetY,r=f.w,f=f.h,i=e[0]+i,t=e[1]+t;n&&o&&(n.fillStyle=o,n.fillRect(i*a,t*a,r*a,f*a))},Dl.prototype.drawImage=function(t,e,r,n){var i,a,o,f,s,u,l,c=Support$1.scale,h=this.Nz;h&&e&&(e.image,s=e.size,l=e.clipOrigin,e.angel,u=e.clipSize,i=void 0===(f=n.opacity)?1:f,a=s[0],o=s[1],e=t.width||a,n=t.height||o,f=u[0],s=u[1],u=l[0],l=l[1],isUndefined(f)&&(f=a),isUndefined(s)&&(s=o),e<f&&(f=e),n<s&&(s=n),h.globalAlpha=i*this.Wz,h.drawImage(t,u,l,f,s,r[0]*c,r[1]*c,a*c,o*c))},Dl.prototype.gp=function(t,e,r,n){var i,a,o,f,s,u,l=Support$1.scale,c=void 0===l?1:l,h=this.Nz;h&&(u=void 0===(f=e.style)?{}:f,i=void 0===(s=n.opacity)?1:s,a=u.fontWeight,o=u.fontSize,e=void 0===(l=u.fontFamily)?"sans-serif":l,f=u.fillColor,n=u.strokeColor,l=void 0===(s=u.strokeWidth)?1:s,s=void 0===(s=u.textAlign)?"center":s,u=void 0===(u=u.Gz)?"Alphabetic":u,h.globalAlpha=i,h.globalAlpha=1,h.font=a+" "+o*c+"px "+e,h.textAlign=s,h.textBaseline=u,u=r[0],r=r[1],h.lineJoin="round",n&&l&&(h.strokeStyle=n,h.lineWidth=l,h.strokeText(t,u*c,r*c)),h.fillStyle=f,h.fillText(t,u*c,r*c))},Dl.prototype.Pz=function(){this.canvas,Support$1.scale,this._size},Dl.prototype.Tz=function(){this.canvas.width=this.canvas.width},Dl.prototype.reset=function(){this.Pz()},Dl.prototype.destroy=function(){this.Pz()},Dl.prototype.Oz=function(t,e){void 0===e&&(e=[]);var r=e[0]||3,e=e[1]||20;return r<=t&&t<=e},Dl.prototype.Bz=function(t){var e=(e=this._container)||(this._container=this.EV(this._map)),r=Support$1.scale,n=t.zIndex,i=void 0===n?100:n,a=t.opacity,o=t.visible,n=t.zooms,t=void 0===n?[2,20]:n,n=this.wf.$n.zoom,t=this.Oz(n,t);e.style.display=o&&t&&0!==a?"block":"none",this.Wz=a;a=this._size;e.setAttribute("width",a[0]*r+"px"),e.setAttribute("height",a[1]*r+"px"),e.style.width=a[0]+"px",e.style.height=a[1]+"px",e.style.zIndex=i+""},Dl.prototype.EV=function(t){t=t.getContainer().querySelector(".amap-layers");return t&&t.appendChild(this.canvas),AMap.DomUtil.addClass(this.canvas,"amap-labellayers"),this.canvas},Dl);function Dl(){this._size=[0,0],this.Wz=1;var t=this.canvas=document.createElement("canvas");this.Nz=t.getContext("2d")}var SmartTypedArray=M.SmartTypedArray,LabelsLayerBaseRender=(so=LayerRender,__extends(to,so),to.prototype.Hz=function(t,e,r,n,i,a){this.ac||(this._map=i,this._view=i.getView(),this.ac=i.z_,this.Mf=i.R_,this._viewMode=e.$n.viewMode,this.fz=i.fS(),this._map.isDOMMode()?this.Vz||(this.Vz=new LabelsRenderDOMRender):this.Zz||(this.Zz=new LabelsRender),this.Zz&&this.Zz.Mz({map:i,z_:i.z_,R_:i.R_,$i:t.Zn()}))},to.prototype.Jz=function(){return{centerCoord:this.uu}},to.prototype.vi=function(t){return this.fz?this.fz.vi(t,""):null},to.prototype.destroy=function(){this.Zz&&(this.Zz.destroy(),delete this.Zz),this.Vz&&(this.Vz.destroy(),delete this.Vz),this.AG()},to.prototype.reset=function(){this.Zz&&this.Zz.reset(),this.Vz&&this.Vz.reset()},to.prototype.Yz=function(t,e,r,n,i){this.Vz.Ce(t,e,r,n,i)},to.prototype.SG=function(){var t;return"undefined"!=typeof Int8Array&&(t=new SmartTypedArray("uint8",5e5)).value.fill(0),t},to.prototype.zG=function(t){this.TG[t]||(this.TG[t]={iterator:0});var e=this.TG[t];return e.LG||(e.LG=this.SG()),e.zz||(e.zz=[]),this.TG[t]},to.prototype.AG=function(){var t,e,r=this.TG||{};for(t in r)r.hasOwnProperty(t)&&(delete(e=r[t]).zz,e.od&&(e.od.destroy(),delete e.od),e.iterator=0,e.LG&&e.LG.value.fill(0))},to),so;function to(){var t=so.call(this)||this;return t.type="labelsLayer",t.wf=null,t.Ps={},t._viewMode="2D",t.Wf={},t.Bf={},t.TG={},t.uu=[0,0],t}var Util$1=AMap.Util,transforms$1=M.transform,lcs=M.geo.lcs,SmartArrayBuffer=M.SmartArrayBuffer,LabelsLayerRender=(Po=LabelsLayerBaseRender,__extends(Qo,Po),Qo.prototype.Hz=function(t,e,r,n,i,a){if(n&&e){Po.prototype.Hz.call(this,t,e,r,n,i,a);r=(this.wf=e).$n,i=r.projectionId;this.If=transforms$1[i];i=r.zoom;if(e&&a.visible&&a.opacity&&Util$1.dS(i,a.zooms)){if(!n.Nf)return;if(this._map.isDOMMode()||(o=t.context,n.upload(o)),!n)return;var o=n.rp,r=(n.buffer,n.zo,r.centerCoord);this.uu=lcs.getLocalByCoord([r[0],r[1]]).center||[0,0];n=this.Ps=n;return this.Ps.lp=o.up,n}return null}},Qo.prototype.renderFrame=function(t,e,r,n,i){var a=this.fz;a&&(this.Wf=a.Uf,this.Bf=a.$f),this._map&&(this._map.isDOMMode()?(a=this.Ps.zo,a=Util$1.hp(a,this.wf),this.Yz(r,n,e,this._map,{Sa:a,centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})):this.Jh(t,r,e,n,i))},Qo.prototype.Jz=function(){var t=this.Ps.zo;return{Sa:Util$1.hp(t,this.wf),from:"labelsLayer",opacity:1,offset:[0,0],centerCoord:this.uu}},Qo.prototype.Jh=function(t,e,r,n,i){var a=this.Zz,o=t.context;if(r&&r.other){var f=r.other,s=f.rp,u=f.buffer,l=f.zo,c=Util$1.hp(l,e);if(s&&s.up){this.AG();for(var r=this.zG(this.l_),h=r.LG,f=r.od,l=CONSTS.sp,v=s&&s.pp,d=v.length,_=0,y=[],g=this.Ps.style||{},p=0;p<d;p++){var m=v[p].dp||[],b=_,_=a.Dz(h,this.Wf,{start:b,dp:m,style:g});y.push({start:b,end:_})}f?f.update(h.value):r.od=new SmartArrayBuffer(o,h.value,l),r.zz=y,n.ce&&t.context.clear({depth:!0}),a.Ce(e,o,{Rz:s,buffer:u,od:r.od.buffer,zz:r.zz},{from:this.type,Sz:!0,Sa:c,oo:t,LF:n,yZ:!0,zV:i.DV})}}},Qo),Po;function Qo(){var t=Po.call(this)||this;return t.type="labelsLayer",t.l_="labelsLayer",t}var utils=M.Util,LabelsRenderUtil$1=M.LabelsRenderUtil,labelsUtil=M.labelsUtil,vector=M.vector,SmartArrayBuffer$1=M.SmartArrayBuffer,SmartTypedArray$1=M.SmartTypedArray,rbush=M.rbush,Support$2=M.Support,LabelLine=(Pp.prototype.Ns=function(t,e){void 0===e&&(e={});var r=e.DG,n=e.transform,i=e.view,a=e.centerCoord,o=e.FG,f=e.context,s=e.Uf,u=(e.bounds,e.Iz);return this._map||(this._map=e.map,this.b$=e.fz),this.wf=r,this.aa=r.$n,this.If=n,this._view=i,this._viewMode=r.$n.viewMode,this.uu=a,this.HG=o,this.Wf=s,this.bo=u,this.Kz(),this.Cf||(this.Cf=f.fe(this.Lf,1)),this.Xf=e.tZ,this.Kf(t,e),this.Qf(this.Xf,e),this.ip(f)},Pp.prototype.destroy=function(){this.Kz(),delete this.Xf,this.Cf&&(this.Cf.context.deleteBuffer(this.Cf),delete this.Cf)},Pp.prototype.Kf=function(t,e){void 0===e&&(e={});var r=this.aa,n=(r||{}).zoom,i=void 0===n?20:n,a=this.If,o=this.Xf,f=CONSTS.Color,s=e.bounds;if(r){for(var u={},l=r.rotation||0,c=0,h=t;c<h.length;c++){var v=h[c],d=v.rank;u[d]||(u[d]=[]),u[d].push(v)}for(var _,y,g,p,m,b=Object.keys(u),t=b.length,x=0,S=this._map.getMapState().Tf,M=t-1;0<=M;M--)for(var C=0,A=u[b[M]];C<A.length;C++){var k=A[C],w=k.name,T=k.$G,$=k.CO,I=k.EG,L=k.BG,F=k.path,P=k.RV||"absolute",z=k.zooms,B=k.rank,E=k.style,O=k.Bp,D=LabelsRenderUtil$1.kz([[-k.Sa[0],-k.Sa[1]]],O,i,{centerCoord:this.uu})[0],R=k.key;D=LabelsRenderUtil$1.MG(O,D),_=E.fontSize,y=E.fillColor,g=E.strokeColor||f.Gp,p=1.3*_;for(var N=x=0,H=this.Zp(F,p,{zoom:i,transform:a,bounds:s,Bp:O,BG:L,RV:P});N<H.length;N++){var U=H[N];(U.length||0)<2||(m={transform:a,fontSize:_,qp:p,zoom:i,name:w,CO:$,EG:I,BG:L,Sa:D,bounds:s,Tf:S,nF:l},(!(U=this.Yp(U,m,x++<1)).Id||U.pos.length&&U.pos[0].length)&&(m={name:w,$G:T,CO:$,rank:B,fontSize:_,fillColor:y,strokeColor:g,zooms:z,Sa:D,key:R,Bp:O},this.Vp(U,o,m)))}}return o}},Pp.prototype.Zp=function(t,e,r){void 0===t&&(t=[]),void 0===e&&(e=20),void 0===r&&(r={});var n,i,a=CONSTS.Dp,o=a.Ad,f=a.Bd,s=r.zoom,u=r.Bp,l=r.BG,r=r.RV,c=0,h=0,v=t.length-1,d=[[]],_=s<12?10:o,o=this.aa;if(!o)return d;for(var y={$n:o,size:this.HG,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu,RV:r},g=0;g<v-3;g+=2){var p=LabelsRenderUtil$1.kz([[t[g],t[g+1]],[t[g+2],t[g+3]]],u,s,{centerCoord:this.uu}),m=p[0],b=p[1],x=S,S=0===g?"2D"===this._viewMode?this.If.transform(m[0],m[1],s):LabelsRenderUtil$1.wu(m[0],m[1],s,y):M,M="2D"===this._viewMode?this.If.transform(b[0],b[1],s):LabelsRenderUtil$1.wu(b[0],b[1],s,y),C=c,p=(h=labelsUtil.Sd(S,M))/e,m=void 0;_<(c+=h)&&(C/_<.3&&2<=h/_&&(S=labelsUtil.OG(S,M,_/h)),m=x?(b=vector.Ip(S,x),x=vector.Ip(M,S),vector.Qj(b,x)):0,n?n=labelsUtil.Ed([S,M],l):i=n=labelsUtil.Ed([S,M],l),m<=f&&n===i&&(1<p||s<12&&.6<=p)?d[d.length-1].push(S):(n=i=void 0)!==d[d.length-1][0]&&d.push([]))}for(g=0;g<d.length;g++){var A=d[g];labelsUtil.Ed(A,l)&&d[g].reverse()}return d},Pp.prototype.Yp=function(t,e,r){void 0===t&&(t=[]),void 0===e&&(e={}),void 0===r&&(r=!1);for(var n,i,a=CONSTS.Dp.Td,o=e.transform,f=e.fontSize,s=void 0===f?12:f,f=e.zoom,u=void 0===f?20:f,f=e.BG,l=void 0===f?0:f,f=e.CO,c=void 0===f?[]:f,h=e.EG,v={index:0,Id:0,pos:[],Dd:[],Pd:[],points:[],EG:[]},d=(e.qp,0),_=t.length,y=c.length,g=!1,p=0,m=0,b=!1,x={viewMode:this._viewMode,transform:o,view:this._view};p<_-1&&m<30;){m++;var S=v.index;v.pos[S]||(v.pos[S]=[],v.Pd[S]=[],v.points[S]=[],v.Dd[S]=[]);var M,C=void 0,C=b?$:t[p],A=t[p+1],k=h[c[v.Id]],w=s/24,T="ch"===l,d=T?1.3*s:k&&k.char[4]*w*1.3,$=g?labelsUtil.jd($,t[p],t[p+1],d):(i=labelsUtil.getAngle(C,A),labelsUtil.Od(C,i,d)),w=v.index;if(!(v.Id<y&&r)){r=!0,v.index++,v.Id=0,p=this.zd(t,p+1,a),g=b=!1;break}i="2D"===this._viewMode?(n=o.Xs(C[0],C[1],u),o.Xs($[0],$[1],u)):(n=LabelsRenderUtil$1.nt(C[0],C[1],u,x),LabelsRenderUtil$1.nt($[0],$[1],u,x)),i=labelsUtil.Fd(n,i,1)[0],M=labelsUtil.Fd(C,$,1)[0],T=labelsUtil.Nd(C,$,T?"":"x"),v.pos[w].push(i),v.points[w].push(M),v.Pd[S].push(T),v.Id++,v.Id===y-1&&(v.pos[w].$d=!1,v.EG[w]=h),labelsUtil.Sd($,A)<d?(p++,b=g=!0):g=!(b=!0)}return v},Pp.prototype.Vp=function(t,e,r){void 0===t&&(t={}),void 0===r&&(r={});for(var n,i,a,o,f,s=r.name,u=void 0===s?"":s,s=r.$G,l=void 0===s?[]:s,s=r.CO,c=void 0===s?[]:s,s=r.rank,h=void 0===s?1:s,s=r.fontSize,v=void 0===s?12:s,d=r.fillColor,_=r.strokeColor,y=r.zooms,g=r.Sa,p=r.key,m=r.Bp,b=c.length,x=t.pos.length,S=[],M=!1,C=0,A=0;A<x;A++)if(n=t.pos[A]||[],o=t.Pd[A]||[],f=t.EG[A]||[],i=n.$d,n.length===b){for(C=0;C<b;C++){if(!(a=n[w=i?b-1-C:C])||!this.Ud(o,C)){M=!0;break}k=l&&l.length?u.substring.apply(u,l.slice(C,C+2)):u.substr(C,1);var k={data:{id:utils.stamp(this),position:a,name:u,extData:{Sa:g,key:p,Bp:m,CO:c.slice(C,C+1)},txt:k,rank:h},opts:{type:"normal",angle:o[w]||0,zooms:y,text:{direction:"center",offset:[0,0],EG:f,style:{fontSize:v,fillColor:d,strokeColor:_,strokeWidth:2}}}},w=this._map.getLayerByClass("AMap.MaskLayer");if(w){w=w.getRender();if(w&&!w.EH(k.data.position,this.wf))return!1}S.push(k)}M||(e[p]||(e[p]=[]),e[p].push(S))}},Pp.prototype.zd=function(t,e,r){void 0===t&&(t=[]),void 0===e&&(e=0),void 0===r&&(r=0);for(var n=0,i=t.length-1,a=e;a<i;a++){var o=t[a],f=t[a+1];if(r<=(n+=labelsUtil.Sd(o,f)))break}return a},Pp.prototype.Ud=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=CONSTS.Dp.Bd,n=e-1;if(n<0)return!0;e=t[e],n=t[n];return!(Math.abs(e-n)>=r)},Pp.prototype.Qf=function(t,e){void 0===e&&(e={});var r=this.aa;if(r){var n,i=this.b$,a=r.zoom,o=void 0===a?20:a,f=e.bounds,s=this.Gf,u=!1,l=0,c=[];for(n in t)if(t.hasOwnProperty(n))for(var h=0,v=t[n];h<v.length;h++){for(var d=v[h],_=0,y=d;_<y.length;_++){var g,p,m=y[_],b=m.data,x=m.opts,S=b.txt,M=b.position,m=b.extData,b=m.Bp,b=(LabelsRenderUtil$1.kz([vector.multiply(m.Sa,-1)],b,o,{centerCoord:this.uu})[0],x.text.style),x=b&&b.fontSize,b=LabelsRenderUtil$1.gz(M,f);if(p=[],b&&(g=LabelsRenderUtil$1.wu(M[0],M[1],o,{$n:r,size:this.HG,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu,RV:"relative"}),g=this.Xp(g,x),g=this.b$.iC(g,{padding:5,id:S,type:"road"}),(p=i.search(g)).length||(p=s.search(g))),!b){u=!0;break}for(var C=0,A=p.length;C<A;){if(this.Wf[p[C].id]||"road"===p[C].type){u=!0;break}C++}g&&c.push(g)}if(!u){l+=d.length;for(var k=0,w=c;k<w.length;k++){var T=w[k];s.Xc(T)}c=[]}d.hide=u,u=!1}this.Jp=l}},Pp.prototype.ip=function(t){var e=CONSTS.sp,r=CONSTS.Kp,n=this.Xf||{},i=this.aa,a=0;if(i&&this._map){var o,f,s,u,l,c,h,v,d,_,y,g,p,m,b,x,S,M,C,A,k,w,T=i.zoom,$=this.bo,I=this._map.getMapState().Af,i=this.Jp,L=void 0,L=(1e5<72*i&&this.Qp.ff(72*i),this.Qp.value),F=[],P=void 0,z=void 0,B=void 0,E=void 0,O=void 0,D=void 0,R=void 0,N=void 0,H=void 0,U=void 0,j=void 0,G=0;for(w in n)if(n.hasOwnProperty(w))for(var V=n[w],W=V.length,K=0;K<W;K++)if(!(k=V[K]).hide)for(var q=0,Z=k;q<Z.length;q++)for(var Y,J=Z[q],Q=J.data,X=J.opts,tt=Q.position,et=(P=Q.extData).CO,rt=P.Bp,nt=X.angle||0,it=X.zooms,at=(z=X.text).EG||{},ot=(B=z.style).fontSize,ft=B.fillColor,st=B.strokeColor,ut=B.strokeWidth||0,lt=(E=this.td(ot,ut)).gamma,ct=E.ed,ht=E.backgroundColor,vt=E.strokeWidth,dt=E.nd,_t=0;_t<1;_t++)(O=at[o=et]||{index:EnumTextureIndex.dynamic,char:null===(Y=this._map.yH)||void 0===Y?void 0:Y.LB(w)[o],pos:{startX:0,startY:0}})&&O.char&&(D=O.index,R=O.char,N=tt[_t],H=tt[_t+1],N&&H&&R&&(f=it[0],s=it[1],U=ot/r.size,I&&T<$&&(U/=Math.pow(2,$-T)),u=R[0],j=R[1],l=R[2],c=R[3],h=R[5],v=R[6],d=r.buffer,Y={x:-(ot/24*(R[4]+CONSTS.ic))/2,y:-ot/2},0<u&&0<j&&(g=+((_=Y.x)+(l-d)*U),p=+(_+(l-d+(u+=2*d))*U),m=(y=Y.y)-c*U,b=+(y+((j+=2*d)-c)*U),S=x=0,M=(x+=O.pos.startX)+h,C=(S+=O.pos.startY)+v,L.set([g,m,M,C,N,H,D,2,f,s,0,nt,p,m,M+u,C,N,H,D,2,f,s,0,nt,g,b,M,C+j,N,H,D,2,f,s,0,nt,g,b,M,C+j,N,H,D,2,f,s,0,nt,p,m,M+u,C,N,H,D,2,f,s,0,nt,p,b,M+u,C+j,N,H,D,2,f,s,0,nt],G),G+=72,A=12*a*6,F.push([ot,[N,H],nt,ft,st,lt,d,dt,ct,ht,vt,A,72+A,P.key,rt]),a++)));i=this.u_;return i?i.update(L):i=this.u_=new SmartArrayBuffer$1(t,L,e),{pp:F,zs:i,od:this.Cf}}return{pp:[],od:null,zs:null}},Pp.prototype.Xp=function(t,e){void 0===e&&(e=12);var r=1.3*e,e=1.3*e,t=[t[0]-r/2,t[1]-e/2];return{x:t[0],y:t[1],width:r,height:e}},Pp.prototype.td=function(t,e){void 0===t&&(t=12),void 0===e&&(e=0);var r=CONSTS.ec,n=CONSTS.Cd,i=CONSTS.Ld,a=CONSTS.Color,o=0,i=t<12?n:i;return e&&(o=i*(1-(e=10<e*Support$2.scale?10:e)/10.1)),{gamma:1.4142*(r<t||1<Support$2.scale?1.7:1.5)/t,nd:o,ed:i-1/256*(Support$2.scale-1),backgroundColor:a.Gp,strokeWidth:e}},Pp.prototype.Kz=function(){this.Gf&&this.Gf.clear()},Pp),_a;function Pp(){this._viewMode="2D",this.Gf=rbush(),this.Cf=null,this.u_=null,this.Jp=0,this.bo=20,this.Xf={},this.Lf=new Uint8Array(1e5).fill(1),this.Qp=new SmartTypedArray$1("float32",1e5)}var SmartArrayBuffer$2=M.SmartArrayBuffer,Util$2=AMap.Util,NebulaLabelFormat=M.NebulaLabelFormat,MapboxLabelFormat=M.MapboxLabelFormat,labelsUtil$1=M.labelsUtil,LabelsRenderUtil$2=M.LabelsRenderUtil,vector$1=M.vector,transforms$2=M.transform,lcs$1=M.geo.lcs,LabelFormatMap=(_a={},_a[NebulaLabelFormat.id]=NebulaLabelFormat,_a[MapboxLabelFormat.id]=MapboxLabelFormat,_a),TileLabelsLayerRender=(Pv=LabelsLayerBaseRender,__extends(Qv,Pv),Qv.prototype.Hz=function(t,e,r,n,i,a){if(n&&e){Pv.prototype.Hz.call(this,t,e,r,n,i,a);i=e.$n.zoom;if(n&&e&&a.visible&&a.opacity&&Util$2.dS(i,a.zooms)){var o=[],f=!0,s=void 0;this.NG={};for(var u=0;u<n.length;u++){for(var l=n[u],c=l.tiles||[],h=0;h<c.length;h++){var v=c[h];o.push(v)}c.length&&(f=f&&l.fo),s=l.Ca}for(var d={},_=0,y=o;_<y.length;_++){var g=y[_];d[g.zo.key]=g}f=!0,(this.Xz=f)&&(this.vf=Object.keys(d),this.mf=d,this.mf.yf=s||[]);a=this.vf;if(!a)return;for(var p,m=void 0,b=0,x=a;b<x.length;b++)for(var S=x[b],M=this.mf[S],C=0,A=Array.isArray(M.data)?M.data:[M.data];C<A.length;C++)if((m=A[C])&&m.labels){if(p=labelsUtil$1.xf(m.labels,this.mf.yf),!this._map.isDOMMode())for(var k=0,w=p;k<w.length;k++)w[k].upload(t.context);m.gf=p}a=e.$n,e=a.projectionId,a=a.centerCoord;return this.If=transforms$2[e],this.uu=lcs$1.getLocalByCoord([a[0],a[1]]).center,this.Ps=this.Pf(this.mf)}return null}},Qv.prototype.renderFrame=function(t,e,r,n,i){var a,o,f,s,u,l,c=(this.wf=r).$n,h=this.vf,v=this.Zz;h&&c&&(a=t.context,o=this.fz,(u=this._map)&&(f=u.qz(),s=u.Qz(),l=this._map.isDOMMode(),u=e.tile[0].yZ,e.tile[1]&&(u=u||e.tile[1].yZ),f&&(this.Bf=o.$f,this.Wf=o.Uf,l?this.Yz(r,n,e,this._map,{centerCoord:this.uu,Uf:this.Wf,$f:this.Bf}):this.Jh(t,r,h,{yZ:u,zV:i.DV})),l||(h=this._map.TL(),l=this.Ps,s&&u&&(l.Vf&&!h&&(this.Xf={},h=LabelsRenderUtil$2.getBounds(c,{zoom:c.zoom,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode}),this.bo=r.$n.zoom,c={map:this._map,fz:this.fz,R_:this.Mf,DG:r,transform:this.If,view:this._view,centerCoord:this.uu,FG:r.size,context:a,Uf:this.Wf,bounds:h,Iz:this.bo,tZ:this.Xf},h=this.Jf(this.mf),this.tp=this.WG.Ns(h,c)),v.Cz(r,a,this.mf,{$z:this.tp},{Az:this.vf,Iz:this.bo,centerCoord:this.uu,yZ:u,zV:i.DV})))))},Qv.prototype.destroy=function(){delete this.tp,delete this.kp,delete this.vf,delete this.mf,Pv.prototype.destroy.call(this)},Qv.prototype.reset=function(){this.Xf={},this.tp.zs&&(this.tp.pp=[]),Pv.prototype.reset.call(this)},Qv.prototype.Jh=function(t,e,r,n){var i,a,o=this.Zz,f=t.context;if(this.Ps.lp||0){this.qf(f,this.mf);for(var s=0;s<r.length;s++){var u,l=r[s];if((u=this.mf[l])&&u.data){i=Array.isArray(u.data)?u.data:[u.data];var l=u.type,l=this.zG(l),c=l.od,h=l.zz,v=l.iterator;if(c){for(var d=0,_=i;d<_.length;d++){a=_[d],g=u.Sa;var y=a.gf,g=LabelsRenderUtil$2.MG(u.zo.z,g);if(y)for(var p=0;p<y.length;p++)var m=y[p],v=o.Ce(e,t.context,{Rz:m.rp,buffer:m.buffer,od:c.buffer,zz:h},{iterator:v,Sa:g,oo:t,yZ:n.yZ,zV:n.zV})}l.iterator=v}}}}},Qv.prototype.Pf=function(t){var e=this.wf,r=e&&e.$n;if(!r)return{};for(var n,i,a,o,f,s,u,l,c,h=r&&r.optimalZoom||20,v=r&&r.zoom||20,d=!1,_=0,y=LabelsRenderUtil$2.getBounds(r,{zoom:h,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode}),g=CONSTS.Mp,e=CONSTS.Rp,p=20<h?20:h<3?3:h,m=this.vf,b=m.length,x=[g,e],S={},M={},C={},A={},k=r.zoom,w=!0,T=0;T<b;T++){a=t[m[T]];for(var $=0,I=Array.isArray(a.data)?a.data:[a.data];$<I.length;$++)if((c=I[$])&&c.gf)for(var L=0,F=c.gf;L<F.length;L++)if(f=(o=F[L]).coords){s=o.Nf,u=o.zp[p]||[],_+=o.rp.up;for(var P=0,z=u;P<z.length;P++){var B=z[P],w=!1,E=s[B],O=f[B],D=a.Sa;D=LabelsRenderUtil$2.MG(a.zo.z,D),l=vector$1.add(O.origin,D),LabelsRenderUtil$2.gz(l,y)||S[B]?(i=(n=s[B].data.extData).Lp?this._map.mapStyle.dn(n.Lp,n.Ap,v):null,l=(E.opts||{}).zooms||x,S[B]||!(k<l[0]||l[1]<k||n.Lp&&!i)?(A[B]&&delete this.Bf[B],l=o.style,S[B]=E,M[B]=O,C[B]=l[B],n.Sa=D,C[B].showText=!i||i.showText,C[B].forceShow=!!i&&i.forceShow,d=!0):(this.Bf[B]||(A[B]=1),this.Bf[B]=1)):(this.Bf[B]||(A[B]=1),this.Bf[B]=1)}}}return w&&(d=!0),{Vf:d,lp:_,Nf:S,coords:M,style:C}},Qv.prototype.qf=function(t,e){var r,n=this.Zz,i=this.vf,a=(this.Ps.lp||0)/12,o={};if(a){this.AG();for(var f=0,s=i;f<s.length;f++){var u,l=(u=e[s[f]]).type,c=this.zG(l);c.LG.ff(a);var h=(h=o[l])||(o[l]={start:0,end:0});if(u)for(var v=0,d=Array.isArray(u.data)?u.data:[u.data];v<d.length;v++){var _=d[v].gf,y=this.Ps.style||{};if(_)for(var g=0,p=_;g<p.length;g++)for(var m,b,x=(b=(m=p[g].rp)&&m.pp).length,S=0;S<x;S++)r=b[S].dp,h.start=h.end,h.end=n.Dz(c.LG,this.Wf,{dp:r,style:y,start:h.start}),c.zz.push({start:h.start,end:h.end})}}var M,C,A,k,w=this.TG;for(M in w)w.hasOwnProperty(M)&&(A=(C=w[M]).od,k=C.LG.value,A?A.update(k):A=new SmartArrayBuffer$2(t,k,1),C.od=A)}},Qv.prototype.Jf=function(t){var e=CONSTS.Op,r=this.wf;if(r){for(var n,i,a,o,f,s=r.$n,u=s&&s.zoom,l=[],c=this.vf,h=c.length,v=this.Xf,d=0;d<h;d++)for(var _=t[c[d]],y=0,g=Array.isArray(_.data)?_.data:[_.data];y<g.length;y++)if(o=g[y],u&&o&&o.XE&&(o.road||o.Dh,f=o.XE,n=_.Sa,i=_.zo.key,a=_.zo.z,!v[i]))for(var p=0,m=f;p<m.length;p++){var b=m[p],x=LabelsRenderUtil$2.wu(b.distance,0,u,{$n:s,size:r.size,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu});Math.abs(x[0]-x[1])<e||(b.Sa=n,b.key=i,b.Bp=a,l.push(b))}return l}},Qv),Pv;function Qv(){var t=Pv.call(this)||this;return t.type="nebula-labelslayer",t.Xz=!1,t.l_="inner",t.vf=[],t.mf={},t.bo=20,t.Xf={},t.tp={pp:[],od:null,zs:null},t.kp={},t.NG={},t.WG=new LabelLine,t}var StencilMode=(nz.disable=new nz({test:(nz.wi={NOTEQUAL:517,ALWAYS:519,EQUAL:514,GEQUAL:518,GREATER:516,LESS:513,NEVER:512,KEEP:7680,REPLACE:7681,ZERO:0,INCR_WRAP:34055,INCR:7682,DECR:7683}).ALWAYS,Li:0,mask:0},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.KEEP],0),nz.Ai=new nz({test:nz.wi.ALWAYS,Li:254,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.REPLACE],255),nz.writeWithStencil=new nz({test:nz.wi.LESS,Li:240,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.KEEP],255),nz.nH=new nz({test:nz.wi.EQUAL,Li:0,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.KEEP],255),nz.$H=new nz({test:nz.wi.EQUAL,Li:0,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.INCR],255),nz.DH=new nz({test:nz.wi.EQUAL,Li:254,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.KEEP],255),nz.FH=new nz({test:nz.wi.EQUAL,Li:254,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.DECR],255),nz.PH=new nz({test:nz.wi.ALWAYS,Li:255,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.INCR],255),nz.HH=new nz({test:nz.wi.NOTEQUAL,Li:1,mask:1},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.KEEP],255),nz.js=new nz({test:nz.wi.NOTEQUAL,Li:1,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.KEEP],255),nz.nbStencil=new nz({test:nz.wi.EQUAL,Li:254,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.KEEP],0),nz.outseaStencil=new nz({test:nz.wi.ALWAYS,Li:254,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.REPLACE],255),nz.TE=new nz({test:nz.wi.EQUAL,Li:0,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.INCR],255),nz.FE=new nz({test:nz.wi.EQUAL,Li:1,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.ZERO],255),nz.test=new nz({test:nz.wi.NOTEQUAL,Li:254,mask:255},[nz.wi.ZERO,nz.wi.ZERO,nz.wi.INCR],255),nz.HE=new nz({test:nz.wi.EQUAL,Li:1,mask:255},[nz.wi.KEEP,nz.wi.KEEP,nz.wi.KEEP],0),nz);function nz(t,e,r){this.stencilFunc=t,this.stencilOp=e,this.stencilMask=r}var AbstractBaseValue=(rz.prototype.set=function(t){this.current=t},rz.prototype.get=function(){return this.current},rz.prototype.setDirty=function(){this.Pi=!0},rz.prototype.reset=function(){this.set(this.default)},rz.prototype.ji=function(t){return this.Pi||!this.Oi(t,this.current)},rz);function rz(t){this.Oi=same,this.gl=t.gl,this.default=this.Fi(),this.current=this.Fi(),this.Pi=!1}var Blend=(vz=AbstractBaseValue,__extends(wz,vz),wz.prototype.Fi=function(){return!1},wz.prototype.set=function(t){var e;this.ji(t)&&(e=this.gl,t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.Pi=!1)},wz),vz;function wz(){return null!==vz&&vz.apply(this,arguments)||this}var Viewport=(zz=AbstractBaseValue,__extends(Az,zz),Az.prototype.Fi=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},Az.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&!this.Pi||(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.Pi=!1)},Az),zz;function Az(){return null!==zz&&zz.apply(this,arguments)||this}var DepthTest=(Ez=AbstractBaseValue,__extends(Fz,Ez),Fz.prototype.Fi=function(){return!1},Fz.prototype.set=function(t){var e;this.ji(t)&&(e=this.gl,t?(e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL)):e.disable(e.DEPTH_TEST),this.current=t,this.Pi=!1)},Fz),Ez;function Fz(){return null!==Ez&&Ez.apply(this,arguments)||this}var StencilTest=(Iz=AbstractBaseValue,__extends(Jz,Iz),Jz.prototype.Fi=function(){return!1},Jz.prototype.set=function(t){var e;this.ji(t)&&(e=this.gl,t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.Pi=!1)},Jz),Iz;function Jz(){return null!==Iz&&Iz.apply(this,arguments)||this}var StencilFunc=(Mz=AbstractBaseValue,__extends(Nz,Mz),Nz.prototype.Fi=function(){return{test:this.gl.ALWAYS,Li:1,mask:65535}},Nz.prototype.set=function(t){this.ji(t)&&(this.gl.stencilFunc(t.test,t.Li,t.mask),this.current=t,this.Pi=!1)},Nz),Mz;function Nz(){return null!==Mz&&Mz.apply(this,arguments)||this}var StencilOp=(Pz=AbstractBaseValue,__extends(Qz,Pz),Qz.prototype.Fi=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},Qz.prototype.set=function(t){var e;this.ji(t)&&((e=this.gl).stencilOp.apply(e,t),this.current=t,this.Pi=!1)},Qz),Pz;function Qz(){return null!==Pz&&Pz.apply(this,arguments)||this}var CullFace=(Uz=AbstractBaseValue,__extends(Vz,Uz),Vz.prototype.Fi=function(){return!1},Vz.prototype.set=function(t){var e;this.ji(t)&&(e=this.gl,t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.Pi=!1)},Vz),Uz;function Vz(){return null!==Uz&&Uz.apply(this,arguments)||this}var BlendFunc=(Yz=AbstractBaseValue,__extends(Zz,Yz),Zz.prototype.Fi=function(){return[this.gl.ONE,this.gl.ZERO]},Zz.prototype.set=function(t){this.ji(t)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.Pi=!1)},Zz),Yz;function Zz(){return null!==Yz&&Yz.apply(this,arguments)||this}var BlendFuncSeparate=(_z=AbstractBaseValue,__extends(aA,_z),aA.prototype.Fi=function(){var t=this.gl.ONE,e=this.gl.ZERO;return[t,e,t,e]},aA.prototype.set=function(t){var e;this.ji(t)&&((e=this.gl).blendFuncSeparate.apply(e,t),this.current=t,this.Pi=!1)},aA),_z;function aA(){return null!==_z&&_z.apply(this,arguments)||this}var BlendEquation=(fA=AbstractBaseValue,__extends(gA,fA),gA.prototype.Fi=function(){return this.gl.FUNC_ADD},gA.prototype.set=function(t){this.ji(t)&&(this.gl.blendEquation(t),this.current=t,this.Pi=!1)},gA),fA;function gA(){return null!==fA&&fA.apply(this,arguments)||this}var BlendEquationSeparate=(iA=AbstractBaseValue,__extends(jA,iA),jA.prototype.Fi=function(){return[this.gl.FUNC_ADD,this.gl.FUNC_ADD]},jA.prototype.set=function(t){var e;this.ji(t)&&((e=this.gl).blendEquationSeparate.apply(e,t),this.current=t,this.Pi=!1)},jA),iA;function jA(){return null!==iA&&iA.apply(this,arguments)||this}var CullFaceSide=(mA=AbstractBaseValue,__extends(nA,mA),nA.prototype.Fi=function(){return this.gl.BACK},nA.prototype.set=function(t){this.ji(t)&&(this.gl.cullFace(t),this.current=t,this.Pi=!1)},nA),mA;function nA(){return null!==mA&&mA.apply(this,arguments)||this}var FrontFace=(qA=AbstractBaseValue,__extends(rA,qA),rA.prototype.Fi=function(){return this.gl.CCW},rA.prototype.set=function(t){(this.ji(t)||this.Pi)&&(this.gl.frontFace(t),this.current=t,this.Pi=!1)},rA),qA;function rA(){return null!==qA&&qA.apply(this,arguments)||this}var DepthClear=(tA=AbstractBaseValue,__extends(uA,tA),uA.prototype.Fi=function(){return 1},uA.prototype.set=function(t){this.ji(t)&&(this.gl.clearDepth(t),this.current=t,this.Pi=!1)},uA),tA;function uA(){return null!==tA&&tA.apply(this,arguments)||this}var ColorClear=(wA=AbstractBaseValue,__extends(xA,wA),xA.prototype.Fi=function(){return[0,0,0,0]},xA.prototype.set=function(t){var e;this.ji(t)&&((e=this.gl).clearColor.apply(e,t),this.current=t,this.Pi=!1)},xA),wA;function xA(){return null!==wA&&wA.apply(this,arguments)||this}var StencilClear=(AA=AbstractBaseValue,__extends(BA,AA),BA.prototype.Fi=function(){return 0},BA.prototype.set=function(t){this.ji(t)&&(this.gl.clearStencil(t),this.current=t,this.Pi=!1)},BA),AA;function BA(){return null!==AA&&AA.apply(this,arguments)||this}var ColorMask=(DA=AbstractBaseValue,__extends(EA,DA),EA.prototype.Fi=function(){return[!0,!0,!0,!0]},EA.prototype.set=function(t){var e;this.ji(t)&&((e=this.gl).colorMask.apply(e,t),this.current=t,this.Pi=!1)},EA),DA;function EA(){return null!==DA&&DA.apply(this,arguments)||this}var DepthMask=(HA=AbstractBaseValue,__extends(IA,HA),IA.prototype.Fi=function(){return!0},IA.prototype.set=function(t){this.ji(t)&&(this.gl.depthMask(t),this.current=t,this.Pi=!1)},IA),HA;function IA(){return null!==HA&&HA.apply(this,arguments)||this}var StencilMask=(KA=AbstractBaseValue,__extends(LA,KA),LA.prototype.Fi=function(){return 65535},LA.prototype.set=function(t){this.ji(t)&&(this.gl.stencilMask(t),this.current=t,this.Pi=!1)},LA),KA;function LA(){return null!==KA&&KA.apply(this,arguments)||this}var BindFramebuffer=(NA=AbstractBaseValue,__extends(OA,NA),OA.prototype.Fi=function(){return null},OA.prototype.set=function(t){var e;this.ji(t)&&((e=this.gl).bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.Pi=!1)},OA),NA;function OA(){return null!==NA&&NA.apply(this,arguments)||this}var BindProgram=(RA=AbstractBaseValue,__extends(SA,RA),SA.prototype.Fi=function(){return null},SA.prototype.set=function(t){this.ji(t)&&(this.current&&this.current!==t&&this.current.Ni(),t?this.gl.useProgram(t.$i):this.gl.useProgram(null),this.current=t,this.Pi=!1)},SA),RA;function SA(){return null!==RA&&RA.apply(this,arguments)||this}var ActiveTextureUnit=(UA=AbstractBaseValue,__extends(VA,UA),VA.prototype.Fi=function(){return this.gl.TEXTURE0},VA.prototype.set=function(t){this.ji(t)&&(this.gl.activeTexture(this.gl.TEXTURE0+t),this.current=t,this.Pi=!1)},VA),UA;function VA(){return null!==UA&&UA.apply(this,arguments)||this}var BindTexture=(XA=AbstractBaseValue,__extends(YA,XA),YA.prototype.Fi=function(){return null},YA.prototype.set=function(t){var e;this.ji(t)&&((e=this.gl).bindTexture(e.TEXTURE_2D,t),this.current=t,this.Pi=!1)},YA),XA;function YA(){return null!==XA&&XA.apply(this,arguments)||this}var AbstractFramebufferAttachment=(_A=AbstractBaseValue,__extends(aB,_A),aB),_A;function aB(t,e){var r=_A.call(this,t)||this;return r.context=t,r.parent=e,r}var ColorAttachment=(eB=AbstractFramebufferAttachment,__extends(fB,eB),fB.prototype.set=function(t){var e,r;(this.Pi||this.ji(t))&&(e=this.gl,r=this.context.bindFramebuffer.current,this.context.bindFramebuffer.set(this.parent.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.context.bindFramebuffer.set(r),this.current=t)},fB.prototype.Bi=function(){var t=this.current,e=this.gl;t&&(e.deleteTexture(t),this.current=null)},fB.prototype.Fi=function(){return null},fB),eB;function fB(){return null!==eB&&eB.apply(this,arguments)||this}var DepthAttachment=(lB=AbstractFramebufferAttachment,__extends(mB,lB),mB.prototype.set=function(t){var e;(this.Pi||this.ji(t))&&(e=this.gl,this.context.bindFramebuffer.set(this.parent.framebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t)},mB.prototype.Bi=function(){var t=this.current,e=this.gl;t&&(e.deleteRenderbuffer(t),this.current=null)},mB.prototype.Fi=function(){return null},mB),lB;function mB(){return null!==lB&&lB.apply(this,arguments)||this}var BindArrayBuffer=(rB=AbstractBaseValue,__extends(sB,rB),sB.prototype.Fi=function(){return null},sB.prototype.set=function(t){t&&t.xe&&assert(!0,"WebGLBuffer deleted"),this.ji(t)&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.current=t,this.Pi=!1)},sB),rB;function sB(){return null!==rB&&rB.apply(this,arguments)||this}var BindElementArrayBuffer=(uB=AbstractBaseValue,__extends(vB,uB),vB.prototype.Fi=function(){return null},vB.prototype.set=function(t){this.ji(t)&&(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.Pi=!1)},vB),uB;function vB(){return null!==uB&&uB.apply(this,arguments)||this}var UnpackFlipYWebgl=(xB=AbstractBaseValue,__extends(yB,xB),yB.prototype.Fi=function(){return!1},yB.prototype.set=function(t){this.ji(t)&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.Pi=!1)},yB),xB;function yB(){return null!==xB&&xB.apply(this,arguments)||this}var Framebuffer=(AB.prototype.resize=function(t,e){this.Wi.Bi(),this.Gi.Bi(),this.width=t,this.height=e},AB.prototype.destroy=function(){var t=this.context.gl;this.Wi.Bi(),this.Gi.Bi(),t.deleteFramebuffer(this.framebuffer)},AB.prototype.get=function(){return this.framebuffer},AB);function AB(t,e,r){this.context=t,this.width=e,this.height=r;r=t.gl.createFramebuffer();if(!r)throw Error("createFramebuffer error");this.framebuffer=r,this.Wi=new ColorAttachment(t,this),this.Gi=new DepthAttachment(t,this)}var UglyBrowser=M.Support,Texture=(JB.prototype.update=function(t,e,r){var n=t.width,i=t.height,a=e&&e.resize||(!this.size||this.size[0]!==n||this.size[1]!==i)&&!r,o=this.context.gl,f=e&&e.format||o.RGBA;this.Zi=Boolean(e&&e.Zi),o.bindTexture(o.TEXTURE_2D,this.texture),e&&e.Yi&&o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),e&&e.flipY?this.context.hB.set(!0):this.context.hB.set(!1),a?(this.size=[n,i],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||UglyBrowser.imageBitmap&&t instanceof ImageBitmap?o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,f,n,i,0,f,o.UNSIGNED_BYTE,t.data)):(r=(a=r||{x:0,y:0}).x,a=a.y,t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||UglyBrowser.imageBitmap&&t instanceof ImageBitmap?o.texSubImage2D(o.TEXTURE_2D,0,r,a,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,r,a,n,i,f,o.UNSIGNED_BYTE,t.data)),this.Zi&&this.Vi()&&o.generateMipmap(o.TEXTURE_2D),e&&e.Yi&&o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),o.bindTexture(o.TEXTURE_2D,null)},JB.prototype.generateMipmap=function(){var t;this.Vi()?((t=this.context.gl).bindTexture(t.TEXTURE_2D,this.texture),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)):console.log("generateMipmap error")},JB.prototype.bind=function(t,e,r){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),e&&e!==this.Xi&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),this.Xi=e),r&&r!==this.Hi&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r),this.Hi=r),t&&t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)},JB.prototype.Vi=function(){return Math.log(this.size[0])/Math.LN2%1==0&&Math.log(this.size[1])/Math.LN2%1==0},JB.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},JB.prototype.get=function(){return this.texture},JB);function JB(t,e,r){this.context=t,this.texture=t.gl.createTexture(),this.update(e,r)}function diffArray(t,e){if(t===e)return!1;if(t.length!==e.length)return!0;for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!0;return!1}function diffType(t,e){return typeof t!=typeof e||"object"==typeof t&&Array.isArray(t)!==Array.isArray(e)}function fastDiff(t,e){return t!==e}function diff(t,e){if(diffType(t,e))return 1;switch(typeof t){case"boolean":case"number":case"string":return fastDiff(t,e);case"object":return(Array.isArray(t)?diffArray:fastDiff)(t,e);default:return 1}}function same(t,e){return!diff(t,e)}var Context=(oC.prototype.clear=function(t){var e=0,r=this.gl;t.color&&(e|=r.COLOR_BUFFER_BIT),t.depth&&(e|=r.DEPTH_BUFFER_BIT),t.stencil&&(e|=r.STENCIL_BUFFER_BIT),0!==e&&r.clear(e)},oC.prototype.Qi=function(t){this.te(t,ColorMode.Mi)?(this.ie.set(!1),this.colorMask.set(ColorMode.tH)):this.te(t,ColorMode.disabled)?this.colorMask.set(ColorMode.iH):(this.ie.set(!0),this.ee.set(t.Ci),this.colorMask.set(t.mask))},oC.prototype.ne=function(t){this.depthTest.set(t)},oC.prototype.ae=function(t){this.te(t.stencilFunc.test,StencilMode.wi.ALWAYS)&&!t.stencilMask?this.se.set(!1):(this.se.set(!0),this.stencilFunc.set(t.stencilFunc),this.stencilOp.set(t.stencilOp),this.stencilMask.set(t.stencilMask))},oC.prototype.re=function(t){t.enable?(this.cullFace.set(t.enable),this.he.set(t.mode),this.frontFace.set(t.frontFace)):this.cullFace.set(!1)},oC.prototype.reset=function(){this.ie.reset(),this.ee.reset(),this.blendEquation.reset(),this.cullFace.reset(),this.he.reset(),this.frontFace.reset(),this.depthTest.reset(),this.se.reset(),this.stencilFunc.reset(),this.stencilOp.reset(),this.stencilMask.reset(),this.le.reset(),this.ue.reset(),this.ce.reset(),this.bindFramebuffer.set(null)},oC.prototype.createFramebuffer=function(t,e){return new Framebuffer(this,t,e)},oC.prototype.createRenderbuffer=function(t,e){var r=this.gl,n=r.createRenderbuffer();if(r.bindRenderbuffer(r.RENDERBUFFER,n),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t,e),!n)throw Error("bindRenderbuffer error");return n},oC.prototype.createTexture=function(t,e){return new Texture(this,t,e)},oC.prototype.fe=function(t,e,r){void 0===r&&(r="STATIC_DRAW");var n=this.gl,i=n.createBuffer();if(!i)throw Error("createBuffer error");i.context=this,i.size=e,i.length=t.byteLength/e;e=this.de.current;return this.de.set(i),n.bufferData(n.ARRAY_BUFFER,t,n[r]),this.de.set(e),i},oC.prototype.ve=function(t){var e=this.gl,r=e.createBuffer();if(!r)throw Error("createBuffer error");r.context=this,r.length=t.length,r.type="int",r.G_=!0,t instanceof Uint16Array?r.size=16:r.size=32;var n=this.me.current;return this.me.set(r),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW),this.me.set(n),r},oC.prototype.getSize=function(){return{width:this.gl.canvas.width,height:this.gl.canvas.height}},oC.prototype.getParameter=function(t){return this.ye[t]||(this.ye[t]=this.gl.getParameter(this.gl[t])),this.ye[t]},oC.prototype.deleteBuffer=function(t){this.de.set(null),this.me.set(null),this.gl.deleteBuffer(t),t.xe=!0},oC.prototype.getExtension=function(t){this.extensions[t]||(this.Z_?this.Z_.indexOf(t)<0?console.error("WebGL: supportedExtension not exist "+t):this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t),this.extensions[t]||console.error("WebGL: getExtension "+t+" failed")):console.error("WebGL: supportedExtension not exist"))},oC.prototype.setDirty=function(){this.ge.setDirty(),this.bindTexture.setDirty(),this.bindFramebuffer.setDirty(),this.de.setDirty(),this.me.setDirty(),this.be.setDirty(),this.activeTexture.setDirty(),this.colorMask.setDirty(),this.depthMask.setDirty(),this.se.setDirty(),this.le.setDirty(),this.stencilMask.setDirty(),this.stencilFunc.setDirty(),this.stencilOp.setDirty(),this.colorMask.setDirty(),this.ie.setDirty(),this.blendEquation.setDirty(),this.ee.setDirty(),this.depthTest.setDirty(),this.cullFace.setDirty(),this.he.setDirty(),this.frontFace.setDirty(),this.hB.setDirty()},oC);function oC(t){this.te=same,this.gl=t,this.Z_=this.gl.getSupportedExtensions(),this.extensions={},this.be=new Viewport(this),this.ie=new Blend(this),this.ee=new BlendFuncSeparate(this),this.blendEquation=new BlendEquation(this),this.cullFace=new CullFace(this),this.he=new CullFaceSide(this),this.frontFace=new FrontFace(this),this.depthTest=new DepthTest(this),this.se=new StencilTest(this),this.stencilFunc=new StencilFunc(this),this.stencilOp=new StencilOp(this),this.stencilMask=new StencilMask(this),this.le=new StencilClear(this),this.ue=new ColorClear(this),this.ce=new DepthClear(this),this.bindFramebuffer=new BindFramebuffer(this),this.ge=new BindProgram(this),this.bindTexture=new BindTexture(this),this.activeTexture=new ActiveTextureUnit(this),this.de=new BindArrayBuffer(this),this.me=new BindElementArrayBuffer(this),this.colorMask=new ColorMask(this),this.depthMask=new DepthMask(this),this.ye={},this.hB=new UnpackFlipYWebgl(this)}var CullFaceMode=(SC.we=new SC(!1,(SC.wi={CW:2304,CCW:2305,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032}).FRONT_AND_BACK,SC.wi.CW),SC._e=new SC(!0,SC.wi.FRONT,SC.wi.CW),SC.back=new SC(!0,SC.wi.BACK,SC.wi.CW),SC);function SC(t,e,r){this.enable=t,this.mode=e,this.frontFace=r}var fillExtFragmentString="precision mediump float;\\n\\n// uniform vec4 u_roofColor;\\n// uniform vec4 u_wallColor;\\nuniform vec3 u_lightColor;\\nuniform vec3 u_lightDir;\\nuniform mat4 u_normalMatrix;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\nuniform vec2 u_skyBMRange;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\n// varying vec4 v_color;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_roofColor;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    // 环境光\\n    vec3 ambientLightColor = vec3(1, 1, 1);\\n    float ambientStrength = 0.92;\\n    vec3 ambient = ambientStrength * ambientLightColor;\\n\\n    // 平行光的漫反射\\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\\n    vec3 lightDir = u_lightDir;\\n    vec3 lightColor = vec3(1, 1, 1);\\n    float lightStrength = 0.1;\\n    vec3 norm = normalize(v_normal);\\n    float nDotL = max(dot(lightDir, norm), 0.0);\\n    vec3 diff = lightStrength * lightColor * nDotL;\\n\\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\\n    float topOpacity = 1.0;\\n    if(v_fragHeight >= v_fullHeight) {\\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\\n    }\\n\\n    // 根据楼高判断颜色\\n    if(v_fragHeight >= v_fullHeight) {\\n        gl_FragColor = v_roofColor;\\n        // gl_FragColor = u_roofColor;\\n    } else {\\n        // 渐变色，暂时不用\\n        // float hFactor = v_fragHeight / v_fullHeight / 8.0 + 1.0;\\n        gl_FragColor = v_color;\\n    }\\n\\n    gl_FragColor.rgb *= diff + ambient;\\n    gl_FragColor.a *= u_opacity * topOpacity;\\n\\n    // 雾化\\n    // float y = v_pos.y / v_pos.w;\\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\\n    if(u_skyHeight < 1.0) {\\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        // gl_FragColor.a *= fogFactor;\\n\\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n",fillExtVertextString="precision highp float;\\nattribute vec4 a_pos;\\n// attribute vec4 a_color;\\n// attribute float a_flag;\\nattribute vec3 a_normal;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_pitch;\\nuniform float u_heightFactor;\\nuniform vec4 u_roofColor;\\nuniform vec4 u_wallColor;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\nvarying vec4 v_roofColor;\\n// varying vec4 v_color;\\n// varying float v_height;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec3 pos = vec3(\\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\\n        a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\\n    );\\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\\n\\n    // v_color = a_color;\\n    // v_flag = a_flag;\\n    v_pos = gl_Position;\\n    // vec4(a_pos, 1);\\n    v_fragHeight = a_pos.z;\\n    v_fullHeight = a_pos.w;\\n    // v_height = pos.z / a_pos.w;\\n    v_normal = normalize(a_normal);\\n    // 1.4 拿过来的\\n    v_roofColor = u_roofColor;\\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\\n}\\n",fillExtPatternFragmentString="precision mediump float;\\n\\n// uniform vec4 u_roofColor;\\n// uniform vec4 u_wallColor;\\nuniform vec3 u_lightColor;\\nuniform vec3 u_lightDir;\\nuniform mat4 u_normalMatrix;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\nuniform vec2 u_skyBMRange;\\n\\n// pattern\\nuniform float u_resolution;\\nuniform sampler2D u_image;\\nuniform vec2 u_imageSize;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\n// varying vec4 v_color;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_roofColor;\\nvarying vec4 v_pos;\\nvarying vec3 v_coord;\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n    // 环境光\\n    vec3 ambientLightColor = vec3(1, 1, 1);\\n    float ambientStrength = 0.92;\\n    vec3 ambient = ambientStrength * ambientLightColor;\\n\\n    // 平行光的漫反射\\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\\n    vec3 lightDir = u_lightDir;\\n    vec3 lightColor = vec3(1, 1, 1);\\n    float lightStrength = 0.1;\\n    vec3 norm = normalize(v_normal);\\n    float nDotL = max(dot(lightDir, norm), 0.0);\\n    vec3 diff = lightStrength * lightColor * nDotL;\\n\\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\\n    float topOpacity = 1.0;\\n    if(v_fragHeight >= v_fullHeight) {\\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\\n    }\\n\\n    // 根据楼高判断颜色\\n    if(v_fragHeight >= v_fullHeight) {\\n        // vec2 v_texture_pos = mod(vec2(v_coord.x,v_coord.y*-1.0)/u_resolution/u_imageSize,1.0);\\n        // gl_FragColor = texture2D(u_image, v_texture_pos);\\n        gl_FragColor = v_roofColor;\\n    } else if(v_textureCoord.x<0.0){\\n        gl_FragColor = v_color;\\n      \\n    }else{\\n        vec2 v_texture_pos = v_textureCoord;\\n        gl_FragColor = texture2D(u_image, v_texture_pos);\\n        gl_FragColor.a *= v_color.a;\\n    }\\n\\n    gl_FragColor.rgb *= diff + ambient;\\n    gl_FragColor.a *= u_opacity * topOpacity;\\n\\n    // 雾化\\n    // float y = v_pos.y / v_pos.w;\\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\\n    if(u_skyHeight < 1.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        // gl_FragColor.a *= fogFactor;\\n\\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n",fillExtPatternVertextString="precision highp float;\\nattribute vec4 a_pos;\\n// attribute vec4 a_color;\\n// attribute float a_flag;\\nattribute vec3 a_normal;\\nattribute vec2 a_textureCoord;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_pitch;\\nuniform float u_heightFactor;\\nuniform vec4 u_roofColor;\\nuniform vec4 u_wallColor;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\nvarying vec4 v_roofColor;\\n// varying vec4 v_color;\\n// varying float v_height;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_pos;\\nvarying vec3 v_coord;\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n    vec3 pos = vec3(\\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\\n        a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\\n    );\\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\\n\\n    // v_color = a_color;\\n    // v_flag = a_flag;\\n    v_coord = pos;\\n    v_textureCoord = a_textureCoord;\\n    v_pos = gl_Position;\\n    // vec4(a_pos, 1);\\n    v_fragHeight = a_pos.z;\\n    v_fullHeight = a_pos.w;\\n    // v_height = pos.z / a_pos.w;\\n    v_normal = normalize(a_normal);\\n    // 1.4 拿过来的\\n    v_roofColor = u_roofColor;\\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\\n}\\n",Color=M.Color;function linearColor(t,n,i){var a=[0,0,0,1];return forEach(t.rgba,function(t,e){var r=n.rgba[e];a[e]=linearNumber(t,r,i)/255}),a}function linearNumber(t,e,r){return t+(e-t)*r}var Property=(fD.prototype.An=function(t,e,r,n,i){n=this.Tn(t,e,r,n);if(!n)return null;n=n[this.key];return n&&n.rgba?this.In(n.rgba):n},fD.prototype.In=function(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]/255]},fD.prototype.Dn=function(t,e,r,n,i){var a=Math.floor(n),o=Math.ceil(n),f=n-a<.8?a:o,s=this.Tn(t,e,r,a),u=this.Tn(t,e,r,o);if((s||f!==a)&&(s||u)&&(!s||u||f!==o)&&(s||!u||a!==f)){n=n-a;if(s||(n=(n-.8)/.2),n=Math.max(n,0),"const"===this.type)return this.Pn(t,e,r,f);if("linear"===this.type&&a===o)return this.Pn(t,e,r,a);if(!s&&u){o=u[this.key];if("number"!=typeof o)return(l=o.normalize())&&"line"!==this.sort&&(l[3]=l[3]*n),l;return linearNumber(0,o,n)}if(s&&!u)return this.Pn(t,e,r,a);s=s[this.key],u=u[this.key];if(s)return("number"==typeof s?linearNumber:linearColor)(s,u,n);if("number"==typeof u)return linearNumber(0,u,n);var l=u.normalize();return"line"!==this.sort&&(l[3]=l[3]*n),l}},fD.prototype.Pn=function(t,e,r,n){var i;switch(this.sort){case"line":i=this.jn(t,e,r,n);break;case"other":i=this.On(t,e,r,n);break;default:i=this.On(t,e,r,n)}return i},fD.prototype.Tn=function(t,e,r,n){var i;switch(this.sort){case"line":i=this.Fn(t,e,r,n);break;case"other":i=this.En(t,e,r,n);break;default:i=this.En(t,e,r,n)}return i},fD.prototype.Fn=function(t,e,r,n){n=t.dn(e,r,n);if(this.Nn(n))return n[0]},fD.prototype.En=function(t,e,r,n){n=t.dn(e,r,n);if(this.Nn(n))return n},fD.prototype.jn=function(t,e,r,n){var i,a=Math.floor(n),n=Math.ceil(n),a=t.dn(e,r,a);return a?(i=a[0][this.key])&&i.normalize?i.normalize():i:(i=t.dn(e,r,n)[0][this.key])&&i.normalize?i.normalize():i},fD.prototype.On=function(t,e,r,n){var i,a=Math.floor(n),n=Math.ceil(n),a=t.dn(e,r,a);return a?(i=a[this.key])instanceof Color?i.normalize():i:(i=t.dn(e,r,n)[this.key])instanceof Color?i.normalize():i},fD);function fD(t,e,r){void 0===r&&(r="other"),this.key=t,this.type=e,this.sort=r}var LineProperty=(sE=Property,__extends(tE,sE),tE.prototype.Nn=function(t){return t&&t[0].roadColor},tE),sE;function tE(t,e){var r=sE.call(this,t,e,"line")||this;return r.key=t,r.type=e,r}var LineBorderProperty=(yE=Property,__extends(zE,yE),zE.prototype.Nn=function(t){return t&&t[0].borderColor},zE),yE;function zE(t,e){var r=yE.call(this,t,e,"line")||this;return r.key=t,r.type=e,r}var FillProperty=(EE=Property,__extends(FE,EE),FE.prototype.Nn=function(t){return t&&t.faceColor},FE),EE;function FE(){return null!==EE&&EE.apply(this,arguments)||this}var BuildingProperty=(HE=Property,__extends(IE,HE),IE.prototype.Nn=function(t){return t&&t.faceColor},IE),HE;function IE(){return null!==HE&&HE.apply(this,arguments)||this}var BuildingBorderProperty=(KE=Property,__extends(LE,KE),LE.prototype.Nn=function(t){return t&&t.wallColor2},LE),KE;function LE(){return null!==KE&&KE.apply(this,arguments)||this}var fillExtUniforms={u_skyBMRange:"vec2",u_skyHeight:"float",u_viewHeight:"float",u_heightFactor:"float",u_roofColor:"vec4",u_wallColor:"vec4",u_lightDir:"vec3",u_opacity:"float",u_pitch:"float",u_offset:"vec2",u_matrix:"mat4",u_normalMatrix:"mat4",u_localDeltaCenter:"vec2"},fillExtAttributes={a_pos:{Me:"float32",Oe:"vec4"},a_normal:{Me:"float32",Oe:"vec3"}},fillExt={uniforms:fillExtUniforms,attributes:fillExtAttributes,vertexSource:fillExtVertextString,fragmentSource:fillExtFragmentString},getFillExtUniformValues=function(t,e,r,n,i,a,o){void 0===r&&(r=[0,0]);var f=t.$n.zoom,s=t.$n.pitch,u=t.$n.size[1],l=[16,22],c=1,h=1;if("AMap.Buildings"===n.layer.CLASS_NAME&&(l=n.zooms,c=n.opacity,h=n.heightFactor),!(l[0]>f||l[1]<f))return{u_skyBMRange:o,u_skyHeight:a,u_viewHeight:u,u_heightFactor:h,u_roofColor:i.roofColor,u_wallColor:i.wallColor,u_lightDir:calcSunX(t.$n.center),u_opacity:c,u_pitch:s,u_matrix:t.$n.mvpMatrix,u_offset:[0,0],u_normalMatrix:t.$n.HV,u_localDeltaCenter:r}};function calcSunX(t){var e=new Date,e=-15*(e.getHours()+e.getMinutes()/60)+300;return[Math.sin(t[0]-e),1,.75]}var fillExtPatternUniforms={u_skyBMRange:"vec2",u_skyHeight:"float",u_viewHeight:"float",u_heightFactor:"float",u_roofColor:"vec4",u_wallColor:"vec4",u_lightDir:"vec3",u_opacity:"float",u_pitch:"float",u_offset:"vec2",u_matrix:"mat4",u_normalMatrix:"mat4",u_localDeltaCenter:"vec2",u_image:"sampler2D",u_imageSize:"vec2",u_resolution:"float"},fillExtPatternAttributes={a_pos:{Me:"float32",Oe:"vec4"},a_normal:{Me:"float32",Oe:"vec3"},a_textureCoord:{Me:"uint16",Oe:"vec2"}},fillExtPattern={uniforms:fillExtPatternUniforms,attributes:fillExtPatternAttributes,vertexSource:fillExtPatternVertextString,fragmentSource:fillExtPatternFragmentString},fillExtProperties={texture:new BuildingProperty("texture","const")},getFillExtPatternUniformValues=function(t,e,r,n,i,a,o,f){void 0===r&&(r=[0,0]);var s="fast"===t.map.bZ.MZ.drawMode?t.$n.optimalZoom:t.$n.zoom,u=t.$n.pitch,l=t.$n.size[1],c=[16,22],h=1,v=1;if("AMap.Buildings"===n.layer.CLASS_NAME&&(c=n.zooms,h=n.opacity,v=n.heightFactor),!(c[0]>s||c[1]<s)){n=e.mainkey,c=e.subkey,e=e.minzoom,e=fillExtProperties.texture.An(f,n,c,s,e);if(e)return{u_skyBMRange:o,u_skyHeight:a,u_viewHeight:l,u_heightFactor:v,u_roofColor:i.roofColor,u_wallColor:i.wallColor,u_lightDir:calcSunX(t.$n.center),u_opacity:h,u_pitch:u,u_matrix:t.$n.mvpMatrix,u_offset:[0,0],u_normalMatrix:t.$n.HV,u_localDeltaCenter:r,u_image:e,u_imageSize:[1,1],u_resolution:t.$n.optimalResolution}}},find$1=M.lodash.find,map$1=M.lodash.map,TileState=M.TileState,vector$2=M.vector,BuildingRender=(vF=LayerRender,__extends(wF,vF),wF.prototype.renderFrame=function(t,e,r,n,i){if(e.s_&&i.map.mapStyle.vn){for(var a,o={},f=0,s=e.tiles;f<s.length;f++)(y=s[f]).status===TileState.LOADED&&(o[a=y.zo.z]||(o[a]=[]),o[a].push(y));var u=n.layer,l=u.uo.getSource(u.co()).ra(r.$n.optimalZoom),e=map$1(Object.keys(o),function(t){return parseInt(t,10)});e.sort(function(t,e){return t-e});u=e.indexOf(l);0<=u&&(e.splice(u,1),e.push(l)),n.ce&&t.context.clear({depth:!0});for(var c=0,h=e;c<h.length;c++){for(var v=o[h[c]],d=0,_=v;d<_.length;d++)(y=_[d]).status===TileState.LOADED&&this.S_(t,y,r,n,i,!0);for(var y,g=0,p=v;g<p.length;g++)(y=p[g]).status===TileState.LOADED&&this.S_(t,y,r,n,i)}}},wF.prototype.S_=function(t,e,r,n,i,a){void 0===a&&(a=!1);var o=e.data,f=r.map,s=r.$n,u=r.$n.size,l=f.getView(),c={roofColor:n.roofColor,wallColor:n.wallColor},h=f.getBuildingColor(),v=1;if("3D"===r.$n.viewMode){v=l.EF();for(var d=l.X(u[0]/2,l.Uu()+5),_=l.X(u[0]/2,l.Uu()-5),y=l.pz().getPosition(),u=d[0]-y[0],l=d[1]-y[1],d=_[0]-y[0],y=_[1]-y[1],g=[Math.sqrt(u*u+l*l),Math.sqrt(d*d+y*y)],p=0,m=o;p<m.length;p++){var b=m[p],x=b.A_;if(x){b=b.C_;x.upload(t.context,!0);var S=x.zs,M=find$1(r.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME}),C=void 0;M&&(C=M.yD().show);for(var A=0,k=b.jc;A<k.length;A++){var w=k[A],T=f.mapStyle.vn.dn(w.mainkey,w.subkey,s.zoom),$={};if($.roofColor=w.roofColor||c.roofColor||h.roofColor||T&&T.faceColor&&vector$2.Up(T.faceColor.rgba,255),$.wallColor=w.wallColor||c.wallColor||h.wallColor||T&&T.faceColor&&vector$2.Up(T.borderColor.rgba,255),!$.wallColor||!$.roofColor)return;var I,T=fillExtProperties.texture.An(i.map.mapStyle,w.mainkey,w.subkey,r.$n.zoom,w.minzoom);M&&w.bz&&C||(T?(I=getFillExtPatternUniformValues(r,w,e.Sa,n,$,v,g,i.map.mapStyle))&&((T=i.map.getImage(I.u_image))?(I.u_image=T,I.u_imageSize=T.size,t.sH().Ce(I,{a_pos:{type:"vec4",Re:S.size,offset:0,buffer:S},a_normal:{type:"vec3",Re:S.size,offset:16,buffer:S},a_textureCoord:{type:"vec2",Re:S.size,offset:28,buffer:S}},w.length,void 0,"TRIANGLES",n.depthTest,a?ColorMode.disabled:ColorMode.Si,void 0,CullFaceMode.back,w.offset)):I.u_image&&i.map.I_&&!i.map.I_.MH(I.u_image)&&i.map.GV(I.u_image,{url:I.u_image,filter:"LINEAR",wrap:"REPEAT",cb:function(){return i.map.setNeedUpdate(!0)}})):(I=getFillExtUniformValues(r,w,e.Sa,n,$,v,g))&&t.k_().Ce(I,{a_pos:{type:"vec4",Re:S.size,offset:0,buffer:S},a_normal:{type:"vec3",Re:S.size,offset:16,buffer:S}},w.length,void 0,"TRIANGLES",n.depthTest,a?ColorMode.disabled:ColorMode.Si,void 0,CullFaceMode.back,w.offset))}}}}},wF),vF;function wF(){return vF.call(this)||this}var isSupportFloat32Array="undefined"!=typeof Float32Array;isSupportFloat32Array||(window.Float32Array=void 0,setMatrixArrayType(Array));var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;function setMatrixArrayType(t){ARRAY_TYPE=t}function equals(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],f=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],v=t[11],d=t[12],_=t[13],y=t[14],g=t[15],p=e[0],m=e[1],b=e[2],x=e[3],S=e[4],M=e[5],C=e[6],A=e[7],k=e[8],w=e[9],T=e[10],$=e[11],I=e[12],L=e[13],t=e[14],e=e[15];return Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(n-m)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(i-b)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-x)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-S)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(f-M)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(s-C)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(u-A)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(l-k)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(c-w)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(h-T)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(v-$)<=EPSILON*Math.max(1,Math.abs(v),Math.abs($))&&Math.abs(d-I)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(_-L)<=EPSILON*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(y-t)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(t))&&Math.abs(g-e)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(e))}function create(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function set(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function subtract(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var forEach$1=(EH=create(),function(t,e,r,n,i,a){var o,f;for(e=e||3,r=r||0,f=n?Math.min(n*e+r,t.length):t.length,o=r;o<f;o+=e)EH[0]=t[o],EH[1]=t[o+1],EH[2]=t[o+2],i(EH,EH,a),t[o]=EH[0],t[o+1]=EH[1],t[o+2]=EH[2];return t}),EH,isSupportFloat64Array="undefined"!=typeof Float64Array,isSupportFloat32Array$1="undefined"!=typeof Float32Array;isSupportFloat64Array?setMatrixArrayType(Float64Array):isSupportFloat32Array$1?setMatrixArrayType(Float32Array):(window.Float32Array=void 0,setMatrixArrayType(Array));var DomUtil=AMap.DomUtil,CustomRender=(NH=LayerRender,__extends(OH,NH),OH.prototype.renderFrame=function(t,e,r,n){var i,a;!n.JD&&this.OF&&this.EI&&this.BF&&this.NF&&(equals(this.NF,r.$n.mvpMatrix)||r.map.TL())?(a=Math.pow(2,r.$n.zoom-this.EI),subtract(this.VM,r.$n.centerCoord,this.OF),set(this.VM,-(this.VM[0]/this.BF)*a,this.VM[1]/this.BF*a,0),1!==a&&(n.kv.style[DomUtil.kL]="scale3d("+a+","+a+",1)"),n.kv.style.top=this.VM[1]+"px",n.kv.style.left=this.VM[0]+"px"):(i=n.layer,copy(this.OF,r.$n.centerCoord),this.EI=r.$n.zoom,this.NF=r.$n.mvpMatrix,this.BF=r.$n.resolution,i.render&&(a=i.getLayerConfig().zooms,r.$n.zoom>=a[0]&&r.$n.zoom<=a[1]?(i.canvas.style.visibility="visible",i.render()):i&&i.canvas&&i.canvas&&(i.canvas.style.visibility="hidden")),n.kv.style[DomUtil.kL]="",n.kv.style.top="",n.kv.style.left="",n.kv.style.height="",n.kv.style.visibility="")},OH),NH;function OH(){var t=NH.call(this)||this;return t.type="customLayer",t.OF=create(),t.VM=create(),t}var GLCustomRender=(XH=LayerRender,__extends(YH,XH),YH.prototype.renderFrame=function(t,e,r,n){var i,a;t&&(a=(i=t.context).gl,t=n.layer,this.kC&&(this.kC=!1,t.init(a)),t.render&&(n=t.getLayerConfig().zooms,r.$n.zoom>=n[0]&&r.$n.zoom<=n[1]&&(t.render(a,r,r.$n,i),i.setDirty())))},YH),XH;function YH(){var t=XH.call(this)||this;return t.kC=!0,t}var ImageRender=(gI=LayerRender,__extends(hI,gI),hI.prototype.renderFrame=function(t,e,r,n){t.context;var i,a,o=t.Gn(),f=n.layer.getLayerConfig().zooms;r.$n.zoom<f[0]||r.$n.zoom>f[1]||(i=r.$n,a=r.map,f=1,"3D"===i.viewMode&&(f=a.getView().EF()),a=a.JF(r.$n.optimalZoom)||[1,1,1,0],n.ce&&t.context.clear({depth:!0}),o.Ce({u_skyColor:a,u_skyHeight:f,u_viewHeight:i.size[1],u_opacity:n.opacity,u_texture:e.texture,u_mvpMatrix:i.mvpMatrix,u_localDeltaCenter:e.Sa},{a_Position:{type:"vec4",buffer:e.zs,Re:0,offset:0}},6,void 0,void 0,n.depthTest,ColorMode.Si,n.rejectMapMask||!r.map.getMask()?void 0:StencilMode.writeWithStencil))},hI),gI;function hI(){return gI.call(this)||this}var LocalZoom=13,Support$3=M.Support,lcs$2=M.geo.lcs,MaskLayerRender=(vI=LayerRender,__extends(wI,vI),wI.prototype.EH=function(t,e){var r=e.map.coordToContainer([t[0],t[1]]),n=Math.round(r[0]),i=Math.round(r[1]),t=e.size[0],r=e.size[1],e=4*((r-i)*t+n)+3;return!(n<0||i<0||t<=n||r<=i)&&!!this.SC[e]},wI.prototype.renderFrame=function(t,e,r,n,i,a){var o=t.aS(),f=r.$n,s=f.centerCoord,u=o.context,t=[0,0];t=r.$n.optimalZoom<LocalZoom?e.LS.center:(s=lcs$2.getLocalByCoord([s[0],s[1]]).center,[e.LS.center[0]-s[0],e.LS.center[1]-s[1]]),e.Dc.upload(o.context,!0);t={data:e,$i:o,$n:f,Sa:t};this.RC(u,r,t),this.zC(u,t)},wI.prototype.zC=function(t,e){t.gl;for(var r=e.data.Dc.zs,n=e.data.Dc.Pc,i=e.data.Oc.jc,a=0,o=i.length;a<o;a++){var f=i[a];e.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:e.Sa,u_mvpMatrix:e.$n.mvpMatrix},{a_pos:{type:"vec2",buffer:r,Re:r.size,offset:0}},f.length,n,"TRIANGLES",void 0,ColorMode.zi,StencilMode.Ai,void 0,f.offset)}},wI.prototype.RC=function(t,e,r){var n=t.gl,i=e.size[0],t=e.size[1];this.CC||(this.CC=this.IC(n,e)),n.bindFramebuffer(n.FRAMEBUFFER,this.CC),n.viewport(0,0,i,t),n.clear(n.COLOR_BUFFER_BIT);for(var a=r.data.Dc.zs,o=r.data.Dc.Pc,f=r.data.Oc.jc,s=0,u=f.length;s<u;s++){var l=f[s];r.$i.Ce({u_color:[1,0,0,1],u_deltaCenter:r.Sa,u_mvpMatrix:r.$n.mvpMatrix},{a_pos:{type:"vec2",buffer:a,Re:a.size,offset:0}},l.length,o,"TRIANGLES",void 0,ColorMode.zi,void 0,l.offset)}e=i*t*4;this.SC&&e===this.SC.length||(this.SC=new Uint8Array(e)),n.readPixels(0,0,i,t,n.RGBA,n.UNSIGNED_BYTE,this.SC),n.bindFramebuffer(n.FRAMEBUFFER,null);e=Support$3.Ue?2:1;n.viewport(0,0,i*e,t*e)},wI.prototype.IC=function(t,e){var r=t.createFramebuffer(),n=e.size[0],i=e.size[1],e=t.createRenderbuffer();(r.AC=e).w=n,e.h=i,t.bindRenderbuffer(t.RENDERBUFFER,e),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n,i),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,e);e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(t.FRAMEBUFFER_COMPLETE===e)return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),r;console.log("Frame buffer object is incomplete: "+e.toString())},wI),vI;function wI(){var t=vI.call(this)||this;return t.SC=new Uint8Array(0),t}var lineFragmentString="precision highp float;\\n\\nuniform vec4 u_color;\\n// uniform float u_opacity;\\nuniform vec4 u_dash;\\nuniform float u_border;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\n\\nvarying highp float v_distance;\\nvarying vec2 v_normal;\\nvarying float v_width;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    float offset = mod(v_distance, u_dash.r + u_dash.g + u_dash.b + u_dash.a);\\n    if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n        discard;\\n    }else if(offset> u_dash.r + u_dash.g + u_dash.b){\\n        discard;\\n    }\\n\\n    float startBlur = 0.0;\\n    float endBlur = 1.0;\\n    // float dist = length(v_normal) * 0.8;\\n\\n    // if(v_width < 4.0 && u_border == 1.0) {\\n    //     startBlur = 0.0;\\n    // } else {\\n    //     // 线主体\\n    //     if(v_width < 4.0 && u_border == 0.0) {\\n    //         startBlur = 0.0;\\n    //     } else {\\n    //         startBlur = 0.4;\\n    //     }\\n    // }\\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\\n\\n    // startBlur = 0.0;\\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\\n    gl_FragColor = u_color;\\n    // gl_FragColor.a *= opacity;\\n\\n    // gl_FragColor = vec4(1, 0, 0, 1);\\n\\n\\n    // 雾化\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n",lineVertextString="precision highp float;\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform float u_width;\\n\\nvarying float v_distance;\\nvarying vec2 v_normal;\\nvarying float v_width;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n    float width = u_width + 0.0;\\n    float cosValue = dot(a_normal , a_dir);\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width * 0.5);\\n\\n    vec2 pos=a_pos;\\n    pos.x+=u_localDeltaCenter.x;\\n    pos.y+=u_localDeltaCenter.y;\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_normal = normalize(a_normal*sign(width*u_meter_per_pixel*.5));\\n    v_width = width;\\n    v_pos = gl_Position;\\n}",lineUniforms={u_skyHeight:"float",u_viewHeight:"float",u_width:"float",u_border:"float",u_matrix:"mat4",u_meter_per_pixel:"float",u_color:"vec4",u_dash:"vec4",u_localDeltaCenter:"vec2"},lineAttributes={a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},linePropertys={roadColor:new LineProperty("roadColor","linear"),roadWidth:new LineProperty("roadWidth","linear"),roadDash:new LineProperty("roadDash","const"),borderColor:new LineBorderProperty("borderColor","linear"),borderWidth:new LineBorderProperty("borderWidth","linear"),borderDash:new LineBorderProperty("borderDash","const")},line={uniforms:lineUniforms,attributes:lineAttributes,vertexSource:lineVertextString,fragmentSource:lineFragmentString},getLineUniformValues=function(t,e,r,n,i,a){void 0===n&&(n=[0,0]);var o=e.minzoom,f=e.maxzoom,s=t.$n.zoom;if(!(s<o-.2&&3<o||f+.8<s&&f<18)){e.mainkey,e.subkey;return(r?getLineBorderUniformValues:getLineFaceUniformValues)(t,e,n,i,a)}};function getLineBorderUniformValues(t,e,r,n,i){void 0===r&&(r=[0,0]);var a="fast"===t.map.bZ.MZ.drawMode?t.$n.optimalZoom:t.$n.zoom,o=e.mainkey,f=e.subkey,s=e.minzoom,u=linePropertys.borderColor.An(n,o,f,a,s);if(u){e=linePropertys.roadWidth.An(n,o,f,a,s)+linePropertys.borderWidth.An(n,o,f,a,s),s=linePropertys.borderDash.An(n,o,f,a,s)||[1,0,1,0];return{u_skyHeight:i,u_matrix:t.$n.mvpMatrix,u_meter_per_pixel:t.$n.resolution,u_width:e,u_border:1,u_color:u,u_dash:s,u_localDeltaCenter:r,u_viewHeight:t.size[1]}}}function getLineFaceUniformValues(t,e,r,n,i){void 0===r&&(r=[0,0]);var a="fast"===t.map.bZ.MZ.drawMode?t.$n.optimalZoom:t.$n.zoom,o=e.mainkey,f=e.subkey,s=e.minzoom,u=(e.maxzoom,linePropertys.roadColor.An(n,o,f,a,s));if(f<0&&o<0&&(u=[1,0,0,t.debug?1:0]),u){e=linePropertys.roadWidth.An(n,o,f,a,s),s=linePropertys.roadDash.An(n,o,f,a,s)||[1,0,1,0];return{u_matrix:t.$n.mvpMatrix,u_meter_per_pixel:t.$n.resolution,u_width:e,u_color:u,u_dash:s,u_border:0,u_localDeltaCenter:r,u_viewHeight:t.size[1],u_skyHeight:i}}}var fillFragmentString="precision highp float;\\nuniform vec4 u_color;\\n// uniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform vec3 u_skyColor;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    gl_FragColor = u_color;\\n    // gl_FragColor = v_color;\\n    // gl_FragColor = vec4(0,0,1.0,1.0);\\n    // return;\\n\\n    // 雾化\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\\n",fillVertextString="precision highp float;\\nattribute vec2 a_pos;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    v_pos = gl_Position;\\n}\\n",fillPatternFragmentString="precision highp float;\\n#define GLSLIFY 1\\nuniform vec4 u_color;\\nuniform sampler2D u_image;\\n// uniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform float u_resolution;\\nuniform vec2 u_imageSize;\\nvarying vec4 v_pos;\\nvarying vec2 v_coord;\\n// varying vec2 v_texture_pos;\\n\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    vec2 v_texture_pos = mod(vec2(v_coord.x,v_coord.y*-1.0)/u_resolution/u_imageSize,1.0);\\n    gl_FragColor = texture2D(u_image, v_texture_pos);\\n    // gl_FragColor = vec4(1.0,0,0,1.0);\\n   \\n    float y = v_pos.y / v_pos.w;\\n    if(u_skyHeight > 0.0 && y > u_skyHeight) {\\n        gl_FragColor.a = 1.0 - smoothstep(u_skyHeight, 1.0, y);\\n    }\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n",fillPatternVertextString="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform float u_resolution;\\nuniform vec2 u_offset;\\nvarying vec4 v_pos;\\nvarying vec2 v_coord;\\n\\n// varying vec2 v_texture_pos;\\nvoid main(){\\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    v_pos = gl_Position;\\n    v_coord = pos;\\n}\\n",fillUniforms={u_skyColor:"vec3",u_color:"vec4",u_skyHeight:"float",u_viewHeight:"float",u_offset:"vec2",u_matrix:"mat4",u_localDeltaCenter:"vec2"},fillAttributes={a_pos:{Me:"float32",Oe:"vec2"}},fill={uniforms:fillUniforms,attributes:fillAttributes,vertexSource:fillVertextString,fragmentSource:fillFragmentString},fillProperties={faceColor:new FillProperty("faceColor","linear"),borderWidth:new FillProperty("borderWidth","linear"),borderColor:new FillProperty("borderColor","linear"),texture:new FillProperty("texture","const")},getFillUniformValues=function(t,e,r,n,i){void 0===r&&(r=[0,0]),void 0===i&&(i=1);var a="fast"===t.map.bZ.MZ.drawMode?t.$n.optimalZoom:t.$n.zoom;if(!(e.minzoom-.2>t.$n.zoom&&3<e.minzoom)){var o=e.mainkey,f=e.subkey,s=e.minzoom,u=fillProperties.faceColor.An(n,o,f,a,s),e=t.map.JF(t.$n.optimalZoom);if(u)return{u_matrix:t.$n.mvpMatrix,u_color:u,u_offset:[0,0],u_skyHeight:i,u_viewHeight:t.$n.size[1],u_skyColor:e||[1,1,1,0],u_image:fillProperties.texture.An(n,o,f,a,s),u_imageSize:[1,1],u_localDeltaCenter:r,u_resolution:t.$n.optimalResolution}}},getFillPatternUniformValues=function(t,e,r,n,i){void 0===r&&(r=[0,0]),void 0===i&&(i=1);var a=t.$n.zoom;if(!(e.minzoom-.2>t.$n.zoom&&3<e.minzoom)){var o=e.mainkey,f=e.subkey,s=e.minzoom,u=fillProperties.faceColor.An(n,o,f,a,s),e=t.map.JF(t.$n.optimalZoom);if(u)return{u_matrix:t.$n.mvpMatrix,u_color:u,u_offset:[0,0],u_skyHeight:i,u_viewHeight:t.$n.size[1],u_skyColor:e||[1,1,1,0],u_image:fillProperties.texture.An(n,o,f,a,s),u_imageSize:[1,1],u_localDeltaCenter:r,u_resolution:t.$n.optimalResolution}}},fillPatternUniforms={u_color:"vec4",u_skyColor:"vec4",u_viewHeight:"float",u_skyHeight:"float",u_offset:"vec2",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_image:"sampler2D",u_resolution:"float",u_imageSize:"vec2"},fillPatternAttributes={a_pos:{Me:"float32",Oe:"vec2"}},fillPattern={uniforms:fillPatternUniforms,attributes:fillPatternAttributes,vertexSource:fillPatternVertextString,fragmentSource:fillPatternFragmentString};function drawFillPattern(t,e,r,n,i,a,o,f,s,u,l){void 0===a&&(a="TRIANGLES"),void 0===o&&(o=!1),void 0===f&&(f=ColorMode.Mi),void 0===s&&(s=StencilMode.disable),void 0===u&&(u=CullFaceMode.we),void 0===l&&(l=0),t.aH().Ce(e,r,n,i,a,o,f,s,u,l)}var lineFragmentString$1="precision mediump float;\\nuniform vec4 u_color;\\nvarying vec2 v_pos;\\n// uniform float u_opacity;\\n\\nvoid main(){\\n    // float dist=length(v_pos-gl_FragCoord.xy);\\n    // float alpha=1.-smoothstep(0.,1.,dist);\\n    gl_FragColor=u_color;\\n    // gl_FragColor=vec4(0.8, 0.8, 0.8, 0.5);\\n\\n    #ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor=vec4(1.);\\n    #endif\\n}\\n",lineVertextString$1="precision highp float;\\nattribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nvarying vec2 v_pos;\\n\\nvoid main(){\\n    vec2 pos=vec2(a_pos.x+u_localDeltaCenter.x,a_pos.y+u_localDeltaCenter.y);\\n    gl_Position=u_matrix*vec4(pos,0,1);\\n    v_pos=(gl_Position.xy/gl_Position.w+1.)/2.*vec2(1583.*1.,946.*1.);\\n}\\n",fillOutlineUniforms={u_color:"vec4",u_normal:"vec3",u_matrix:"mat4",u_localDeltaCenter:"vec2"},fillOutlineAttributes={a_pos:{Oe:"vec2",Me:"float32"}},fillOutline={uniforms:fillOutlineUniforms,attributes:fillOutlineAttributes,vertexSource:lineVertextString$1,fragmentSource:lineFragmentString$1},fillOutlineProperties={faceColor:new BuildingProperty("faceColor","linear"),borderWidth:new BuildingBorderProperty("borderWidth","const"),borderColor:new BuildingBorderProperty("borderColor","linear"),wallColor1:new BuildingProperty("wallColor1","linear"),wallColor2:new BuildingProperty("wallColor2","linear")},getFillOutlineUniformValues=function(t,e,r,n){var i="fast"===t.map.bZ.MZ.drawMode?t.$n.optimalZoom:t.$n.zoom;if(!(e.minzoom-.5>t.$n.zoom&&3<e.minzoom)){var a=e.mainkey,o=e.subkey,e=e.minzoom,e=fillOutlineProperties.borderColor.An(n,a,o,i,e);if(e)return{u_color:e,u_normal:[0,0,-.1],u_matrix:t.$n.mvpMatrix,u_localDeltaCenter:r}}},Tile=M.Tile,lcs$3=M.geo.lcs,find$2=M.lodash.find,map$2=M.lodash.map,Browser=M.Support;function recordOnce(t,e){Browser.amapRunTime[t]||(Browser.amapRunTime[t]=e)}var NebulaRender=($K=LayerRender,__extends(_K,$K),_K.prototype.renderFrame=function(t,e,r,n,i){if(i.map.mapStyle.vn){this.kG=n.rejectMapMask||!r.map.getMask()?void 0:StencilMode.writeWithStencil;var a=r.map.getOutseaState();r.map.getOutseaDataType();a&&9.8<=r.$n.optimalZoom&&(this.kG=StencilMode.nbStencil,(d=e&&e.outseaData)&&(e.tiles&&0<e.tiles.length&&recordOnce("_drawOutsea-begin",Date.now()),this.wG(t,r,n,i,d),e.tiles&&0<e.tiles.length&&recordOnce("_drawOutsea-end",Date.now())));for(var o=e.tiles,f={},s=0,u=o;s<u.length;s++){var l,c=u[s];Tile.YH(c)&&(f[l=c.zo.z]||(f[l]=[]),f[l].push(c))}var h=n.layer,v=r.map.getStatus().features,a=h.uo.getSource(h.co()).ra(r.$n.optimalZoom),d=map$2(Object.keys(f),function(t){return parseInt(t,10)});d.sort(function(t,e){return t-e});h=d.indexOf(a);0<=h&&(d.splice(h,1),d.push(a)),"3D"===r.$n.viewMode&&(this.yz=r.map.getView().EF()),e.tiles&&0<e.tiles.length&&recordOnce("_drawFillRoad-begin",Date.now());for(var _=0,y=d;_<y.length;_++){var g=f[y[_]];if(!v||-1!==v.indexOf("bg"))for(var p=0,m=g;p<m.length;p++){c=m[p];Tile.YH(c)&&this.Lc(t,c,r,n,i)}if(!v||-1!==v.indexOf("building"))for(var b=0,x=g;b<x.length;b++){c=x[b];Tile.YH(c)&&this.PD(t,c,r,n,i)}if(!v||-1!==v.indexOf("building"))for(var S=0,M=g;S<M.length;S++){c=M[S];Tile.YH(c)&&this.Ac(t,c,r,n,i)}if(!v||-1!==v.indexOf("road"))for(var C=0,A=g;C<A.length;C++){c=A[C];Tile.YH(c)&&this.Tc(t,c,r,n,i)}if(!v||-1!==v.indexOf("road"))for(var k=0,w=g;k<w.length;k++){c=w[k];Tile.YH(c)&&this.Ic(t,c,r,n,i)}}e.tiles&&0<e.tiles.length&&recordOnce("_drawFillRoad-end",Date.now()),e.tiles&&0<e.tiles.length&&i.map.bZ.dynamic.set("firstPaint",!0),window.testTime&&!window.testTime.renderTime&&o&&0<o.length&&(o=(new Date).getTime(),window.testTime.renderTime=o-window.testTime.start,console.log("nebulaComplete",window.testTime.renderTime))}},_K.prototype.destroy=function(){},_K.prototype.wG=function(t,e,r,n,i){var a,o,f,s;i&&i.LS&&(o=(a=t.aS()).context,t=(f=e.$n).centerCoord,s={outseaData:i,$i:a,$n:f,Sa:e.$n.optimalZoom<LocalZoom?i.LS.center:(s=lcs$3.getLocalByCoord([t[0],t[1]]).center,[i.LS.center[0]-s[0],i.LS.center[1]-s[1]])},this.zC(o,s))},_K.prototype.zC=function(t,e){e.outseaData.Dc.upload(t,!0);for(var r=e.outseaData.Dc.zs,n=e.outseaData.Dc.Pc,i=e.outseaData.Oc.jc,a=0,o=i.length;a<o;a++){var f=i[a];e.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:e.Sa,u_mvpMatrix:e.$n.mvpMatrix},{a_pos:{type:"vec2",buffer:r,Re:r.size,offset:0}},f.length,n,"TRIANGLES",void 0,ColorMode.zi,StencilMode.outseaStencil,void 0,f.offset)}},_K.prototype.Lc=function(t,e,r,n,i){for(var a=t.Wn(),o=!0,f=0,s=e.data;f<s.length;f++){var u=s[f],l=u.Dc;if(l){l.upload(a.context,!0);for(var c=l.zs,h=l.Pc,v=u.Oc,u=o?0:1,o=!1,d={a_pos:{type:"vec2",Re:c.size,offset:0,buffer:c}},_=u,y=v.jc.length;_<y;_++){var g,p,m=v.jc[_];fillProperties.texture.An(i.map.mapStyle,m.mainkey,m.subkey,r.$n.optimalZoom,m.minzoom)?(p=getFillPatternUniformValues(r,m,e.Sa,i.map.mapStyle,this.yz))&&((g=i.map.getImage(p.u_image))&&p.u_image?(p.u_image=g,p.u_imageSize=g.size,drawFillPattern(t,p,d,m.length,h,"TRIANGLES",!1,ColorMode.Si,this.kG,void 0,m.offset)):p.u_image&&i.map.I_&&!i.map.I_.MH(p.u_image)&&i.map.I_.GV(p.u_image,{url:p.u_image,filter:"LINEAR",wrap:"REPEAT",cb:function(){return i.map.setNeedUpdate(!0)}})):(p=getFillUniformValues(r,m,e.Sa,i.map.mapStyle,this.yz))&&a.Ce(p,d,m.length,h,"TRIANGLES",!1,ColorMode.Si,this.kG,void 0,m.offset)}}}},_K.prototype.PD=function(t,e,r,n,i){var a,o=t.Wn(),t=e.data,f=find$2(r.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME});f&&(a=f.yD().show);for(var s=!0,u=0,l=t;u<l.length;u++){var c=l[u],h=c.FD;if(h){h.upload(o.context,!0);var v=h.zs,d=h.Pc,_=c.BD;if(_)for(var c=s?0:1,s=!1,y={a_pos:{type:"vec2",Re:v.size,offset:0,buffer:v}},g=c,p=_.jc.length;g<p;g++){var m,b=_.jc[g];f&&b.bz&&"indoor_out_building"!==b.bz&&a||(m=getFillUniformValues(r,b,e.Sa,i.map.mapStyle,this.yz))&&o.Ce(m,y,b.length,d,"TRIANGLES",!1,ColorMode.Si,this.kG,void 0,b.offset)}}}},_K.prototype.Ac=function(t,e,r,n,i){var a,o=t.Yn(),t=e.data,f=find$2(r.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME});f&&(a=f.yD().show);for(var s=0,u=t;s<u.length;s++){var l=u[s],c=l.Dc;if(c){c.upload(o.context,!0);for(var h=l.Fc,l=c.Ec,v=c.Nc,d={a_pos:{type:"vec2",Re:0,offset:0,buffer:l}},_=0,y=h.jc.length;_<y;_++){var g=h.jc[_],p=getFillOutlineUniformValues(r,g,e.Sa,i.map.mapStyle);f&&g.bz&&"indoor_out_building"!==g.bz&&a||p&&o.Ce(p,d,g.length,v,"LINES",!1,ColorMode.Si,this.kG,void 0,g.offset)}}}},_K.prototype.Ic=function(t,e,r,n,i){var a=t.Vn();if(e.data)for(var o=0,f=e.data;o<f.length;o++){var s=f[o],u=s.$c;if(u){a.context.getExtension("OES_element_index_uint"),u.upload(a.context,!0);for(var u=s.$c.zs.buffer,l=s.$c.Pc.buffer,c=s.Uc.jc,s=u.size,h={a_pos:{type:"vec2",buffer:u,Re:s,offset:0},a_normal:{type:"vec2",buffer:u,Re:s,offset:8},a_distance:{type:"float",buffer:u,Re:s,offset:16},a_dir:{type:"vec2",buffer:u,Re:s,offset:20}},v=0,d=c.length;v<d;v++){var _=c[v],y=getLineUniformValues(r,_,!1,e.Sa,i.map.mapStyle,this.yz);-2===_.mainkey&&i.map.debug&&(y={u_matrix:r.$n.mvpMatrix,u_meter_per_pixel:r.$n.resolution,u_width:2,u_color:[1,0,0,1],u_dash:0,u_border:0,u_localDeltaCenter:e.Sa,u_skyHeight:1,u_viewHeight:1}),y&&y&&a.Ce(y,h,_.length,l,"TRIANGLES",!1,ColorMode.Si,this.kG,void 0,_.offset)}}}else assert(e.data,"tile have no data")},_K.prototype.Tc=function(t,e,r,n,i){var a=t.Vn();if(e.data)for(var o=0,f=e.data;o<f.length;o++){var s=f[o],u=s.$c;if(u){a.context.getExtension("OES_element_index_uint"),u.upload(a.context,!0);for(var u=s.$c.zs.buffer,l=s.$c.Pc.buffer,c=s.Uc.jc,s=u.size,h={a_pos:{type:"vec2",buffer:u,Re:s,offset:0},a_normal:{type:"vec2",buffer:u,Re:s,offset:8},a_distance:{type:"float",buffer:u,Re:s,offset:16},a_dir:{type:"vec2",buffer:u,Re:s,offset:20}},v=0,d=c.length;v<d;v++){var _=c[v],y=getLineUniformValues(r,_,!0,e.Sa,i.map.mapStyle,this.yz);y&&a.Ce(y,h,_.length,l,"TRIANGLES",!1,ColorMode.Si,this.kG,void 0,_.offset)}}}else assert(e.data,"tile have no data")},_K),$K;function _K(){var t=$K.call(this)||this;return t.yz=1,t}var TileState$1=M.TileState,RasterLayerRender=(lO=LayerRender,__extends(mO,lO),mO.prototype.renderFrame=function(t,e,r,n,i,a){if(i.map.mapStyle.vn){var o=r.$n,f=a.getLayerConfig(),a=f.zooms;o.size,o.pitch,o.optimalZoom;if(!(o.optimalZoom<a[0]||o.optimalZoom>a[1])){var s=t.Gn(),u=r.map.JF(r.$n.optimalZoom)||[1,1,1,0],l=e.tiles,c=1;"3D"===r.$n.viewMode&&(c=r.map.getView().EF()),n.ce&&t.context.clear({depth:!0});for(var h=0,v=l.length;h<v;h+=1){for(var d=l[h],_=0,y=d.length;_<y;_+=1)(g=d[_]).status===TileState$1.LOADED&&s.Ce({u_skyColor:u,u_viewHeight:o.size[1],u_skyHeight:c,u_opacity:f.opacity||1,u_texture:g.data.texture,u_mvpMatrix:o.mvpMatrix,u_localDeltaCenter:g.data.Sa},{a_Position:{type:"vec4",buffer:g.data.zs,Re:0,offset:0}},6,void 0,void 0,n.depthTest,ColorMode.Si,n.rejectMapMask||!r.map.getMask()?void 0:StencilMode.writeWithStencil);for(var g,_=0,y=d.length;_<y;_+=1)(g=d[_]).status===TileState$1.LOADED&&r.debug&&s.Ce({u_skyColor:u,u_viewHeight:o.size[1],u_skyHeight:c,u_opacity:f.opacity||1,u_texture:g.data.Js,u_mvpMatrix:o.mvpMatrix,u_localDeltaCenter:g.data.Sa},{a_Position:{type:"vec4",buffer:g.data.zs,Re:0,offset:0}},6,void 0,"TRIANGLES",void 0,void 0,void 0)}}}},mO),lO;function mO(){return lO.call(this)||this}var Util$3=AMap.Util,PolygonWebglRender=(MO.prototype.render=function(t,e,r){t._map&&(this.Wx(t,e,r),this.Gx(t,e,r))},MO.prototype.qx=function(t,e,r){var n=t.rY(e),i=t._opts;if(i.fillColor&&(a="function"==typeof i.fillColor?Util$3.color2RgbaArray(i.fillColor(r)):Util$3.color2RgbaArray(i.fillColor))){var a=a.slice(0,3),i="function"==typeof i.fillOpacity?i.fillOpacity(r):i.fillOpacity;return a.push(i),{u_offset:t.zx,u_color:a,u_matrix:e.$n.mvpMatrix,u_localDeltaCenter:n,u_skyHeight:e.$n.skyHeight,u_viewHeight:e.$n.size[1]}}},MO.prototype.Vx=function(t,e,r){var n=t.rY(e),i=t._opts;if(i.strokeColor){var a="function"==typeof i.strokeColor?Util$3.color2RgbaArray(i.strokeColor(r)):Util$3.color2RgbaArray(i.strokeColor);if(a){(a=a.slice(0,3)).push(i.strokeOpacity);r=this.Xx(t);return{u_color:a,u_matrix:e.$n.mvpMatrix,u_localDeltaCenter:n,u_width:i.strokeWeight,u_offset:t.zx,u_meter_per_pixel:e.$n.resolution,u_dash:r.dash,u_dashType:r.Jx,u_border:!1,u_skyHeight:e.$n.skyHeight,u_viewHeight:e.$n.size[1]}}}},MO.prototype.Wx=function(t,e,r){if(t.Dx){var n=t.Dx,i=t.XB;if(n.upload(r.context),n.uploaded&&n.zs&&t.visible){var a=n.zs,o=r.Wn();o.context.getExtension("OES_element_index_uint");for(var f=0,s=i.jc.length;f<s;f++){var u,l=this.qx(t,e,f);l&&(u=i.jc[f],o.Ce(l,{a_pos:{buffer:a,type:"vec2",Re:a.size,offset:0}},u.length,n.Pc,void 0,void 0,ColorMode.Si,void 0,void 0,u.offset))}}}},MO.prototype.Gx=function(t,e,r){if(t.Px){var n=t.Px,i=t.qB;if(n.upload(r.context),n.uploaded||n.zs){var a=n.zs.buffer;if(t.visible){var o=r.Xn();o.context.getExtension("OES_element_index_uint");for(var f=0,s=i.jc.length;f<s;f++){var u,l=this.Vx(t,e,f);l&&(u=i.jc[f],o.Ce(l,{a_pos:{buffer:a,type:"vec2",Re:a.size,offset:0},a_normal:{type:"vec2",buffer:a,Re:a.size,offset:8},a_distance:{type:"float",buffer:a,Re:a.size,offset:16},a_dir:{type:"vec2",buffer:a,Re:a.size,offset:20}},u.length,n.Pc.buffer,void 0,void 0,ColorMode.Si,void 0,void 0,u.offset))}}}}},MO.prototype.Xx=function(t){var e=t._opts,r=2,t=[1,0,0];return"dashed"===e.strokeStyle&&e.strokeDasharray&&(t=3<=e.strokeDasharray.length?(r=3,e.strokeDasharray.slice(0,3)):(r=2,__spreadArrays(e.strokeDasharray.slice(0),[0]))),{Jx:r,dash:t}},MO);function MO(){}var Util$4=AMap.Util,PolylineWebglRender=(CP.prototype.render=function(t,e,r){var n;t._map&&(n=t._opts,this.Tc(t,e,r),this.Ic(t,e,r),n.lineGradient&&this.nC(t,e,r),n.showDir&&this.N_(t,e,r))},CP.prototype.fb=function(t,e){var r=t.rY(e),n=t._opts,i=n.strokeWeight||-1;if(!(i<=0)&&!(n.strokeOpacity<=0)&&n.strokeColor){var a=Util$4.color2RgbaArray(n.strokeColor);if(a){a=a.slice(0,3);var o=this.Xx(t);return a.push(n.strokeOpacity),{u_color:a,u_matrix:e.$n.mvpMatrix,u_meter_per_pixel:e.$n.resolution,u_width:i,u_offset:t.zx,u_localDeltaCenter:r,u_dash:o.dash,u_dashType:o.Jx,u_skyHeight:e.$n.skyHeight,u_viewHeight:e.$n.size[1]}}}},CP.prototype.pb=function(t,e){var r=t.rY(e),n=t._opts;if(n.outlineColor){var i=Util$4.color2RgbaArray(n.outlineColor);if(i){(i=i.slice(0,3)).push(n.strokeOpacity);var a=n.strokeWeight+2*n.borderWeight;if(!(a<=0||n.strokeOpacity<=0)){n=this.Xx(t);return{u_color:i,u_matrix:e.$n.mvpMatrix,u_localDeltaCenter:r,u_width:a,u_offset:t.zx,u_meter_per_pixel:e.$n.resolution,u_dash:n.dash,u_dashType:n.Jx,u_skyHeight:e.$n.skyHeight,u_viewHeight:e.$n.size[1]}}}}},CP.prototype.B_=function(t,e,r){if(t._map){var n=t.rY(e),i=t._opts,a=i.strokeWeight;if(!(a<=0)){var o=Boolean(i.dirImg);if(r=o?(t.U_(r),t.E_):t._map.getImage("AMapArrow")){i=Util$4.color2RgbaArray(i.dirColor).slice(0,3);return{u_matrix:e.$n.mvpMatrix,u_meter_per_pixel:e.$n.resolution,u_meter_per_pixel_optimal:e.$n.optimalResolution,u_width:a,u_offset:t.zx,u_localDeltaCenter:n,u_texture:r,u_iconsize:r.size,u_custom_img_flag:o,u_dir_color:i,u_skyHeight:e.$n.skyHeight,u_viewHeight:e.$n.size[1]}}}}},CP.prototype.oC=function(t,e,r){if(t._map){var n=t.rY(e),i=t._opts;if(i.lineGradient){var a=i.strokeWeight;if(!(a<=0))return t.rC||t.aC(r,i.lineGradient),{u_matrix:e.$n.mvpMatrix,u_meter_per_pixel:e.$n.resolution,u_width:a,u_offset:t.zx,u_localDeltaCenter:n,u_texture:t.rC,u_total_distance:t.sC,u_skyHeight:e.$n.skyHeight,u_viewHeight:e.$n.size[1]}}}},CP.prototype.U_=function(t,e){t.F_&&(t.E_||(t.E_=e.createTexture(t.F_,{Zi:!0}),t.E_.bind(e.gl.CLAMP_TO_EDGE,e.gl.LINEAR,e.gl.LINEAR)))},CP.prototype.aC=function(t,e,r){t.rC||(r=createLineGradinetCanvas(r.values),t.rC=e.createTexture(r,{Zi:!0}),e=e.gl,t.rC.bind(e.CLAMP_TO_EDGE,e.NEAREST,e.NEAREST_MIPMAP_NEAREST))},CP.prototype.Xx=function(t){var e=t._opts,r=2,t=[1,0,0];return"dashed"===e.strokeStyle&&e.strokeDasharray&&(t=3<=e.strokeDasharray.length?(r=3,e.strokeDasharray.slice(0,3)):(r=2,__spreadArrays(e.strokeDasharray.slice(0),[0]))),{Jx:r,dash:t}},CP.prototype.N_=function(t,e,r){var n,i;t.Px&&((n=t.Px).upload(r.context),n.uploaded&&n.zs&&t.visible&&(i=n.zs.buffer,(e=this.B_(t,e,r.context))&&((r=r.M_()).context.getExtension("OES_element_index_uint"),r.Ce(e,{a_pos:{buffer:i,type:"vec2",Re:i.size,offset:0},a_normal:{type:"vec2",buffer:i,Re:i.size,offset:8},a_distance:{type:"float",buffer:i,Re:i.size,offset:16},a_dir:{type:"vec2",buffer:i,Re:i.size,offset:20}},3*n.Qx.length,n.Pc.buffer,void 0,void 0,ColorMode.Si,void 0,void 0,0),r.Ni())))},CP.prototype.Ic=function(t,e,r){var n,i;t.Px&&((n=t.Px).upload(r.context),n.uploaded&&n.zs&&t.visible&&(i=n.zs.buffer,(e=this.fb(t,e))&&((r=r.Xn()).context.getExtension("OES_element_index_uint"),r.Ce(e,{a_pos:{buffer:i,type:"vec2",Re:i.size,offset:0},a_normal:{type:"vec2",buffer:i,Re:i.size,offset:8},a_distance:{type:"float",buffer:i,Re:i.size,offset:16},a_dir:{type:"vec2",buffer:i,Re:i.size,offset:20}},3*n.Qx.length,n.Pc.buffer,void 0,void 0,ColorMode.Si,void 0,void 0,0),r.Ni())))},CP.prototype.nC=function(t,e,r){var n,i;t.Px&&((n=t.Px).upload(r.context),n.uploaded&&n.zs&&t.visible&&(i=n.zs.buffer,(e=this.oC(t,e,r.context))&&((r=r.sS()).context.getExtension("OES_element_index_uint"),r.Ce(e,{a_pos:{buffer:i,type:"vec2",Re:i.size,offset:0},a_normal:{type:"vec2",buffer:i,Re:i.size,offset:8},a_distance:{type:"float",buffer:i,Re:i.size,offset:16},a_dir:{type:"vec2",buffer:i,Re:i.size,offset:20}},3*n.Qx.length,n.Pc.buffer,void 0,void 0,ColorMode.Si,void 0,void 0,0),r.Ni())))},CP.prototype.Tc=function(t,e,r){var n,i=t._opts;i&&i.isOutline&&t.Px&&((n=t.Px).upload(r.context),(n.uploaded||n.zs)&&(i=n.zs.buffer,!t.visible||(e=this.pb(t,e))&&((r=r.Xn()).context.getExtension("OES_element_index_uint"),r.Ce(e,{a_pos:{buffer:i,type:"vec2",Re:i.size,offset:0},a_normal:{type:"vec2",buffer:i,Re:i.size,offset:8},a_distance:{type:"float",buffer:i,Re:i.size,offset:16},a_dir:{type:"vec2",buffer:i,Re:i.size,offset:20}},3*n.Qx.length,n.Pc.buffer,void 0,void 0,ColorMode.Si,void 0,void 0,0),r.Ni())))},CP);function CP(){}function createLineGradinetCanvas(t){var e=document.createElement("canvas");e.height=1,e.width=4096;for(var r=e.getContext("2d"),n=r.createImageData(4096,1),i=0,a=0;a<4096;a++){for(var o=void 0;i<t.length;i++){if(i===t.length-1){o=t[i][1];break}if(!(4096*t[i+1][0]<a)){o=t[i][1];break}}o=t[i][1];var f=Util$4.color2RgbaArray(o);n.data[4*a]=255*f[0],n.data[4*a+1]=255*f[1],n.data[4*a+2]=255*f[2],n.data[4*a+3]=255*f[3]}return r.putImageData(n,0,0),e}var Util$5=AMap.Util,Support$4=M.Support,CircleWebglRender=(eR.prototype.render=function(t,e,r){t._map&&t.getRadius()&&this.Cb(t,e,r)},eR.prototype.Cb=function(t,e,r){!t.visible||(e=this.Ab(t,e))&&r.Un().Ce(e,{},1,void 0,"POINTS",!1,ColorMode.Si,void 0,void 0,0)},eR.prototype.Lb=function(t,e,r){!t.visible||(e=this.Tb(t,e))&&r.Un().Ce(e,{},1,void 0,"POINTS",!1,ColorMode.Si,void 0,void 0,0)},eR.prototype.Ab=function(t,e){var r=t.KB;if(r){var n=t.rY(e),i=t._opts;if(i.fillColor){var a=Util$5.color2RgbaArray(i.fillColor).slice(0,3);a.push(i.fillOpacity);var o=i.radius+(i.strokeWeight||0),f=[0,i.radius/o],o=[0,0,0,0];return i.strokeColor&&i.strokeWeight&&i.strokeOpacity&&(o=Util$5.color2RgbaArray(i.strokeColor).slice(0,3)).push(i.strokeOpacity),{u_pos:r,u_color:a,u_borderColor:o,u_offset:t.zx,u_matrix:e.$n.mvpMatrix,u_localDeltaCenter:n,u_radius:this.Ib(t),u_range:f,u_retinaRatio:Support$4.Ue?2:1,u_skyHeight:e.$n.skyHeight,u_viewHeight:e.$n.size[1]}}}},eR.prototype.Tb=function(t,e){var r=t.KB;if(r){var n=t.rY(e),i=t._opts;if(i.strokeWeight&&i.strokeColor){var a=Util$5.color2RgbaArray(i.strokeColor).slice(0,3);a.push(i.strokeOpacity);var o=i.radius+i.strokeWeight,i=[i.radius/o,1],o=a.slice(0,3);return o.push(0),{u_pos:r,u_color:a,u_borderColor:o,u_offset:t.zx,u_matrix:e.$n.mvpMatrix,u_localDeltaCenter:n,u_radius:this.Ib(t),u_range:i,u_retinaRatio:Support$4.Ue?2:1,u_skyHeight:e.$n.skyHeight,u_viewHeight:e.$n.size[1]}}}},eR.prototype.Ib=function(t){t=t._opts,t=t.radius+(t.strokeWeight||0);return Math.min(t,64)},eR);function eR(){}var OverlayRender=(NR=LayerRender,__extends(OR,NR),OR.prototype.renderFrame=function(t,e,r,n,i){var a=r.$n.zoom;if(e.sr)for(var o=0,f=e.sr;o<f.length;o++){var s=f[o];if(!(a<s._opts.zooms[0]||a>s._opts.zooms[1]))switch(s.CLASS_NAME){case"Overlay.Polygon":case"Overlay.Rectangle":case"Overlay.Circle":case"Overlay.Ellipse":this.hC(s,r,t);break;case"Overlay.Polyline":case"Overlay.BezierCurve":this.lC(s,r,t);break;case"Overlay.CircleMarker":this.fC(s,r,t)}}},OR.prototype.hC=function(t,e,r){this.uC.render(t,e,r)},OR.prototype.lC=function(t,e,r){this.cC.render(t,e,r)},OR.prototype.fC=function(t,e,r){this.dC.render(t,e,r)},OR),NR;function OR(){var t=null!==NR&&NR.apply(this,arguments)||this;return t.uC=new PolygonWebglRender,t.cC=new PolylineWebglRender,t.dC=new CircleWebglRender,t}var TileState$2=M.TileState,VectorTrafficRender=(gS=LayerRender,__extends(hS,gS),hS.prototype.renderFrame=function(t,e,r,n){var i=r.$n.optimalZoom;if(!(i<n.zooms[0]||i>n.zooms[1])){n.ce&&t.context.clear({depth:!0});e=e.tiles[0];if(e&&e.length)for(var a=0,o=e;a<o.length;a++){var f=o[a];f.status===TileState$2.LOADED&&this.Ic(t,f,r,n)}}},hS.prototype.destroy=function(){},hS.prototype.Ic=function(t,e,r,n){var i=t.Vn();if(e.data){var a=e.data,t=a.$c;if(t){t.upload(i.context,!0);var o=t.zs.buffer,f=t.Pc.buffer,t=a.Uc;if(t){var s=t.jc,u=(r.$n.optimalZoom,a.Sa),l=n.opacity,c=1;"3D"===r.$n.viewMode&&(c=r.map.getView().EF());for(var h=0,v=s.length;h<v;h++){var d=s[h],_=d.color,y={u_matrix:r.$n.mvpMatrix,u_meter_per_pixel:r.$n.resolution,u_width:d.width,u_color:[_[0],_[1],_[2],_[3]*l],u_border:0,u_dash:void 0,u_localDeltaCenter:u,u_skyHeight:c,u_viewHeight:r.$n.size[1]},_=o.size;i.context.getExtension("OES_element_index_uint"),i.Ce(y,{a_pos:{type:"vec2",buffer:o,Re:_,offset:0},a_normal:{type:"vec2",buffer:o,Re:_,offset:8},a_distance:{type:"float",buffer:o,Re:_,offset:16},a_dir:{type:"vec2",buffer:o,Re:_,offset:20}},d.length,f,"TRIANGLES",n.depthTest,ColorMode.Si,n.rejectMapMask||!r.map.getMask()?void 0:StencilMode.writeWithStencil,void 0,d.offset)}}}}else assert(e.data,"tile have no data")},hS),gS;function hS(){return gS.call(this)||this}var VTRender=(NS=LayerRender,__extends(OS,NS),OS.prototype.renderFrame=function(t,e,r,n){t.context.gl},OS),NS;function OS(){return NS.call(this)||this}var skyFragmentString="precision highp float;\\nuniform float u_opacity;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n  gl_FragColor = v_color;\\n  // float x = v_pos.x / v_pos.w;\\n  gl_FragColor.a *= u_opacity;\\n}",skyVertextString="precision highp float;\\nuniform vec2 u_skyline;\\nuniform mat4 u_mvpMatrix;\\nattribute vec4 a_pos;\\nattribute vec4 a_color;\\nvarying vec4 v_color;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\\n    gl_Position = pos;\\n    v_color = a_color;\\n    v_pos = gl_Position;\\n}\\n",skyPatternFragmentString="precision highp float;\\nuniform sampler2D u_texture;\\n\\nuniform float u_opacity;\\nuniform float u_rotation;\\nvarying vec2 v_coord;\\nvarying float v_opacity;\\nvoid main() {\\n  // gl_FragColor = vec4(1.0,0,0,1.0);\\n  gl_FragColor = texture2D(u_texture, vec2(v_coord.x+u_rotation, v_coord.y));\\n  // // float x = v_pos.x / v_pos.w;\\n  gl_FragColor.a *= u_opacity*v_opacity;\\n}",skyPatternVertextString="precision highp float;\\nuniform vec2 u_skyline;\\nuniform mat4 u_mvpMatrix;\\nattribute vec4 a_pos;\\nattribute float a_opacity;\\nattribute vec2 a_coord;\\n\\n\\nvarying vec2 v_coord;\\nvarying float v_opacity;\\n\\nvoid main() {\\n    vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\\n    gl_Position = pos;\\n    v_coord = a_coord;\\n    v_opacity = a_opacity;\\n}\\n",skyUniforms={u_mvpMatrix:"mat4",u_opacity:"float",u_skyline:"vec2"},skyAttributes={a_pos:{Me:"float32",Oe:"vec4"},a_color:{Me:"float32",Oe:"vec4"}};function getAtmosphereTexture(t){return t.vn.bN&&t.vn.bN.atmosphere&&t.vn.bN.atmosphere.texture?"https://"+t.vn.bN.atmosphere.texture:""}function getSkyTexture(t){return t.vn.bN&&t.vn.bN.sky&&t.vn.bN.sky.texture?"https://"+t.vn.bN.sky.texture:""}var sky={uniforms:skyUniforms,attributes:skyAttributes,vertexSource:skyVertextString,fragmentSource:skyFragmentString},skyPatternUniforms={u_mvpMatrix:"mat4",u_opacity:"float",u_skyline:"vec2",u_texture:"sampler2D",u_rotation:"float"},skyPatternAttributes={a_pos:{Me:"float32",Oe:"vec4"},a_opacity:{Me:"float32",Oe:"float"},a_coord:{Me:"float32",Oe:"vec2"}},skyPattern={uniforms:skyPatternUniforms,attributes:skyPatternAttributes,vertexSource:skyPatternVertextString,fragmentSource:skyPatternFragmentString},SmartArrayBuffer$3=M.SmartArrayBuffer,SkyLayerRender=(YS=LayerRender,__extends(ZS,YS),ZS.prototype.renderFrame=function(t,e,r,n,i,a){var o,f;i.map.mapStyle.vn&&((f=(o=getAtmosphereTexture(i.map.mapStyle))?i.map.getImage(o):void 0)?this.jB(t,r,i,o,r.$n.zoom<12?1:0):o&&i.map.I_&&!i.map.I_.MH(o)&&i.map.GV(o,{url:o,filter:"LINEAR",wrap:"REPEAT",cb:function(){return i.map.setNeedUpdate(!0)}}),o&&f||this.NB(t,r,r.$n.zoom<12?1:0),(f=(o=getSkyTexture(i.map.mapStyle))?i.map.getImage(o):void 0)?this.jB(t,r,i,o,step(r.$n.zoom-11,1,0)):o&&i.map.I_&&!i.map.I_.MH(o)&&i.map.GV(o,{url:o,filter:"LINEAR",wrap:"REPEAT",cb:function(){return i.map.setNeedUpdate(!0)}}),o&&f||this.NB(t,r,step(r.$n.zoom-11,1,0)))},ZS.prototype.NB=function(t,e,r){var n=t.rS(),i=e.$n,a=t.context,o=e.map.getView(),f=(i.size,i.pitch),s=i.optimalZoom;"2D"!==o.type&&(t=o.Uu(),(t=this.yz(o.getStatus().pitch,t,o.getStatus().size[1],s))<=0||f<=0||(e=e.map.JF(e.$n.optimalZoom),o=this.WF(t,e,i,o),this.zs?this.zs.update(o):this.zs=new SmartArrayBuffer$3(a,o,32,"ARRAY_BUFFER"),o=this.zs.buffer,n.Ce({u_opacity:r,u_mvpMatrix:i.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:"vec4",buffer:o,Re:o.size,offset:0},a_color:{type:"vec4",buffer:o,Re:o.size,offset:16}},o.length,void 0,"TRIANGLES",void 0,ColorMode.Si,void 0)))},ZS.prototype.jB=function(t,e,r,n,i){var a,o,f,s,u,l,c;0!==i&&(a=t.EB(),o=t.rS(),f=e.$n,s=t.context,c=e.map.getView(),f.size,u=f.pitch,l=f.optimalZoom,"2D"!==c.type&&(t=c.Uu(),(t=this.yz(c.getStatus().pitch,t,c.getStatus().size[1],l))<=0||u<=0||(e.map.JF(e.$n.optimalZoom),e=(360-e.$n.rotation)/360,c=this.WB(t,f,c),this.zs?this.zs.update(c):this.zs=new SmartArrayBuffer$3(s,c,32,"ARRAY_BUFFER"),c=this.zs.buffer,(n=r.map.getImage(n))&&(a.Ce({u_opacity:i,u_mvpMatrix:f.mvpMatrix,u_skyline:[0,0],u_texture:n,u_rotation:e},{a_pos:{type:"vec4",buffer:c,Re:c.size,offset:0},a_opacity:{type:"float",buffer:c,Re:c.size,offset:16},a_coord:{type:"vec2",buffer:c,Re:c.size,offset:24}},c.length/2,void 0,"TRIANGLES",void 0,ColorMode.Si,void 0),o.Ce({u_opacity:1,u_mvpMatrix:f.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:"vec4",buffer:c,Re:c.size,offset:0},a_color:{type:"vec4",buffer:c,Re:c.size,offset:16}},c.length/2,void 0,"TRIANGLES",void 0,ColorMode.Si,void 0,void 0,c.length/2)))))},ZS.prototype.WF=function(t,e,r,n){r.size[1],r.pitch;var i=r.zoom,a=n.X(0,t),o=n.X(r.size[0],t),f=n.X(0,t+0),s=n.X(r.size[0],t+0),u=.5*n.pz().dz();e[3]=1;r=n.map.mapStyle.dn(30001,1,i),t=[.988,.976,.949,1];r&&r.faceColor&&(t=r.faceColor.normalize());n=__spreadArrays(t);n[3]=1;r=__spreadArrays(t)||[1,1,1,0];r[3]=0;t=__spreadArrays(t)||[1,1,1,Math.min(.1,1/i)];return t[3]=Math.min(.1,5/i),(__spreadArrays(e)||[1,1,1,1])[3]=-.7,new Float32Array(__spreadArrays([a[0],a[1],0,0],n,[a[0],a[1],u,0],e,[o[0],o[1],0,0],n,[o[0],o[1],0,0],n,[o[0],o[1],u,0],e,[a[0],a[1],u,0],e,[f[0],f[1],0,0],t,[f[0],f[1],u/3,0],r,[s[0],s[1],0,0],t,[s[0],s[1],0,0],t,[s[0],s[1],u/3,0],r,[f[0],f[1],u/3,0],r))},ZS.prototype.WB=function(t,e,r){e.size[1],e.pitch;var n=e.zoom,i=(e.rotation,r.X(0,t)),a=r.X(e.size[0],t),o=r.X(0,t+0),f=r.X(e.size[0],t+0),s=.5*r.pz().dz(),u=e.uB/Math.PI/2/2,t=0-u,e=0+u,u=r.map.mapStyle.dn(30001,1,n),r=[.988,.976,.949,1];u&&u.faceColor&&(r=u.faceColor.normalize());u=__spreadArrays(r)||[1,1,1,0];u[3]=0;r=__spreadArrays(r)||[1,1,1,Math.min(.1,1/n)];return r[3]=Math.min(.1,5/n),new Float32Array(__spreadArrays([i[0],i[1],0,0,1,0,t,1,i[0],i[1],s,0,1,0,t,-0,a[0],a[1],0,0,1,0,e,1,a[0],a[1],0,0,1,0,e,1,a[0],a[1],s,0,1,0,e,-0,i[0],i[1],s,0,1,0,t,-0,o[0],o[1],0,0],r,[o[0],o[1],s/3,0],u,[f[0],f[1],0,0],r,[f[0],f[1],0,0],r,[f[0],f[1],s/3,0],u,[o[0],o[1],s/3,0],u))},ZS.prototype.yz=function(t,e,r,n){return r*(Math.max(t/100-.4,0)-Math.max(4*(n-16),0)/100)},ZS),YS;function ZS(){return YS.call(this)||this}function step(t,e,r){return Math.max(Math.min(t,e),r)}var indoorStyles={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"},StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19",desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"},StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"},StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20",desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20",desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20",desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}],RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]},{$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]},allowedStyleKeys=["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","strokeStyle","strokeDasharray","fontSize"],indoorStyleSet={setOptions:function(t){},init:function(){return this.NC={},this.UC(indoorStyles),this.WC=[],this.NC},GC:function(t){return AMap.getConfig().protocol+"://webapi.amap.com/images/indoor_icon/36/"+t+"@2x.png"},HC:function(t){for(var e=!0,r=13;r<=22;r++){var n=this.VC(t,r);if(n&&(0<n.fontSize||n.iconId)){e=!1;break}}return e},VC:function(t,e){return this.Tn(t,e)},ZC:function(t,e){return this.Tn(t,e)},Pr:function(t,e){return this.Tn(t,e)},YC:function(t,e){var r=allowedStyleKeys;if(e)for(var n in e)e.hasOwnProperty(n)&&0<=r.indexOf(n)&&void 0===t[n]&&(t[n]=e[n]);return t},JC:function(t,e){if(!t)return null;for(var r=allowedStyleKeys,n={},i=0,a=r.length;i<a;i++){var o=r[i];t.hasOwnProperty(o)&&void 0!==t[o]&&(n[o]=t[o])}return this.YC(n,e),n},Tn:function(t,e){t=t[0]+"_"+t[1];e=Math.round(e);var r=this.NC[t];if(!r)return this.WC.indexOf(t)<0&&this.WC.push(t),null;for(var n=0,i=r.length;n<i;n++)if(0<=r[n].levels.indexOf(""+e))return r[n].styleOpts;if(20<e){t=r[r.length-1];if(0<=t.levels.indexOf("20"))return t.levels.push(""+e),t.styleOpts}return null},UC:function(t){for(var e in t)t.hasOwnProperty(e)&&this.XC(t[e],e)},XC:function(t,e){for(var r=0,n=t.length;r<n;r++)this.qC(t[r],e)},qC:function(t,e){var r,n=t.$;n&&(r=n.mainkey,n=n.subkey,t=t.StyleItem,n=r+"_"+n,this.NC[n],this.NC[n]=this.QC(t,e))},QC:function(t,e){for(var r=[],n=0,i=t.length;n<i;n++){var a=this.KC(t[n],e);a&&r.push(a)}return r},KC:function(t,e){var r=t.$;if(r){t={};return t.levels=r.level.split(","),t.desc=r.desc.split(","),t.styleOpts=this.$I(t,t.desc,e),t.styleOpts.levels=t.levels,t}},BI:function(t){for(var e=[],r=0,n=t.length;r<n;r+=2)e.push(parseInt(t.substr(r,2),16));return e.push(e.shift()),"rgb("+(e=e.slice(0,3)).join(",")+")"},WI:function(t){return t.trim&&(t=t.trim()),this.BI(t.substr(2,8))},GI:function(){return this.HI++},$I:function(t,e,r){var n;switch(r){case"PoiStyle":1===(n={iconId:parseInt(e[1],10),fontSize:Math.min(15,parseInt(e[4],10)||0),fillColor:this.WI(e[5]),strokeColor:this.WI(e[6]),VI:0===parseInt(e[8],10)}).iconId&&(n.iconId=0);break;case"LineStyle":n={fillColor:"rgb(252, 249, 242)",strokeColor:this.WI(e[7]),strokeWeight:Math.max(2,Math.round(parseInt(e[2],10)/3))};break;case"RegionStyle":n={fillColor:this.WI(e[2])};break;case"BuildingStyle":n={fillColor:this.WI(e[1]),strokeColor:this.WI(e[2])};break;default:return null}return n._uid=this.GI(),n}},assign$1=M.lodash.assign,outLineStyle={high:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(230,142,0)"},unHigh:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(171,171,171)"}},IndoorRender=(cW=LayerRender,__extends(dW,cW),dW.prototype.getContainer=function(){return document.createElement("div")},dW.prototype.renderFrame=function(t,e,r,n,i){},dW.prototype.render=function(t){var e=this,r=t.data;if(!r||r.length<1||!this.gs)return!1;this._map=this.gs.map,this.sZ||(this.sZ=!0,this._map.on("click",function(t){e.e$&&e.e$.hide(),e.gs.oZ()}));var n=this.gs.ZI(),i=n.indoor,a=n.floorInfo;if(n&&!1===n.visible)return!1;t=this.qI(r);if(this.UL=r,!t)return!1;n.changeFloor||(t={centerId:t},this.gs.setRenderData(t));for(var o=Object.keys(r),f=0;f<o.length;f++){var s,u=o[f],l=r[u],c=l.building;c&&c.properties&&this.gs.getIntersect(c.properties.outside_outline)&&(i[u]?i[u].curFloor!==(s=a[u])&&this.gS(l,s):(s="1",a[u]&&(s=a[u]),this.gS(l,s)))}},dW.prototype.HF=function(t){this.gs=t},dW.prototype.t$=function(){var t=this;console.log("loadCtrol"),this.i$||AMap.plugin("AMap.IndoorMapFloorBar",function(){t.i$=!0})},dW.prototype.QI=function(t,e){var n=this,r=this.gs.ZI(),i=r.floorInfo,a=(r.showId,r.centerId),o=r.VV,f=null,r=null,e=Number(i[e])||1,t=t.properties;if(t&&t.floor_nonas&&(f=t.floor_nonas,r=t.floor_indexs),!f||!r)return!1;if(1<r.length&&r[0]>r[1]&&(f=f.reverse(),r=r.reverse()),!this.e$&&this.i$){if(M&&M.IndoorMapFloorBar&&(this.e$=new M.IndoorMapFloorBar({floors:f,floorIndexs:r,currentFloor:e}),this.WL=a,this.gs.setBar(this.e$),this.gs.setRenderData({barCenterId:this.WL})),!this.e$)return!1;this._map.addControl(this.e$),this.e$.on("floorchange",function(t){n.pD=!0;var e=t.currentIndex,r=n.gs.ZI().centerId;n.gs.n$(r,e);t=n._map.Mv.getSource(n.gs.co());r&&(n.gs.setRenderData({changeFloor:!0}),t.JR(r,e))})}else this.e$&&(this.WL=a,this.e$.setOption({floors:f,floorIndexs:r,currentFloor:e}),this.gs.setRenderData({barCenterId:this.WL}));o&&this.e$&&this.e$.hide(),!this.GL&&this._map&&(this.GL=!0,this._map.on("moveend",function(){var t=n.vD();t&&(t={centerId:t},n.gs.setRenderData(t)),n.gs.setRenderData({changeFloor:!1}),n.WV(),n.gs.uD()}))},dW.prototype.WV=function(){var t=1,e=this.gs.ZI(),r=e.centerId;if(r===this.WL)return!1;if(e.floorInfo[r]&&(t=e.floorInfo[r]),this.UL&&this.UL[r]&&this.UL[r].building){var n=this.UL[r].building.properties,i=null,e=null;if(n&&n.floor_nonas&&(i=n.floor_nonas,e=n.floor_indexs),!i||!e)return!1;1<e.length&&e[0]>e[1]&&(i=i.reverse(),e=e.reverse()),this.e$&&(this.e$.setOption({floors:i,floorIndexs:e,currentFloor:Number(t)}),this.WL=r,this.gs.setRenderData({barCenterId:this.WL}))}},dW.prototype.qI=function(t){for(var e=this._map.getCenter().toJSON(),r=null,n="",i=Object.keys(t),a=0;a<i.length;a++){var o=i[a],f=t[o];f.building&&f.building.properties&&f.building.properties.centerPoint&&(f=f.building.properties.centerPoint,f=new AMap.LngLat(f[0],f[1]),f=AMap.GeometryUtil.distance(e,f),(!r||f<r)&&(r=f,n=o))}return n},dW.prototype.vD=function(){for(var t=this._map.getCenter().toJSON(),e=null,r="",n=this.gs.ZI().indoor,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],f=n[o];f.buildingCenter&&(f=f.buildingCenter,f=new AMap.LngLat(f[0],f[1]),f=AMap.GeometryUtil.distance(t,f),(!e||f<e)&&(e=f,r=o))}return r},dW.prototype.fD=function(t,e){var r=this.gs.ZI();r.floorInfo||(r.floorInfo={}),r.floorInfo[t]=e,this.gs.setRenderData(r)},dW.prototype.gS=function(t,e){var r=Object.keys(t.data)[0];if(e&&(r=e),!t.data[r])return!1;var n=t.data[r].floor,i=t.data[r].id;if(!n||!i)return!1;r=this.gs.ZI();this.fD(i,e),r.centerId===i&&this.QI(t.building,i),this.o$(n,i,t.building,e),this.gs.mD(!0)},dW.prototype.ar=function(t){var e=this.gs.ZI().indoor;e&&e[t]&&(e[t].polygons&&this.gs.$F.remove(e[t].polygons),e[t]&&e[t].markers&&0<e[t].markers.length&&this.a$.remove(e[t].markers))},dW.prototype.h$=function(t){var e=this;if(!t||!t.properties)return null;var r=t.properties.poitype,n=t.position,i=r.join("_"),a=this.l$[i]&&this.l$[i][0],r=this.gs.ZI();if(a&&a.styleOpts&&a.styleOpts.iconId){i=a.styleOpts.iconId,i=indoorStyleSet.GC(i),r={position:n,zooms:t.zooms,opacity:r.opacity,rank:3e5,icon:{size:[18,18],image:i,anchor:"center"},extData:t.properties,innerOverlay:!0};t.text&&(i=a.styleOpts.fillColor||"rgb(132,99,142)",a=a.styleOpts.strokeColor||"#FFFFFF",r=assign$1(r,{text:{content:t.text,direction:"bottom",style:{fillColor:i,strokeColor:a,fontSize:12}}}));r=new AMap.LabelMarker(r);return r.on("click",function(t){e._map&&e._map.getStatus().isHotspot&&e.bi("click",t)}),r.on("mousemove",function(t){e._map&&e._map.getStatus().isHotspot&&e.bi("mousemove",t)}),r.on("mouseout",function(t){e._map&&e._map.getStatus().isHotspot&&e.bi("mousemove",t)}),r}return null},dW.prototype.bi=function(t,e){var r,n,i="hotspot",a=e.target.getExtData();switch(t){case"click":r=i+t;break;case"mouseover":r=i+"over";break;case"mouseout":r=i+"out"}r&&((n=this._map.getProjection().unproject(e.lnglat.lng,e.lnglat.lat))[0],n[1],e={type:r,id:a.pid,name:a.name,lnglat:e.lnglat,originEvent:e.originEvent},this._map.emit(r,e))},dW.prototype.o$=function(t,e,r,n){var o=this;if(!this._map||!e)return!1;var i=this.gs.ZI();this.ar(e);this._map.getZoom();for(var a=[],f=[],s=t.shops,u=t.floor,l=t.cons,c={building_id:e,floor:u},h=s.length,v=[],d=[],_=[],y=[],g=[],p=0;p<h;p++){var m=s[p],b=m.properties,x=m.geometry,S=assign$1({shop:{id:b.cpid,name:b.name}},c),M="#FFFFFF",C="#FE9A2E";b&&b.regiontype&&(m=b.regiontype.join("_"),(m=this.l$[m]&&this.l$[m][0])&&m.styleOpts&&(M=m.styleOpts.fillColor,C=m.styleOpts.strokeColor)),d.push(M),_.push(C),g.push(i.opacity),y.push({indoorPolygon:!0,indoorData:S,id:e}),v.push(x.coordinates),b.zoom_min&&b.zoom_max&&b.font_anthor_point&&(D={position:[(S=b.font_anthor_point)[0],S[1]],text:b.name,properties:b,zooms:[b.zoom_min,b.zoom_max]},(B=this.h$(D))&&f.push(B))}var A=new AMap.Polygon({path:v,innerOverlay:!0,cursor:i.cursor,zooms:this.YI,async:!0,fillColor:function(t){return d[t]},strokeColor:function(t){return _[t]},fillOpacity:function(t){return g[t]},strokeOpacity:i.opacity,strokeWeight:1,zIndex:i.zIndex+2});A.on("click",function(t){var e=y[t.vectorIndex],r=e.id;o.e$&&o.e$.show(),r&&(r={centerId:r,changeFloor:!0},o.gs.setRenderData(r),o.WV(),o.gs.uD()),e.indoorData.ext={type:"polygon",data:t},o.gs.emit("click",e.indoorData)}),A.on("mouseover",function(t){for(var e=0,r=y.length;e<r;e++){var n=y[e];n.originFillOpacity&&n.originFillColor&&(d[e]=n.originFillColor,g[e]=n.originFillOpacity)}var i=y[t.vectorIndex],a=t.lnglat;i.originFillOpacity=g[t.vectorIndex],i.originFillColor=d[t.vectorIndex],d[t.vectorIndex]="#B45F04",g[t.vectorIndex]=.4,i.indoorData&&i.indoorData.shop&&i.indoorData.shop.name&&(i=\'<div style="padding: 5px; border: 1px solid rgba(41,38,36,0.87);; white-space:nowrap; border-radius: 2px;color: #000000; background: #FBF5EF; font-size:12px;">\'+i.indoorData.shop.name+"</div>",o.JT=new AMap.Marker({position:a,content:i,anchor:"bottom-left",map:o._map,noSelect:!0})),A.to()}),A.on("mouseout",function(t){for(var e=0,r=y.length;e<r;e++){var n=y[e];n.originFillOpacity&&n.originFillColor&&(d[e]=n.originFillColor,g[e]=n.originFillOpacity)}o.JT&&o._map.remove(o.JT),A.to()}),a.push(A);var k=null,w=[];if(u.geometry&&u.geometry.coordinates){M=outLineStyle.unHigh.fillColor,C=outLineStyle.unHigh.strokeColor;i.centerId===e&&(C=outLineStyle.high.strokeColor);var T=u.geometry.coordinates;if(u.geometry.type&&"MultiPolygon"===u.geometry.type&&T[0]&&1<T[0].length){for(var $=[],I=0;I<T[0].length;I++)$.push(T[0][I]);T=$}for(var L=0;L<T.length;L++){var F=new AMap.Polygon({async:!0,strokeWeight:3,innerOverlay:!0,zooms:this.YI,path:T[L],fillColor:M,strokeColor:C,zIndex:i.zIndex+1,fillOpacity:i.opacity,strokeOpacity:i.opacity,extData:{indoorPolygon:!0,id:e}}),k=!0;F.on("click",function(t){t=t.target.getExtData().id;o.e$&&o.e$.show(),t&&(t={centerId:t,changeFloor:!0},o.gs.setRenderData(t)),o.WV(),o.gs.uD()}),w.push(F),a.push(F)}}i.showId&&this.gs.setRenderData({centerId:i.showId}),this.gs.uD(),this.gs.$F.add(a),i.indoor[e]||(i.indoor[e]={}),i.indoor[e].curFloor=n,i.indoor[e].polygons=a,i.indoor[e].outline=w,r&&r.properties&&r.properties.centerPoint&&(i.indoor[e].buildingCenter=r.properties.centerPoint),i&&i.showId===e&&k&&"undefined"!==i.animateState&&this._map.setStatus({animateEnable:i.animateState});for(var P=l.length,z=0;z<P;z++){var B,E=l[z],x=E.geometry,O=(b=E.properties).zoom_min,E=b.zoom_max,D={properties:b,position:[x.coordinates[0],x.coordinates[1]],zooms:[O,E]};(B=this.h$(D))&&f.push(B)}this.f$||(this._map.add(this.a$),this.gs.setRenderData({labelsLayer:this.a$}),this.f$=!0),i.indoor[e].markers=f,void 0!==i.zIndex&&this.a$.setzIndex(i.zIndex+9),this.a$.add(f);u=this._map&&this._map.showLabel;i.showLabels&&u&&this.a$.show(),this.gs.KI(i);u={status:0,id:e,building:{id:e}};r.properties&&(r=r.properties,u.building.name=r.name_cn,u.building.lnglat=r.centerPoint,u.building.floor=n||1,u.building.floor_details={floor_indexs:r.floor_indexs,floor_nonas:r.floor_nonas,floor_names:r.floor_names},this.gs.setRenderData(u)),i.complete||(i.complete={}),i.complete[e]||(i.complete[e]={}),i.complete[e][n]?this.pD&&(this.gs.emit("floor_complete",u),this.pD=!1):(this.gs.emit("floor_complete",u),i.complete[e][n]=!0),this.gs.setRenderData(i.complete)},dW),cW,NebulaTagType,AZ;function dW(){var t=cW.call(this)||this;return t._config=AMap.getConfig(),t.YI=[17,22],t.l$=indoorStyleSet.init(),t.a$=new AMap.LabelsLayer({opacity:1,collision:!0,allowCollision:!0,zIndex:9,zooms:[17,22],visible:!1}),t.GL=!1,t.i$=!1,t.WL="",t._map=null,t.f$=!1,t.UL=null,t.pD=!1,t.t$(),t.sZ=!1,t}function isBrowser(){return"undefined"!=typeof window&&"undefined"!=typeof document}function isWasmSuppport(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var t=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}return!1}AZ=NebulaTagType=NebulaTagType||{},AZ.LITE="lite",AZ.LEFT="left",AZ.ALL="all",AZ.NONE="";var testWepP=function(t){var e=new Image;e.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",e.onload=e.onerror=function(){t(2===e.height)}};function isWorkerEnv(){try{document;return!1}catch(t){return!0}}function getSupport(t){var e={runSupport:(new Date).getTime()},r=isWasmSuppport(),n=navigator.userAgent.toLowerCase(),i=function(t){return-1!==n.indexOf(t)},a=i("macintosh"),o=i("ipad;")||i("ipad "),f=i("ipod touch;"),s=i("iphone;")||i("iphone "),u=s||o||f,l=(a||u)&&i("safari")&&i("version/"),c=i("macwechat"),h=i("windowswechat"),v={KV:!1,qV:a,Ue:!1,g:!1,$e:!1,scale:1,ZV:!1,DW:isWorkerEnv(),YV:r,safari:l,AQ:c,gQ:h,amapRunTime:e};if(isBrowser()){var d=window,_=document,y=_.documentElement,g=/([a-z0-9]*\\d+[a-z0-9]*)/,p="microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965".split(";"),m="ActiveXObject"in d,b=0!=window.detectRetina&&("devicePixelRatio"in d&&1<d.devicePixelRatio||m&&"matchMedia"in d&&d.matchMedia("(min-resolution:144dpi)")&&d.matchMedia("(min-resolution:144dpi)").matches),x=i("windows nt"),S=(n.search(/windows nt [1-5]\\./),n.search(/windows nt 5\\.[12]/),i("windows nt 10"),i("windows phone")),M=i("Mb2345Browser"),C=(u&&n.search(/ os [456]_/),u&&n.search(/ os [4-8]_/),u&&n.search(/ os [78]_/),u&&i("os 8_"),u&&i("os 10_")),A=i("android"),k=0;A&&(k=parseInt(n.split("android")[1])||0);var w,T=A&&k<4,$=(A&&5<=k||n.search(/android 4.4/),A?"android":u?"ios":x?"windows":a?"mac":"other"),I=m&&!d.XMLHttpRequest,L=m&&!_.querySelector,F=m&&!_.addEventListener,P=m&&i("msie 9"),z=m&&i("msie 10"),B=m&&i("rv:11"),E=F||P,O=i("edge"),D=(i("qtweb"),i("ucbrowser")),R=i("alipay")||A&&D,N=(i("miuibrowser"),i("micromessenger")),H=i("dingtalk"),U=i("mqqbrowser"),j=i("baidubrowser"),G=i("crios/"),V=i("chrome/"),W=!((V||G)&&i("chromium"))&&(V&&30<parseInt(n.split("chrome/")[1])||G&&30<parseInt(n.split("crios/")[1])),K=i("firefox"),q=K&&27<parseInt(n.split("firefox/")[1]),Z=l&&7<parseInt(n.split("version/")[1]),Y=(u&&i("aliapp"),A||u||S||i("mobile")),J="ontouchstart"in _,Q=d.navigator&&d.navigator.msPointerEnabled&&!!d.navigator.msMaxTouchPoints,X=d.navigator&&!!d.navigator.maxTouchPoints,tt=!J&&(X||Q),et=J||tt,f=function(){if(!Y)return d.devicePixelRatio||1;var t=document.getElementsByTagName("meta");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;t=window.parent.document.getElementsByTagName("meta")}catch(t){return 1}for(var e=t.length-1;0<=e;--e)if("viewport"===t[e].name){var r=t[e].content,n=void 0,i=void 0,a=void 0;return-1!==r.indexOf("initial-scale")&&(n=parseFloat(r.split("initial-scale=")[1])),i=-1!==r.indexOf("minimum-scale")?parseFloat(r.split("minimum-scale=")[1]):0,a=-1!==r.indexOf("maximum-scale")?parseFloat(r.split("maximum-scale=")[1]):1/0,n?i<=a?a<n?a:n<i?i:n:(console&&console.log&&console.log("viewport参数不合法"),null):i<=a?1<=i?1:Math.min(a,1):(console&&console.log&&console.log("viewport参数不合法"),null)}}(),rt=b&&(!Y||!!f&&1<=f),c=m&&"transition"in y.style,h=!!_.createElementNS&&!!_.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,nt=_.createElement("canvas"),it=!(!nt||!nt.getContext),k=window.URL||window.webkitURL,at=!0!==window.disableWorker&&!m&&!(D&&A&&!W)&&window.Worker&&k&&k.createObjectURL&&window.Blob,ot="",ft="",st=0,G=0!=window.higtQualityRender||!b,S=window.movingDraw,J=window.preserveDrawingBuffer,ut=window.forceWebGL?{alpha:!0,antialias:G,depth:!0,stencil:!0,preserveDrawingBuffer:J}:{alpha:!0,antialias:G,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:void 0===J||J,stencil:!0},_=function(){if(!it||!at)return!1;for(var t=["webgl","experimental-webgl","moz-webgl"],e=null,r=0;r<t.length;r+=1){try{e=nt.getContext(t[r],ut)}catch(t){}if(e){if(e.drawingBufferWidth!==nt.width||e.drawingBufferHeight!==nt.height)return!1;if(!e.getShaderPrecisionFormat||!e.getParameter||!e.getExtension)return!1;st=e.getParameter(e.MAX_RENDERBUFFER_SIZE);var n=e.getParameter(e.MAX_VIEWPORT_DIMS);if(!n)return!1;st=Math.min(st,n[0],n[1]),l&&"mac"==$&&(st=Math.min(st,4096));n=Math.max(screen.width,screen.height);if(rt&&(n*=Math.min(2,window.devicePixelRatio||1)),st<n)return!1;if(e.getShaderPrecisionFormat(35632,36338).precision<23||e.getShaderPrecisionFormat(35633,36338).precision<23)return!1;n=function(t){if(!t)return null;var e=null,r=(t=t.toLowerCase()).match(/angle \\((.*)\\)/);if(r&&(t=(t=r[1]).replace(/\\s*direct3d.*$/,"")),0<=(t=t.replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,"")).indexOf("intel")){e=["Intel"];return 0<=t.indexOf("mobile")&&e.push("Mobile"),(0<=t.indexOf("gma")||0<=t.indexOf("graphics media accelerator"))&&e.push("GMA"),0<=t.indexOf("haswell")?e.push("Haswell"):0<=t.indexOf("ivy")?e.push("HD 4000"):0<=t.indexOf("sandy")?e.push("HD 3000"):0<=t.indexOf("ironlake")?e.push("HD"):(0<=t.indexOf("hd")&&e.push("HD"),(n=t.match(g))&&e.push(n[1].toUpperCase())),e=e.join(" ")}if(0<=t.indexOf("nvidia")||0<=t.indexOf("quadro")||0<=t.indexOf("geforce")||0<=t.indexOf("nvs"))return e=["nVidia"],0<=t.indexOf("geforce")&&e.push("geForce"),0<=t.indexOf("quadro")&&e.push("Quadro"),0<=t.indexOf("nvs")&&e.push("NVS"),t.match(/\\bion\\b/)&&e.push("ION"),t.match(/gtx\\b/)?e.push("GTX"):t.match(/gts\\b/)?e.push("GTS"):t.match(/gt\\b/)?e.push("GT"):t.match(/gs\\b/)?e.push("GS"):t.match(/ge\\b/)?e.push("GE"):t.match(/fx\\b/)&&e.push("FX"),(n=t.match(g))&&e.push(n[1].toUpperCase().replace("GS","")),0<=t.indexOf("titan")?e.push("TITAN"):0<=t.indexOf("ti")&&e.push("Ti"),e=e.join(" ");if(0<=t.indexOf("amd")||0<=t.indexOf("ati")||0<=t.indexOf("radeon")||0<=t.indexOf("firegl")||0<=t.indexOf("firepro")){e=["AMD"],0<=t.indexOf("mobil")&&e.push("Mobility");var n,r=t.indexOf("radeon");return 0<=r&&e.push("Radeon"),0<=t.indexOf("firepro")?e.push("FirePro"):0<=t.indexOf("firegl")&&e.push("FireGL"),0<=t.indexOf("hd")&&e.push("HD"),0<=r&&(t=t.substring(r)),(n=t.match(g))&&e.push(n[1].toUpperCase().replace("HD","")),e=e.join(" ")}return t.substring(0,100)}(ft=e.getExtension("WEBGL_debug_renderer_info")?e.getParameter(37446):null);return n&&-1!==p.indexOf(n)?!1:(ot=t[r],!0)}}return!1},k=_(),G=void 0===t[8]||t[8],J=window.Uint8Array&&G&&!window.forbidenWebGL&&k&&(window.forceWebGL||(W||q||Z||O||N||H)&&"other"!=$),k=window.forceWebGLBaseRender||J?"w":"d",W=i("webkit"),q="WebKitCSSMatrix"in d&&"m11"in new window.WebKitCSSMatrix,Z="MozPerspective"in y.style,H="vV"in y.style,i=c||q||Z||H,y=void 0!==t[12]?t[12]:null,lt=!0;try{void 0===d.localStorage?lt=!1:(w=(new Date).getTime()+"",d.localStorage.setItem("_test",w),d.localStorage.getItem("_test")!==w&&(lt=!1),d.localStorage.removeItem("_test"))}catch(t){lt=!1}t=parseInt(n.split("chrome/")[1]),v={JV:o,QV:s,size:s?100:A?200:500,qV:a,XV:x,tK:u,uT:C,ZV:A,eK:T,cT:R,rK:$,nK:j,iK:U,safari:l,aK:N,ie:m,oK:I,fK:L,sK:P,uK:z,xv:F,fT:E,lK:B,cK:O,hT:m&&!B,lT:M,RL:lt,vT:y,geolocation:Y||m&&!F||O,SL:D,uc:D&&!V,chrome:V,gT:!0,hK:K,$e:Y,vK:Y&&W,dK:Y&&q,_K:Y&&d.opera,Ue:b,bT:f,Mr:rt,KV:et,yK:Q,gK:X,yT:tt,pT:V&&57<=t,mT:!Y&&V&&64<=t,g:W,pK:c,mK:q,bK:Z,xK:H,SK:i,MK:h,CK:it,Eb:at,TT:!1,Tm:J,AT:ot,xT:ut,ST:ft,wT:st,MT:!1,movingDraw:S,baseRender:G?k:"d",scale:b?2:1,getContext:function(t,e){return t.getContext(ot,ut)},mH:!1,YV:r,amapRunTime:e,sY:_};testWepP(function(t){v.mH=t})}return v}var Browser$1=getSupport("undefined"==typeof config?[]:config);"undefined"!=typeof createImageBitmap&&"undefined"!=typeof ImageBitmap&&(Browser$1.imageBitmap=!0);var canceledWorkerFetch=Boolean(Browser$1.DW?!Browser$1.safari&&!Browser$1.AQ&&!Browser$1.gQ&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"):!Browser$1.safari&&!Browser$1.AQ&&!Browser$1.gQ&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty("signal"));Browser$1.LZ=canceledWorkerFetch,Browser$1.amapRunTime={workerTime:{}};var projections={},Projection=(d0.prototype.AK=function(t,e,r){var n=this.getResolution(r),r=e[0]*n,n=e[1]*n,t=this.project(t[0],t[1]);return this.unproject(t[0]+r,t[1]+n)},d0.prototype.kK=function(t,e){t=this.project(t[0],t[1]),e=[t[0]+e[0],t[1]+e[1]];return this.unproject(e[0],e[1])},d0);function d0(t,e,r,n){this.project=e,this.unproject=r,this.getResolution=n,projections[t]=this}var ProjectionManager={getProjection:function(t){return projections[t]}},LngLat=new Projection("EPSG:4326",function(t,e){return[t,e]},function(t,e){return[t,e]},function(t){return.703125/Math.pow(2,t)}),SphericalMercator=(C0=Math.PI/180,D0=180/Math.PI,E0=6378137,new Projection("EPSG:3857",function(t,e){var r=85.0511287798;e=Math.max(Math.min(r,e),-r);t*=C0,e*=C0,e=Math.log(Math.tan(Math.PI/4+e/2));return[t*E0,e*E0]},function(t,e){return[t/E0*D0,(2*Math.atan(Math.exp(e/E0))-Math.PI/2)*D0]},function(t){return 156543.03392804097/Math.pow(2,t)})),C0,D0,E0,LCS=(T0.prototype.setMap=function(t){this.map=t},T0.prototype.getSize=function(){return[this.lg,this.dg]},T0.prototype.getNum=function(){return[this.cg,this.vg]},T0.prototype.getLocalByLnglat=function(t){var e,t=(e=ProjectionManager.getProjection("EPSG:3857")).project.apply(e,t);return this.getLocalByCoord(t)},T0.prototype.getLocalByCoord=function(t){var e=Math.floor(t[0]/this.lg),r=Math.floor(t[1]/this.dg),n=this.getLocalCenterByXY(e,r);return{Sa:[t[0]-n.center[0],t[1]-n.center[1]],x:e,y:r,center:n.center,Ro:n.Ro}},T0.prototype.getLocalCenterByXY=function(t,e){var r={x:t,y:e,center:[0,0],Ro:[0,0,0,0]};return r.center=[(t+.5)*this.lg,(e+.5)*this.dg],r.Ro=[t*this.lg,e*this.dg,(t+1)*this.lg,(e+1)*this.dg],r},T0.prototype.getDeltaCoord=function(t){var e=this.getLocalByCoord(t);return[t[0]-e.center[0],t[1]-e.center[1]]},T0);function T0(){this.hg=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],this.cg=128,this.vg=128,this.lg=(this.hg[2]-this.hg[0])/this.cg,this.dg=(this.hg[3]-this.hg[1])/this.vg}var lcs$4=new LCS,E4326=ProjectionManager.getProjection("EPSG:4326"),E3857=ProjectionManager.getProjection("EPSG:3857"),LngLat$1={Ro:[-180,-90,180,90],project:function(t,e,r){e=E4326.project(t,e);return this.transform(e[0],e[1],r)},unproject:function(t,e,r){r=this.Xs(t,e,r);return E4326.unproject(r[0],r[1])},transform:function(t,e,r){var n=void 0===r?180:256<<r,i=2*n,a=this.Ro[2]-this.Ro[0],r=this.Ro[3]-this.Ro[1];return[t=(t-this.Ro[0])/a*i,e=n-(e-this.Ro[1])/r*n]},Xs:function(t,e,r){r=void 0===r?180:256<<r;return[t=360*(t/(2*r)-.5),e=180*-(e/r-.5)]},nt:function(t,e,r){return this.Xs(t,e,r)},wu:function(t,e,r){return this.Xs(t,e,r)},yo:function(t,e,r){var n=0,n=0<t/this.Ro[3]?Math.abs(Math.floor(t/this.Ro[3])):Math.abs(Math.ceil(t/this.Ro[3])),i=0,i=0<e/this.Ro[3]?Math.abs(Math.floor(e/this.Ro[3])):Math.abs(Math.ceil(e/this.Ro[3])),a=t%this.Ro[3],o=e%this.Ro[3],o=this.transform(a,o,r);t=this.wu(t,t,r)[0]*n+o[0],e=this.wu(e,e,r)[1]*i+o[1];r=this.transform(0,0,r);return[t-r[0],e-r[1]]},Bb:function(t,e,r){return r.X(t,e)},qb:function(t,e,r){return r.H(t,e)},Gd:function(t,e,r,n){var i=n.X(t[0],t[1]),r=n.X(t[0]+e,t[1]+r);return[r[0]-i[0],r[1]-i[1]]}},SphericalMercator$1={Ro:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],project:function(t,e,r){e=E3857.project(t,e);return this.transform(e[0],e[1],r)},unproject:function(t,e,r){r=this.Xs(t,e,r);return E3857.unproject(r[0],r[1])},transform:function(t,e,r){var n;t=Math.min(20037508.342789244,Math.max(t,-20037508.342789244)),e=Math.min(20037508.342789244,Math.max(e,-20037508.342789244)),n=void 0===r?40075016.68557849:256*Math.pow(2,r);var i=this.Ro[2]-this.Ro[0],r=this.Ro[3]-this.Ro[1];return[t=(t-this.Ro[0])/i*n,e=n-(e-this.Ro[1])/r*n]},Xs:function(t,e,r){r=void 0===r?40075016.68557849:256*Math.pow(2,r);return[t=(t/r-.5)*this.Ro[2]*2,e=-(e/r-.5)*this.Ro[2]*2]},nt:function(t,e,r,n){return[t=this.Xs(t,e,r)[0]-this.Ro[0],e=this.Ro[2]-this.Xs(t,e,r)[1]]},wu:function(t,e,r,n){var i=n.center,a=n.size,n=(n.rotation||0)/180*Math.PI,t=this.transform(t,e,r),e=t[0],t=t[1],i=this.transform(i[0],i[1],r),r=e-i[0],e=t-i[1],t=Math.sqrt(Math.pow(r,2)+Math.pow(e,2)),i=0==e?Math.PI/2:Math.atan(Math.abs(r/e)),n=r*e<=0?i+n:i-n,r=0<r?n:-n,e=0<e?1:-1;return[a[0]/2+t*Math.sin(r),a[1]/2+t*Math.cos(n)*e]},yo:function(t,e,r,n){var i=0,i=0<t/this.Ro[3]?Math.abs(Math.floor(t/this.Ro[3])):Math.abs(Math.ceil(t/this.Ro[3])),a=0,a=0<e/this.Ro[3]?Math.abs(Math.floor(e/this.Ro[3])):Math.abs(Math.ceil(e/this.Ro[3])),o=t%this.Ro[3],f=e%this.Ro[3],o=this.transform(o,f,r),f=this.transform(0,0,r),r=f[0],f=f[1];return[(t=r*i+o[0])-r,(e=f*a+o[1])-f]},Bb:function(t,e,r){return r.X(t,e)},qb:function(t,e,r){return r.H(t,e)},Gd:function(t,e,r,n){var i=n.X(t[0],t[1]),r=n.X(t[0]+e,t[1]+r);return[r[0]-i[0],r[1]-i[1]]}},transform={"EPSG:4326":LngLat$1,"EPSG:3857":SphericalMercator$1},labelsUtil$2={Bj:function(t){void 0===t&&(t={});var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=1);return r},zj:function(t,e){t.gs=e,t.qj=e.options||{},t.Wj=e.Wj||{},t.Fs=e.Fs||{},t.Gj=e.Gj||{},t.Hj=e.Hj||{},t.Vj=e.Vj||{},t.$j=e.$j||0},Yj:function(t,e){void 0===t&&(t=[NaN,NaN,NaN,NaN]),void 0===e&&(e=[0,0,0,1]);for(var r=0;r<t.length;r++){var n=t[r];isNaN(n)&&(t[r]=e[r])}return t},Kj:function(t){return[((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255,1]},Xj:function(t,e){void 0===e&&(e={});for(var r=[],n=e.qw,i=e.Aw,a=e.complete,o=0,f=t;o<f.length;o++){var s=f[o],s=new Promise(s);r.push(s)}var u=0;Promise.all(r).then(function(){n&&n.apply(void 0,arguments),a&&!u&&(u=1,a.apply(void 0,arguments))}).catch(function(){i&&i.apply(void 0,arguments),a&&!u&&(u=1,a.apply(void 0,arguments))})},Jj:function(t,e){var r=t[0],n=void 0===r?0:r,i=t[1],a=void 0===i?0:i,r=e[0],i=void 0===r?0:r,r=e[1],r=void 0===r?0:r,t=n<=i?i<=a?r<a?[i,r]:[i,a]:null:labelsUtil$2.Jj(e,t);return t},measureText:function(t,e,r,n){if(void 0===e&&(e=""),void 0===n&&(n="3D"),"3D"===n)return t.measureText(e,r)},lnglatToContainer:function(t,e){e=e.zoom;if((void 0===e?20:e)<LocalZoom)return t;e=lcs$4.getLocalByCoord(t);return vector$3.Ip(t,e.center)},Sd:function(t,e){var r=t[0],n=void 0===r?0:r,r=t[1],t=void 0===r?0:r,r=e[0],r=void 0===r?0:r,e=e[1],e=void 0===e?0:e,n=Math.abs(r-n),t=Math.abs(e-t);return Math.sqrt(Math.pow(n,2)+Math.pow(t,2))},getAngle:function(t,e){var r=t[0],n=void 0===r?0:r,r=t[1],t=void 0===r?0:r,r=e[0],r=void 0===r?0:r,e=e[1],n=r-n,t=(void 0===e?0:e)-t;return 0==n?t<0?3*Math.PI/2:Math.PI/2:0===(t=Math.atan(t/n))||0<t?0<=n?t:t+Math.PI:0<n?2*Math.PI+t:Math.PI+t},Fd:function(t,e,r){for(var n=t[0],i=void 0===n?0:n,t=t[1],a=void 0===t?0:t,t=e[0],t=void 0===t?0:t,e=e[1],o=t-i,f=(void 0===e?0:e)-a,s=[],u=0;u<r;){var l=[i+o/(r+1)*(u+1),a+f/(r+1)*(u+1)];s.push(l),u++}return s},OG:function(t,e,r){return 0===r?t:[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]},Ed:function(t,e){void 0===t&&(t=[]),void 0===e&&(e="ch");var r=t.length;if(!r)return!1;var n=t[0],i=t[4<=r?Math.floor(r/4*3):r-1],a=n[0],t=n[1],r=i[0],n=i[1],i=(n-t)/(r-a),t=[r-a,n-t],t="ch"===e&&1<Math.abs(i)?vector$3.Zj(t,[0,1]):vector$3.Zj(t,[1,0]);return t<0},Nd:function(t,e,r){var n,i=t[0],a=t[1],o=e[0],t=e[1],e=(t-a)/(o-i),a=[o-i,t-a];return 1<Math.abs(e)&&"x"!==r?(n=0<vector$3.Zj(a,[0,-1])?vector$3.Qj(a,[0,-1]):vector$3.Qj(a,[0,1]),0<e&&(n=-n)):(n=0<vector$3.Zj(a,[1,0])?vector$3.Qj(a,[1,0]):vector$3.Qj(a,[-1,0]),e<0&&(n=-n)),n},Od:function(t,e,r){var n=r*Math.sin(e),e=r*Math.cos(e);return[t[0]+e,t[1]+n]},jd:function(t,e,r,n){var i=vector$3.Ip(t,e),a=vector$3.length(i),t=vector$3.Ip(r,e),r=vector$3.length(t),i=vector$3.Zj(i,t),i=Math.acos(i/(a*r)),r=Math.PI-i,i=a*Math.sin(r),r=a*Math.cos(r),n=Math.sqrt(Math.pow(n,2)-Math.pow(i,2))-r,i=0===t[0]?0<t[1]?Math.PI/2:-Math.PI/2:Math.atan(t[1]/t[0]),r=Math.abs(n*Math.sin(i)),i=n*Math.cos(i),r=[0<=vector$3.Zj(t,[1,0])?i:-i,0<=vector$3.Zj(t,[0,1])?r:-r];return vector$3.add(e,r)},rank:function(t){for(var e=[],r=0;r<t.length;r++){var n=parseInt(t[r],10);n<0&&(t.splice(r--,1),e.push(n+""))}return t=e.concat(t)},$p:function(t){var e=CONSTS.Mp,r=CONSTS.Rp;return 20<=t[1]&&(t[1]=r),t[0]<=3&&(t[0]=e),t},toString:function(t,e){void 0===e&&(e=4);var r="";if(!t)return r;for(var n=0,i=t;n<i.length;n++){var a=i[n];r+=(a+"").length<e?a:a.toFixed(e)}return r},xf:function(t,e){var r,n,i,a=[],o=e.ja,f=e.Fa,s=e.Oa,u=e.Ea;for(r in t)t.hasOwnProperty(r)&&r!==CONSTS.gH&&r!==CONSTS.FN&&r!==CONSTS.RB&&("shields"!==r&&o?(i=r.split("-"),n=parseInt(i[1],10),i=parseInt(i[2],10),o<=n&&n<=s&&f<=i&&i<=u&&a.push(t[r])):a.push(t[r]));return a.length||(a=t),a},EQ:function(t,e){for(var r=[],n=e.length,i=0;i<n-1;i++){var a=t.substring(e[i],e[i+1]);r.push(a)}return n||(r=t.split("")),r},aQ:function(t){for(var e=[],r=0;r<t.length;r++){for(var n=t[r],i=[],a=0;a<n.length;a++){var o=n.charCodeAt(a);i.push(o)}var f=i.join("|");e.push(f)}return e},tQ:function(t,e,r){var n="",i=[],a="";if(t.name)if(t.JQ&&0<t.JQ.length)n=getSpiltLineWithSpiltIndex(t.name,t.JQ),a="ch";else if(r){var o=r.lineBreak(t.name,{from:"labelsLayer",CO:[]}),f=0,s="";if(2<=o.oQ.length){for(var u=1,l=o.oQ.length-1;u<l;u++)s+=t.name.slice(f,o.oQ[u])+" ",f=o.oQ[u];s+=t.name.slice(f)}else s=t.name;n=s,a="ch"}else n=t.name,a="ch";else{switch(e){case"en":n=t.wK,i=t.iQ,a="en";break;case"local":n=t.QQ,i=t.$G,a=t.CQ;break;case"zh_cn":n=t.BQ,a="ch";break;default:n=t.BQ,a="ch"}n||(t.wK?(n=t.wK,i=t.iQ,a="en"):t.QQ&&(n=t.QQ,i=t.$G,a=t.QQ))}return{name:n,$G:i,type:a}}},vector$3={add:function(t,e){for(var r=[],n=0;n<t.length;n++)r[n]=t[n]+e[n];return r},Ip:function(t,e){for(var r=[],n=0;n<t.length;n++)r.push(t[n]-e[n]);return r},multiply:function(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n];r.push(a*e)}return r},Up:function(t,e){for(var r=[],n=0;n<t.length;n++)r[n]=t[n]/e;return r},tA:function(t){return this.multiply(t,-1)},Zj:function(t,e){var r=t[0],n=void 0===r?0:r,r=t[1],t=void 0===r?0:r,r=e[0],r=void 0===r?0:r,e=e[1];return n*r+t*(void 0===e?0:e)},Qj:function(t,e){var r=vector$3.Zj(t,e),t=vector$3.length(t),e=vector$3.length(e);return Math.acos(r/(t*e))},length:function(t){var e=t[0],t=t[1];return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}};function getSpiltLineWithSpiltIndex(t,e){if(e.shift(),0===e.length)return t;for(var r="",n=0,i=0,a=e.length;i<a;i++)r+=t.substr(n,e[i]-n)+" ",n=e[i];return r+=t.substr(e[e.length-1])}var scale$1=Browser$1.scale,LabelsRenderUtil$3={getBounds:function(t,e){void 0===e&&(e={});var r=e.zoom,n=e.centerCoord,i=(e.view,[150*scale$1,150*scale$1,150*scale$1,150*scale$1]),a=t.boundsCoord,o=a[0],f=a[1],s=a[2],u=a[3],t=this.nt(0,0,r,e),a=vector$3.Ip(this.nt(i[0],i[1],r,e),t),t=vector$3.Ip(this.nt(i[2],i[3],r,e),t),r=LocalZoom<=r?n:[0,0],n=r[0],r=r[1];return[[o-n-Math.abs(t[1]),f-r-Math.abs(t[0])],[s-n+Math.abs(a[1]),u-r+Math.abs(a[0])]]},gz:function(t,e){var r=e[0],n=e[1],i=t[0],e=t[1],t=i-r[0],r=e-r[1],i=n[0]-i,e=n[1]-e;return 0<=t&&0<=r&&0<=i&&0<=e},wz:function(t,e){void 0===e&&(e={});var r=e.forceShow,r=void 0===r?0:r,e=e._z,e=void 0===e?0:e,t=(t.data||{}).rank||1;return t=r?t-1e5:2e5*(e/100)+t},wu:function(t,e,r,n){if(void 0===t&&(t=0),void 0===e&&(e=0),n){var i=n.$n,a=n.size,o=n.transform,f=n.view,s=n.viewMode,u=n.centerCoord,n=n.RV;if("2D"!==s)return"relative"===(void 0===n?"relative":n)?f.H(t,e):f._u(t,e);a={center:i.centerCoord,rotation:i.rotation,size:a},i=i.optimalZoom>=LocalZoom?u:[0,0],u=i[0],i=i[1];return o.wu(t+u,e+i,r,a)}},kz:function(t,e,r,n){void 0===t&&(t=[]),void 0===n&&(n={});n=n.centerCoord;if(e<LocalZoom&&LocalZoom<=r){for(var i=n[0],a=n[1],o=[],f=0,s=t;f<s.length;f++){var u=s[f];o.push([u[0]-i,u[1]-a])}return o}return t},nt:function(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0);var i=n.view,a=n.transform;return"2D"===n.viewMode?a.nt(t,e,r):i.X(t,e)},MG:function(t,e){return t<LocalZoom-1&&(e=[0,0]),e}};function isLngLat(t){return t&&"AMap.LngLat"===t.className}function isNumber(t){t=+t;return"number"==typeof+t&&!isNaN(t)}function isNumberArray(t){return Array.isArray(t)&&isNumber(t[0])}function parseLngLatData(t){if(Array.isArray(t)){if(!Array.isArray(t[0])){var e=typeof t[0];return"string"==e||"number"==e?new LngLat$2(t[0],t[1]):t}for(var r=0;r<t.length;r+=1)t[r]=parseLngLatData(t[r])}return t}var Coordinate={lr:function(t,e){for(var r=1/0,n=0,i=1,a=e.length;i<a;n=i,i+=1)r=Math.min(r,this.ur(t,[e[n],e[i]]));return Math.sqrt(r)},ur:function(t,e){return this.cr(t,this.closestOnSegment(t,e))},cr:function(t,e){var r=t[0]-e[0],e=t[1]-e[1];return r*r+e*e},pr:function(t,e,r,n){if(n=n||1e-6,r[0]===e[0]){var i=Math.min(e[1],r[1]),a=Math.max(e[1],r[1]);return Math.abs(t[0]-r[0])<n&&t[1]>=i&&t[1]<=a}i=Math.min(e[0],r[0]),a=Math.max(e[0],r[0]),e=(r[1]-e[1])/(r[0]-e[0])*(t[0]-e[0])+e[1];return Math.abs(e-t[1])<n&&t[0]>=i&&t[0]<=a},closestOnSegment:function(t,e){var r,n=t[0],i=t[1],a=e[0],o=e[1],f=a[0],s=a[1],t=o[0],e=o[1],a=t-f,o=e-s,i=0==a&&0==o?0:(a*(n-f)+o*(i-s))/(a*a+o*o||0),o=i<=0?(r=f,s):1<=i?(r=t,e):(r=f+i*a,s+i*o);return[r,o]},isClockwise:function(t){for(var e,r,n=t.length,i=0,a=t[n-1],o=a[0],f=a[1],s=0;s<n;s+=1)i+=((e=(r=t[s])[0])-o)*((r=r[1])+f),o=e,f=r;return 0<i},ss:function(t,e,r){for(var n=t[0],i=t[1],a=!1,o=e.length,f=0,s=o-1;f<o;s=f,f+=1){var u=!1,l=e[f][0],c=e[f][1],h=e[s][0],v=e[s][1];if(l===n&&c===i||h===n&&v===i)return!!r;if(c<i==i<=v){l=(h-l)*(i-c)/(v-c)+l;if(n===l)return!!r;u=n<l}u&&(a=!a)}return a},dr:function(t,e){for(var r,n,i=function(t,e,r){return(r[0]-e[0])*(t[1]-e[1])>(r[1]-e[1])*(t[0]-e[0])},a=function(t,e,r,n){var i=[t[0]-e[0],t[1]-e[1]],a=[r[0]-n[0],r[1]-n[1]],e=t[0]*e[1]-t[1]*e[0],r=r[0]*n[1]-r[1]*n[0],n=1/(i[0]*a[1]-i[1]*a[0]);return[(e*a[0]-r*i[0])*n,(e*a[1]-r*i[1])*n]},o=t,f=e[e.length-2],s=0,u=e.length-1;s<u;s++){r=e[s];for(var l=o,o=[],c=l[l.length-1],h=0,v=l.length;h<v;h++)i(n=l[h],f,r)?(i(c,f,r)||o.push(a(f,r,c,n)),o.push(n)):i(c,f,r)&&o.push(a(f,r,c,n)),c=n;f=r}return o.length<3?[]:(o.push(o[0]),o)}},Pixel=(gba.prototype.getX=function(){return this.x},gba.prototype.round=function(){return new gba(Math.round(this.x),Math.round(this.y))},gba.prototype.getY=function(){return this.y},gba.prototype.toString=function(){return this.x+","+this.y},gba.prototype.equals=function(t){return t instanceof gba&&Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))<=1e-9},gba.prototype.toArray=function(){return[this.x,this.y]},gba.prototype.subtract=function(t,e){return new gba(this.x-t.x,this.y-t.y,e)},gba.prototype.multiplyBy=function(t,e){return new gba(this.x*t,this.y*t,e)},gba.prototype.direction=function(){var t=this.x,e=this.y;if(0===t&&0===e)return null;if(0===t)return 0<e?90:270;var r=180*Math.atan(e/t)/Math.PI;return t<0&&0<e||t<0&&e<0?180+r:0<t&&e<0?360+r:r},gba.prototype.toJSON=function(){return[this.x,this.y]},gba);function gba(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.Pixel",isNaN(t)||isNaN(e))throw new Error("Invalid Object: Pixel("+t+", "+e+")");this.x=r?Math.round(t):Number(t),this.y=r?Math.round(e):Number(e)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(t){return t&&t.gP&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}function getCjsExportFromNamespace(t){return t&&t.default||t}var dist=createCommonjsModule(function(t,e){!function(t){function r(t,e){return e<t?1:t<e?-1:0}var p=function(t,e){void 0===t&&(t=r),void 0===e&&(e=!1),this.bP=t,this.yP=null,this._size=0,this.mP=!!e},e={size:{configurable:!0}};p.prototype.TP=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this.yP=e,e&&(e.left=t),t.parent=e},p.prototype.wP=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this.yP=e,e&&(e.right=t),t.parent=e},p.prototype.AP=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.wP(e.parent),this.wP(e)):e.right===t&&e.parent.right===e?(this.TP(e.parent),this.TP(e)):e.left===t&&e.parent.right===e?(this.wP(e),this.TP(e)):(this.TP(e),this.wP(e)):e.left===t?this.wP(e):this.TP(e)}},p.prototype.xP=function(t){for(var e,r,n,i;t.parent;)(r=(e=t.parent).parent)&&r.parent?((i=r.parent).left===r?i.left=t:i.right=t,t.parent=i):(t.parent=null,this.yP=t),n=t.left,i=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,(e.right=r).parent=e):(n?(r.right=n).parent=r:r.right=null,(t.left=r).parent=t)),i?(e.left=i).parent=e:e.left=null,(t.right=e).parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,(e.left=r).parent=e):(i?(r.left=i).parent=r:r.left=null,(t.right=r).parent=t)),n?(e.right=n).parent=e:e.right=null,(t.left=e).parent=t)},p.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this.yP=e,e&&(e.parent=t.parent)},p.prototype.MP=function(t){if(void 0===t&&(t=this.yP),t)for(;t.left;)t=t.left;return t},p.prototype.SP=function(t){if(void 0===t&&(t=this.yP),t)for(;t.right;)t=t.right;return t},p.prototype.Xc=function(t,e){var r=this.yP,n=null,i=this.bP;if(this.mP)for(;r;){if(0===i((n=r).key,t))return;r=i(r.key,t)<0?r.right:r.left}else for(;r;)r=i((n=r).key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:n},n?i(n.key,r.key)<0?n.right=r:n.left=r:this.yP=r,this.xP(r),this._size++,r},p.prototype.find=function(t){for(var e=this.yP,r=this.bP;e;){var n=r(e.key,t);if(n<0)e=e.right;else{if(!(0<n))return e;e=e.left}}return null},p.prototype.contains=function(t){for(var e=this.yP,r=this.bP;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},p.prototype.remove=function(t){var e=this.find(t);return!!e&&(this.xP(e),e.left?e.right?((t=this.MP(e.right)).parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t):this.replace(e,e.left):this.replace(e,e.right),this._size--,!0)},p.prototype.removeNode=function(t){return!!t&&(this.xP(t),t.left?t.right?((e=this.MP(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0);var e},p.prototype.$P=function(t){var e,r=this.find(t);r&&(this.xP(r),e=r.left,t=r.right,r=null,e&&(e.parent=null,r=this.SP(e),this.xP(r),this.yP=r),t&&(e?r.right=t:this.yP=t,t.parent=r),this._size--)},p.prototype.pop=function(){var t=this.yP,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},p.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)e=(t=e).parent;return e},p.prototype.NM=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)e=(t=e).parent;return e},p.prototype.forEach=function(t){for(var e=this.yP,r=[],n=!1,i=0;!n;)e?(r.push(e),e=e.left):0<r.length?(t(e=r.pop(),i++),e=e.right):n=!0;return this},p.prototype.range=function(t,e,r,n){for(var i=[],a=this.bP,o=this.yP;0!==i.length||o;)if(o)i.push(o),o=o.left;else{if(0<a((o=i.pop()).key,e))break;if(0<=a(o.key,t)&&r.call(n,o))return this;o=o.right}return this},p.prototype.keys=function(){for(var t=this.yP,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.key),t=t.right):n=!0;return r},p.prototype.values=function(){for(var t=this.yP,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.data),t=t.right):n=!0;return r},p.prototype.at=function(t){for(var e=this.yP,r=[],n=!1,i=0;!n;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},p.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=t.length;return r&&function t(e,r,n,i,a){if(!(i<=n)){for(var o=e[n+i>>1],f=n-1,s=i+1;;){for(;f++,a(e[f],o)<0;);for(;s--,0<a(e[s],o););if(s<=f)break;var u=e[f];e[f]=e[s],e[s]=u,u=r[f],r[f]=r[s],r[s]=u}t(e,r,n,s,a),t(e,r,s+1,i,a)}}(t,e,0,n-1,this.bP),this.yP=function t(e,r,n,i,a){var o=a-i;if(0<o)return o=i+Math.floor(o/2),(e={key:r[o],data:n[o],parent:e}).left=t(e,r,n,i,o),e.right=t(e,r,n,o+1,a),e;return null}(null,t,e,0,n),this._size=n,this},p.prototype.min=function(){var t=this.MP(this.yP);return t?t.key:null},p.prototype.max=function(){var t=this.SP(this.yP);return t?t.key:null},p.prototype.isEmpty=function(){return null===this.yP},e.size.get=function(){return this._size},p.LP=function(t,e,r,n,i){return new p(r,i).load(t,e,n)},Object.defineProperties(p.prototype,e);var a=0,o=1,f=2,s=3,m=0,b=1,x=2,S=3;function M(t,e,r){null===e?(t.PP=!1,t.OP=!0):(t._P===e._P?(t.PP=!e.PP,t.OP=e.OP):(t.PP=!e.OP,t.OP=e.NP()?!e.PP:e.PP),e&&(t.CP=!n(e,r)||e.NP()?e.CP:e));e=n(t,r);t.hN=e?function(t,e){var r,n=!t.PP,i=!t.OP;switch(e){case m:r=n&&i;break;case b:r=n||i;break;case S:r=n^i;break;case x:r=t._P?n&&!i:i&&!n}return r?1:-1}(t,r):0}function n(t,e){switch(t.type){case a:switch(e){case m:return!t.OP;case b:return t.OP;case x:return t._P&&t.OP||!t._P&&!t.OP;case S:return!0}break;case f:return e===m||e===b;case s:return e===x;case o:return!1}return!1}var h=function(t,e,r,n,i){this.left=e,this.kP=t,this.IP=r,this._P=n,this.type=i||a,this.PP=!1,this.OP=!1,this.CP=null,this.hN=0,this.lN=-1,this.dN=-1,this.DP=!0},e={EP:{configurable:!0}};function u(t,e){return t[0]===e[0]&&t[1]===e[1]}h.prototype.FP=function(t){var e=this.kP,r=this.IP.kP;return this.left?0<(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]):0<(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])},h.prototype.RP=function(t){return!this.FP(t)},h.prototype.NP=function(){return this.kP[0]===this.IP.kP[0]},e.EP.get=function(){return 0!==this.hN},h.prototype.clone=function(){var t=new h(this.kP,this.left,this.IP,this._P,this.type);return t.UP=this.UP,t.hN=this.hN,t.CP=this.CP,t.DP=this.DP,t.PP=this.PP,t.OP=this.OP,t},Object.defineProperties(h.prototype,e);var w=134217729,T=(3+8*(e=11102230246251565e-32))*e;function $(t,e,r,n,i){var a,o,f,s,u=e[0],l=n[0],c=0,h=0;u<l==-u<l?(a=u,u=e[++c]):(a=l,l=n[++h]);var v=0;if(c<t&&h<r)for(u<l==-u<l?(f=a-((o=u+a)-u),u=e[++c]):(f=a-((o=l+a)-l),l=n[++h]),a=o,0!==f&&(i[v++]=f);c<t&&h<r;)u<l==-u<l?(f=a-((o=a+u)-(s=o-a))+(u-s),u=e[++c]):(f=a-((o=a+l)-(s=o-a))+(l-s),l=n[++h]),a=o,0!==f&&(i[v++]=f);for(;c<t;)f=a-((o=a+u)-(s=o-a))+(u-s),u=e[++c],a=o,0!==f&&(i[v++]=f);for(;h<r;)f=a-((o=a+l)-(s=o-a))+(l-s),l=n[++h],a=o,0!==f&&(i[v++]=f);return 0===a&&0!==v||(i[v++]=a),v}function i(t){return new(commonjsGlobal.Float64Array?Float64Array:Array)(t)}var l=(3+16*e)*e,I=(2+12*e)*e,L=(9+64*e)*e*e,F=i(4),P=i(8),z=i(12),B=i(16),E=i(4);function c(t,e,r,n,i,a,o){var f,s,u,l,c,h,v,d,_,y=t-i,g=r-i,p=e-a,m=n-a,b=y*m,x=w*y,S=x-(x-y),M=y-S,C=(h=M*(s=m-(f=(x=w*m)-(x-m)))-(b-S*f-M*f-S*s))-(u=h-(d=(M=p-(S=(x=w*p)-(x-p)))*(s=g-(f=(x=w*g)-(x-g)))-((v=p*g)-S*f-M*f-S*s)));F[0]=h-(u+C)+(C-d),C=(c=b-((l=b+u)-(C=l-b))+(u-C))-(u=c-v),F[1]=c-(u+C)+(C-v),C=(_=l+u)-l,F[2]=l-(_-C)+(u-C),F[3]=_;var A=function(t,e){for(var r=e[0],n=1;n<t;n++)r+=e[n];return r}(4,F),k=I*o;if(k<=A||k<=-A)return A;if(t=t-(y+(C=t-y))+(C-i),i=r-(g+(C=r-g))+(C-i),e=e-(p+(C=e-p))+(C-a),a=n-(m+(C=n-m))+(C-a),0==t&&0==e&&0==i&&0==a)return A;if((k=L*o+T*Math.abs(A))<=(A+=y*a+m*t-(p*i+g*e))||k<=-A)return A;C=(h=(M=t-(S=(x=w*t)-(x-t)))*(s=m-(f=(x=w*m)-(x-m)))-((b=t*m)-S*f-M*f-S*s))-(u=h-(d=(M=e-(S=(x=w*e)-(x-e)))*(s=g-(f=(x=w*g)-(x-g)))-((v=e*g)-S*f-M*f-S*s))),E[0]=h-(u+C)+(C-d),C=(c=b-((l=b+u)-(C=l-b))+(u-C))-(u=c-v),E[1]=c-(u+C)+(C-v),C=(_=l+u)-l,E[2]=l-(_-C)+(u-C),E[3]=_;g=$(4,F,4,E,P);C=(h=(M=y-(S=(x=w*y)-(x-y)))*(s=a-(f=(x=w*a)-(x-a)))-((b=y*a)-S*f-M*f-S*s))-(u=h-(d=(M=p-(S=(x=w*p)-(x-p)))*(s=i-(f=(x=w*i)-(x-i)))-((v=p*i)-S*f-M*f-S*s))),E[0]=h-(u+C)+(C-d),C=(c=b-((l=b+u)-(C=l-b))+(u-C))-(u=c-v),E[1]=c-(u+C)+(C-v),C=(_=l+u)-l,E[2]=l-(_-C)+(u-C),E[3]=_;g=$(g,P,4,E,z);C=(h=(M=t-(S=(x=w*t)-(x-t)))*(s=a-(f=(x=w*a)-(x-a)))-((b=t*a)-S*f-M*f-S*s))-(u=h-(d=(M=e-(S=(x=w*e)-(x-e)))*(s=i-(f=(x=w*i)-(x-i)))-((v=e*i)-S*f-M*f-S*s))),E[0]=h-(u+C)+(C-d),C=(c=b-((l=b+u)-(C=l-b))+(u-C))-(u=c-v),E[1]=c-(u+C)+(C-v),C=(_=l+u)-l,E[2]=l-(_-C)+(u-C),E[3]=_;g=$(g,z,4,E,B);return B[g-1]}function v(t,e,r){var n,i,a,o,f,s,e=(n=t[0],i=t[1],a=e[0],o=e[1],f=r[0],s=r[1],r=(t=(i-s)*(a-f))-(e=(n-f)*(o-s)),0==t||0==e||0<t!=0<e?r:(e=Math.abs(t+e),Math.abs(r)>=l*e?r:-c(n,i,a,o,f,s,e)));return 0<e?-1:e<0?1:0}function C(t,e){var r=t.kP,n=e.kP;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:(e=e,r=r,(t=t).left===e.left?0===v(r,t.IP.kP,e.IP.kP)?!t._P&&e._P?1:-1:t.FP(e.IP.kP)?-1:1:t.left?1:-1)}function d(t,e,r){var n=new h(e,!1,t,t._P),e=new h(e,!0,t.IP,t._P);return u(t.kP,t.IP.kP)&&console.warn("what is that, a collapsed segment?",t),n.UP=e.UP=t.UP,0<C(e,t.IP)&&(t.IP.left=!0,e.left=!1),t.IP.IP=e,t.IP=n,r.push(e),r.push(n),r}function _(t,e){return t[0]*e[1]-t[1]*e[0]}function y(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,r){var n=function(t,e,r,n,i){var a=[e[0]-t[0],e[1]-t[1]],o=[n[0]-r[0],n[1]-r[1]];function f(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var s=[r[0]-t[0],r[1]-t[1]],u=_(a,o),l=u*u,c=y(a,a);if(0<l){e=_(s,o)/u;if(e<0||1<e)return null;n=_(s,a)/u;return n<0||1<n?null:0==e||1==e?i?null:[f(t,e,a)]:0==n||1==n?i?null:[f(r,n,o)]:[f(t,e,a)]}return 0<(u=_(s,a))*u?null:(s=y(a,s)/c,o=s+y(a,o)/c,c=Math.min(s,o),o=Math.max(s,o),c<=1&&0<=o?1===c?i?null:[f(t,0<c?c:0,a)]:0===o?i?null:[f(t,o<1?o:1,a)]:i&&0===c&&1===o?null:[f(t,0<c?c:0,a),f(t,o<1?o:1,a)]:null)}(t.kP,t.IP.kP,e.kP,e.IP.kP),i=n?n.length:0;if(0===i)return 0;if(1===i&&(u(t.kP,e.kP)||u(t.IP.kP,e.IP.kP)))return 0;if(2===i&&t._P===e._P)return 0;if(1===i)return u(t.kP,n[0])||u(t.IP.kP,n[0])||d(t,n[0],r),u(e.kP,n[0])||u(e.IP.kP,n[0])||d(e,n[0],r),1;var a=[],i=!1,n=!1;return u(t.kP,e.kP)?i=!0:1===C(t,e)?a.push(e,t):a.push(t,e),u(t.IP.kP,e.IP.kP)?n=!0:1===C(t.IP,e.IP)?a.push(e.IP,t.IP):a.push(t.IP,e.IP),i&&n||i?(e.type=o,t.type=e.PP===t.PP?f:s,i&&!n&&d(a[1].IP,a[0].kP,r),2):(n?d(a[0],a[1].kP,r):a[0]!==a[3].IP?(d(a[0],a[1].kP,r),d(a[1],a[2].kP,r)):(d(a[0],a[1].kP,r),d(a[3].IP,a[2].kP,r)),3)}function k(t,e){if(t===e)return 0;if(0!==v(t.kP,t.IP.kP,e.kP)||0!==v(t.kP,t.IP.kP,e.IP.kP))return u(t.kP,e.kP)?t.FP(e.IP.kP)?-1:1:t.kP[0]===e.kP[0]?t.kP[1]<e.kP[1]?-1:1:1===C(t,e)?e.RP(t.kP)?-1:1:t.FP(e.kP)?-1:1;if(t._P!==e._P)return t._P?-1:1;var r=t.kP,n=e.kP;return r[0]===n[0]&&r[1]===n[1]?(r=t.IP.kP,n=e.IP.kP,r[0]===n[0]&&r[1]===n[1]?0:t.UP>e.UP?1:-1):1===C(t,e)?1:-1}var g=function(){this.points=[],this.vN=[],this.gN=null,this.depth=null};function O(t){for(var l=function(t){for(var e,r,n=[],i=0,a=t.length;i<a;i++)((e=t[i]).left&&e.EP||!e.left&&e.IP.EP)&&n.push(e);for(var o=!1;!o;)for(o=!0,i=0,a=n.length;i<a;i++)i+1<a&&1===C(n[i],n[i+1])&&(r=n[i],n[i]=n[i+1],n[i+1]=r,o=!1);for(i=0,a=n.length;i<a;i++)(e=n[i]).lN=i;for(i=0,a=n.length;i<a;i++)(e=n[i]).left||(r=e.lN,e.lN=e.IP.lN,e.IP.lN=r);return n}(t),c={},h=[],e=function(){if(!c[v]){var t,e,r,n,i=h.length,a=(t=l[v],e=h,r=i,u=new g,null!=t.CP?(t=(n=t.CP).dN,0<n.hN?null!=(n=e[t]).gN?(e[n=n.gN].vN.push(r),u.gN=n,u.depth=e[t].depth):(e[t].vN.push(r),u.gN=t,u.depth=e[t].depth+1):(u.gN=null,u.depth=e[t].depth)):(u.gN=null,u.depth=0),u),o=function(t){c[t]=!0,l[t].dN=i},f=v,s=v,u=l[v].kP;for(a.points.push(u);o(f),o(f=l[f].lN),a.points.push(l[f].kP),(f=function(t,e,r,n){var i,a=t+1,o=e[t].kP,f=e.length;for(a<f&&(i=e[a].kP);a<f&&i[0]===o[0]&&i[1]===o[1];){if(!r[a])return a;i=e[++a].kP}for(a=t-1;r[a]&&n<a;)a--;return a}(f,l,c,s))!=s;);h.push(a)}},v=0,r=l.length;v<r;v++)e();return h}g.prototype.pN=function(){return null==this.gN};var D=R,e=R;function R(t,e){if(!(this instanceof R))return new R(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||N,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this.zP(r)}function N(t,e){return t<e?-1:e<t?1:0}R.prototype={push:function(t){this.data.push(t),this.length++,this.El(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this.zP(0)),this.data.pop(),t}},GP:function(){return this.data[0]},El:function(t){for(var e=this.data,r=this.compare,n=e[t];0<t;){var i=t-1>>1,a=e[i];if(0<=r(n,a))break;e[t]=a,t=i}e[t]=n},zP:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var a=1+(t<<1),o=a+1,f=e[a];if(o<this.length&&r(e[o],f)<0&&(f=e[a=o]),0<=r(f,i))break;e[t]=f,t=a}e[t]=i}},D.default=e;var H=Math.max,U=Math.min,j=0;function G(t,e,r,n,i,a){for(var o=0,f=t.length-1;o<f;o++){var s=t[o],u=t[o+1],l=new h(s,!1,void 0,e),c=new h(u,!1,l,e);l.IP=c,s[0]===u[0]&&s[1]===u[1]||(l.UP=c.UP=r,a||(l.DP=!1,c.DP=!1),0<C(l,c)?c.left=!0:l.left=!0,u=s[0],s=s[1],i[0]=U(i[0],u),i[1]=U(i[1],s),i[2]=H(i[2],u),i[3]=H(i[3],s),n.push(l),n.push(c))}}var V=[];function W(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var n=(a=e,i=r,f=null,(o=t).length*a.length==0&&(i===m?f=V:i===x?f=o:i!==b&&i!==S||(f=0===o.length?a:o)),f);if(n)return n===V?null:n;var i,a,o,f,s=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],l=function(t,e,r,n,i){for(var a,o,f,s,u=new D(null,C),l=0,c=t.length;l<c;l++)for(f=0,s=(a=t[l]).length;f<s;f++)(o=0===f)&&j++,G(a[f],!0,j,u,r,o);for(l=0,c=e.length;l<c;l++)for(f=0,s=(a=e[l]).length;f<s;f++)(o=i===x?!1:0===f)&&j++,G(a[f],!1,j,u,n,o);return u}(t,e,s,u,r);if(i=t,a=e,o=r,f=null,((t=s)[0]>(e=u)[2]||e[0]>t[2]||t[1]>e[3]||e[1]>t[3])&&(o===m?f=V:o===x?f=i:o!==b&&o!==S||(f=i.concat(a))),n=f)return n===V?null:n;for(var c=O(function(t,e,r,n){for(var i,a,o,f=new p(k),s=[],u=Math.min(e[2],r[2]);0!==t.length;){var l,c,h=t.pop();if(s.push(h),n===m&&h.kP[0]>u||n===x&&h.kP[0]>e[2])break;h.left?(a=i=f.Xc(h),i=i!==(o=f.MP())?f.NM(i):null,a=f.next(a),M(h,l=i?i.key:null,n),a&&2===A(h,a.key,t)&&(M(h,l,n),M(h,a.key,n)),i&&2===A(i.key,h,t)&&(M(l,(c=(c=i)!==o?f.NM(c):null)?c.key:null,n),M(h,l,n))):(h=h.IP,a=i=f.find(h),i&&a&&(i=i!==o?f.NM(i):null,a=f.next(a),f.remove(h),a&&i&&A(i.key,a.key,t)))}return s}(l,s,u,r)),h=[],v=0;v<c.length;v++){var d=c[v];if(d.pN()){for(var _=[d.points],y=0;y<d.vN.length;y++){var g=d.vN[y];_.push(c[g].points)}h.push(_)}}return h}e={VP:b,BP:x,HP:m,WP:S},t.ZP=function(t,e){return W(t,e,x)},t.qP=function(t,e){return W(t,e,m)},t.YP=e,t.TK=function(t,e){return W(t,e,b)},t.xor=function(t,e){return W(t,e,S)},Object.defineProperty(t,"gP",{value:!0})}(e)}),martinez=unwrapExports(dist),Const={vr:Math.PI/180,mr:180/Math.PI,yr:6378137};function getSphericalCrs(t,e){var r=function(t){switch(t){case"EPSG3857":return ProjectionManager.getProjection("EPSG:3857");case"EPSG4326":return ProjectionManager.getProjection("EPSG:4326")}return ProjectionManager.getProjection("EPSG3857")}(t);return{project:function(t){return Util$6.isArray(t)&&(t=new LngLat$2(t[0],t[1])),r.project(t.lng,t.lat)},unproject:function(t){return Util$6.isArray(t)&&(t=new Pixel(t[0],t[1])),r.unproject(t.x,t.y)},normalizePoint:function(t){return Util$6.parseLngLatData(t)},distance:function(t,e){if(e=this.normalizePoint(e),Util$6.isArray(e))return this.distanceToLine(t,e);t=this.normalizePoint(t);var r=Const.vr,n=Math.cos,i=t.lat*r,a=t.lng*r,t=e.lat*r,e=e.lng*r,r=2*Const.yr,a=e-a,t=(1-n(t-i)+(1-n(a))*n(i)*n(t))/2;return r*Math.asin(Math.sqrt(t))},ringArea:function(t){t=this.normalizeLine(t);var e=Const.yr*Const.vr,r=0,n=t,i=n.length;if(i<3)return 0;for(var a=0;a<i-1;a+=1){var o=n[a],f=n[a+1],s=o.lng*e*Math.cos(o.lat*Const.vr),u=o.lat*e,o=f.lng*e*Math.cos(f.lat*Const.vr);r+=s*(f.lat*e)-o*u}var l=n[a],c=n[0],h=l.lng*e*Math.cos(l.lat*Const.vr),t=l.lat*e,l=c.lng*e*Math.cos(c.lat*Const.vr);return r+=h*(c.lat*e)-l*t,.5*Math.abs(r)},sphericalCalotteArea:function(t){var e=Const.yr,t=t/e,t=e-e*Math.cos(t);return 2*Math.PI*e*t}}}function getPlanarCrs(){return{normalizePoint:function(t){return t&&t.x&&t.y?[t.x,t.y]:t},distance:function(t,e){var r=t[0]-e[0],e=t[1]-e[1];return Math.sqrt(r*r+e*e)},project:function(t){return t},unproject:function(t){return t},ringArea:function(t){for(var e=[0,0],r=[0,0],n=0,i=t[0],a=t.length,o=2;o<a;o++){var f=t[o-1],s=t[o];e[0]=i[0]-s[0],e[1]=i[1]-s[1],r[0]=i[0]-f[0],r[1]=i[1]-f[1],n+=e[0]*r[1]-e[1]*r[0]}return n/2}}}function isClockwise(t){for(var e=0,r=t.length,n=0;n<r-1;n++){var i,a=t[n];e+=((i=t[n+1])[0]-a[0])*(i[1]+a[1])}return t[r-1][0]===t[0][0]&&t[r-1][1]===t[0][1]||(a=t[r-1],e+=((i=t[0])[0]-a[0])*(i[1]+a[1])),0<e}var GeometryUtilCls=(Jla.prototype.clone=function(t){return new Jla(assign({},this._opts,t))},Jla.prototype.isPoint=function(t){return t&&(t instanceof LngLat$2||Util$6.isArray(t)&&!isNaN(t[0]))},Jla.prototype.normalizePoint=function(t){return t},Jla.prototype.normalizeLine=function(t){for(var e=[],r=0,n=t.length;r<n;r++)e.push(this.normalizePoint(t[r]));return e},Jla.prototype.normalizeMultiLines=function(t){Util$6.isArray(t)&&this.isPoint(t[0])&&(t=[t]);for(var e=[],r=0,n=t.length;r<n;r++)e.push(this.normalizeLine(t[r]));return e},Jla.prototype.setCrs=function(t){t=t&&t.project&&t.unproject?t:"plane"===t?getPlanarCrs():getSphericalCrs(t,this._opts.maxZoom);assign(this,t)},Jla.prototype.distance=function(t,e){throw new Error("distance Not implemented!")},Jla.prototype.xr=function(t,e){t=this.normalizeLine(t),this.isPoint(t[0])||(t=t[0]);for(var r=[],n=0,i=t.length;n<i;n++)r.push(this.project(t[n]));return!0===e?r=this.makesureClockwise(r):!1===e&&(r=this.makesureClockwise(r)).reverse(),r},Jla.prototype.br=function(t){for(var e=[],r=0,n=t.length;r<n;r++)e.push(this.unproject(t[r]));return e},Jla.prototype.closestOnSegment=function(t,e,r){r=Coordinate.closestOnSegment(this.project(t),this.xr([e,r]));return this.unproject(r)},Jla.prototype.closestOnLine=function(t,e){for(var r,n=1/0,i=0,a=(e=this.normalizeLine(e)).length;i<a-1;i++){var o=this.closestOnSegment(t,e[i],e[i+1]),f=this.distance(t,o);f<n&&(n=f,r=o)}return r},Jla.prototype.distanceToSegment=function(t,e,r){return this.distanceToLine(t,[e,r])},Jla.prototype.distanceToLine=function(t,e){e=this.normalizeLine(e),this.isPoint(e[0])||(e=e[0]);for(var r=1/0,n=0,i=e.length;n<i-1;n++)var a=this.closestOnSegment(t,e[n],e[n+1]),r=Math.min(r,this.distance(t,a));return r},Jla.prototype.distanceToPolygon=function(t,e){return this.isPointInRing(t,e)?0:this.distanceToLine(t,e)},Jla.prototype.isPointOnSegment=function(t,e,r,n){return(!n&&0!==n||n<0)&&(n=this._opts.onSegmentTolerance),this.distanceToSegment(t,e,r)<=n},Jla.prototype.isPointOnLine=function(t,e,r){for(var n=0,i=(e=this.normalizeLine(e)).length;n<i-1;n++)if(this.isPointOnSegment(t,e[n],e[n+1],r))return!0;return!1},Jla.prototype.isPointOnRing=function(t,e,r){for(var n=0,i=(e=this.normalizeLine(e)).length;n<i;n++)if(this.isPointOnSegment(t,e[n],e[n===i-1?0:n+1],r))return!0;return!1},Jla.prototype.isPointOnPolygon=function(t,e,r){for(var n=0,i=(e=this.normalizeMultiLines(e)).length;n<i;n++)if(this.isPointOnRing(t,e[n],r))return!0;return!1},Jla.prototype.makesureClockwise=function(t){return isClockwise(t)||(t=[].concat(t)).reverse(),t},Jla.prototype.makesureAntiClockwise=function(t){return isClockwise(t)&&(t=[].concat(t)).reverse(),t},Jla.prototype.pointInRing=function(t,e,r){for(var n=!1,i=0;i<e.length&&!n;i++)if(f(t,e[i][0],r)){for(var a=!1,o=1;o<e[i].length&&!a;)f(t,e[i][o],!r)&&(a=!0),o++;a||(n=!0)}function f(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,a=e.length-1;i<e.length;a=i++){var o=e[i][0],f=e[i][1],s=e[a][0],u=e[a][1];if(t[1]*(o-s)+f*(s-t[0])+u*(t[0]-o)==0&&(o-t[0])*(s-t[0])<=0&&(f-t[1])*(u-t[1])<=0)return!r;f>t[1]!=u>t[1]&&t[0]<(s-o)*(t[1]-f)/(u-f)+o&&(n=!n)}return n}return n},Jla.prototype.isPointInRing=function(t,e){e=this.normalizeLine(e);e=this.xr(e,!0);return Coordinate.ss(this.project(t),e,!1)},Jla.prototype.isRingInRing=function(t,e){for(var r=0,n=t.length;r<n;r++)if(!this.isPointInRing(t[r],e))return!1;return!0},Jla.prototype.isRingInRingByOutsea=function(t,e){for(var r=0,n=t.length;r<n;r++)if(this.isPointInRing(t[r],e))return!0;for(r=0,n=e.length;r<n;r++)if(this.isPointInRing(e[r],t))return!0;return!1},Jla.prototype.isRingInRingByMapbox=function(t,e){for(var r=0,n=t.length;r<n;r++)if(!this.isPointInRing(t[r],e))return!1;return!0},Jla.prototype.isRingInRingByMapboxB=function(t,e){for(var r=0,n=t.length;r<n;r++)if(this.isPointInRing(t[r],e))return!0;return!1},Jla.prototype.isPixelRingInRing=function(t,e){for(var r=0,n=t.length;r<n;r++)if(Coordinate.ss(t[r],e,!1))return!0;return!1},Jla.prototype.isPointInPolygon=function(t,e){for(var r,n=0,i=(e=this.normalizeMultiLines(e)).length;n<i&&(r=this.isPointInRing(t,e[n]),0<n&&(r=!r),r);n+=1);return Boolean(r)},Jla.prototype.doesSegmentsIntersect=function(t,e,r,n){var i=this.xr([t,e,r,n]);t=i[0],e=i[1],r=i[2];var a=!1,o=((n=i[3])[0]-r[0])*(t[1]-r[1])-(n[1]-r[1])*(t[0]-r[0]),i=(e[0]-t[0])*(t[1]-r[1])-(e[1]-t[1])*(t[0]-r[0]),t=(n[1]-r[1])*(e[0]-t[0])-(n[0]-r[0])*(e[1]-t[1]);return 0!=t&&(i=i/t,0<=(t=o/t)&&t<=1&&0<=i&&i<=1&&(a=!0)),a},Jla.prototype.doesSegmentLineIntersect=function(t,e,r){for(var n=0,i=(r=this.normalizeLine(r)).length;n<i-1;n++)if(this.doesSegmentsIntersect(t,e,r[n],r[n+1]))return!0;return!1},Jla.prototype.doesSegmentRingIntersect=function(t,e,r){for(var n=0,i=(r=this.normalizeLine(r)).length;n<i;n++)if(this.doesSegmentsIntersect(t,e,r[n],r[n===i-1?0:n+1]))return!0;return!1},Jla.prototype.doesSegmentPolygonIntersect=function(t,e,r){for(var n=0,i=(r=this.normalizeMultiLines(r)).length;n<i;n++)if(this.doesSegmentRingIntersect(t,e,r[n]))return!0;return!1},Jla.prototype.doesLineLineIntersect=function(t,e){for(var r=0,n=(t=this.normalizeLine(t)).length;r<n-1;r++)if(this.doesSegmentLineIntersect(t[r],t[r+1],e))return!0;return!1},Jla.prototype.doesLineRingIntersect=function(t,e){for(var r=0,n=(t=this.normalizeLine(t)).length;r<n-1;r++)if(this.doesSegmentRingIntersect(t[r],t[r+1],e))return!0;return!1},Jla.prototype.doesPolygonPolygonIntersect=function(t,e){return!!(this.doesRingRingIntersect(e,t)||this.isRingInRing(t,e)||this.isRingInRing(e,t))},Jla.prototype.doesRingRingIntersect=function(t,e){for(var r=0,n=(t=this.normalizeLine(t)).length;r<n;r++)if(this.doesSegmentRingIntersect(t[r],t[r===n-1?0:r+1],e))return!0;return!1},Jla.prototype.along=function(t,e){for(var r=0,n=0;n<t.length-1;n+=1){var i=this.distance(t[n],t[n+1]);if(!(i+r<e)){var a=(e-r)/i;return[t[n][0]+a*(t[n+1][0]-t[n][0]),t[n][1]+a*(t[n+1][1]-t[n][1]),n]}r+=i}return null},Jla.prototype.gr=function(t,e){for(var a,o,r=function(t){return(a[0]-f[0])*(t[1]-f[1])>(a[1]-f[1])*(t[0]-f[0])},n=function(){var t=[f[0]-a[0],f[1]-a[1]],e=[c[0]-o[0],c[1]-o[1]],r=f[0]*a[1]-f[1]*a[0],n=c[0]*o[1]-c[1]*o[0],i=1/(t[0]*e[1]-t[1]*e[0]);return[(r*e[0]-n*t[0])*i,(r*e[1]-n*t[1])*i]},i=t=this.makesureAntiClockwise(t),f=(e=this.makesureClockwise(e))[e.length-1],s=0,u=e.length;s<u;s++){a=e[s];for(var l=i,i=[],c=l[l.length-1],h=0,v=l.length;h<v;h++)r(o=l[h])?(r(c)||i.push(n()),i.push(o)):r(c)&&i.push(n()),c=o;f=a}return i},Jla.prototype.ringRingClip=function(t,e){t=this.xr(t),e=this.xr(e),isEqual(t[0],t[t.length-1])||t.push(t[0].slice()),isEqual(e[0],e[e.length-1])||e.push(e[0].slice());e=martinez.qP([t],[e]);return e[0]&&e[0][0]?this.br(e[0][0]):[]},Jla.prototype.ringArea=function(t){throw new Error("distance Not implemented!")},Jla.prototype.distanceOfLine=function(t){for(var e=0,r=0,n=(t=this.normalizeLine(t)).length;r<n-1;r++)e+=this.distance(t[r],t[r+1]);return e},Jla.prototype.isClockwise=function(t){return isClockwise(t=this.xr(t))},Jla.prototype.typePolygon=function(t){return isArray(t)&&isArray(t[0])?2===t[0][0].length||t[0][0]instanceof LngLat$2?"Polygon":2<t[0][0].length&&(2===t[0][0][0].length||t[0][0][0]instanceof LngLat$2)?"MultiPolygon":"never":"never"},Jla);function Jla(t){this.CLASS_NAME="AMap.GeometryUtil",this._opts=assign({onSegmentTolerance:5,crs:"EPSG3857",maxZoom:20},t),this.setCrs(this._opts.crs)}var GeometryUtilInstance=new GeometryUtilCls({}),PlaneGeometryUtilInstance=new GeometryUtilCls({});PlaneGeometryUtilInstance.setCrs("plane");var GeometryUtil={distance:GeometryUtilInstance.distance.bind(GeometryUtilInstance),ringArea:GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),isClockwise:GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),typePolygon:GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),makesureClockwise:GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),makesureAntiClockwise:GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),distanceOfLine:GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),ringRingClip:GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),doesSegmentsIntersect:GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),doesSegmentLineIntersect:GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),doesSegmentRingIntersect:GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),doesSegmentPolygonIntersect:GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),doesLineLineIntersect:GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),doesLineRingIntersect:GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),doesRingRingIntersect:GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),pointInRing:GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),isPointInRing:GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),isRingInRing:GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),isPointInPolygon:GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),isPointOnSegment:GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),isPointOnLine:GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),isPointOnRing:GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),isPointOnPolygon:GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),closestOnSegment:GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),closestOnLine:GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),distanceToSegment:GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),distanceToLine:GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)},LngLat$2=(ppa.from=function(t){return isLngLat(t)?new ppa(t.KL,t.kT):new ppa(t[0],t[1])},ppa.prototype.setLng=function(t){return this.KL=t,this.lng=Math.round(1e6*t)/1e6,this},ppa.prototype.setLat=function(t){return this.kT=t,this.lat=Math.round(1e6*t)/1e6,this},ppa.prototype.getLng=function(){return this.lng},ppa.prototype.getLat=function(){return this.lat},ppa.prototype.equals=function(t){return(t=parseLngLatData(t))instanceof ppa&&Math.max(Math.abs(this.kT-t.kT),Math.abs(this.KL-t.KL))<=1e-9},ppa.prototype.add=function(t,e){return new ppa(this.KL+t.KL,this.kT+t.kT,e)},ppa.prototype.subtract=function(t,e){return new ppa(this.KL-t.KL,this.kT-t.kT,e)},ppa.prototype.divideBy=function(t,e){return new ppa(this.KL/t,this.kT/t,e)},ppa.prototype.multiplyBy=function(t,e){return new ppa(this.KL*t,this.kT*t,e)},ppa.prototype.offset=function(t,e){if(isNaN(t)||isNaN(e))throw Error("valid offset args, require number");t=2*Math.asin(Math.sin(Math.round(t)/12756274)/Math.cos(this.kT*Math.PI/180)),t=this.KL+180*t/Math.PI,e=2*Math.asin(Math.round(e)/12756274);return new ppa(t,this.kT+180*e/Math.PI)},ppa.prototype.toString=function(){return this.lng+","+this.lat},ppa.prototype.toArray=function(){return[this.lng,this.lat]},ppa.prototype.toJSON=function(){return[this.lng,this.lat]},ppa.prototype.distanceTo=function(t){return GeometryUtil.distance(this,t)},ppa.prototype.distance=function(t){return GeometryUtil.distance(this,t)},ppa);function ppa(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.LngLat",isNumberArray(t)?(t=parseFloat(t[0]),e=parseFloat(t[1])):(e=parseFloat(e),t=parseFloat(t)),isNaN(t)||isNaN(e))throw Error("Invalid Object: LngLat("+t+", "+e+")");!0!==r&&(e=Math.max(Math.min(e,90),-90),t=(t+180)%360+(t<-180||180===t?180:-180)),this.kT=e,this.KL=t,this.lng=Math.round(1e6*t)/1e6,this.lat=Math.round(1e6*e)/1e6,this.pos=ProjectionManager.getProjection("EPSG:3857").project(t,e)}var Size=(Opa.prototype.getWidth=function(){return this.width},Opa.prototype.getHeight=function(){return this.height},Opa.prototype.toString=function(){return this.width+","+this.height},Opa.prototype.toArray=function(){return[this.width,this.height]},Opa);function Opa(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.Size",isNaN(t)||isNaN(e))throw new Error("Invalid Object: Pixel("+t+", "+e+")");this.width=r?Math.round(t):Number(t),this.height=r?Math.round(e):Number(e)}var easing=(Spa={},Tpa=4,Vpa=1e-7,Wpa=10,Zpa="function"==typeof Float32Array,function(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");var t=arguments.toString();if(Spa[t])return Spa[t];if(a===e&&o===r)return fqa;for(var f=new(Zpa?Float32Array:Array)(11),n=0;n<11;++n)f[n]=bqa(.1*n,a,o);function i(t){for(var e=0,r=1;10!==r&&f[r]<=t;++r)e+=.1;var n=e+.1*((t-f[--r])/(f[r+1]-f[r])),i=cqa(n,a,o);return.001<=i?function(t,e,r,n){for(var i=0;i<Tpa;++i){var a=cqa(e,r,n);if(0===a)return e;e-=(bqa(e,r,n)-t)/a}return e}(t,n,a,o):0===i?n:function(t,e,r,n,i){for(var a,o,f=0;0<(a=bqa(o=e+(r-e)/2,n,i)-t)?r=o:e=o,Math.abs(a)>Vpa&&++f<Wpa;);return o}(t,e,e+.1,a,o)}function s(t){return 0===t?0:1===t?1:bqa(i(t),e,r)}return Spa[t]=s}),Spa,Tpa,Vpa,Wpa,Zpa;function $pa(t,e){return 1-3*e+3*t}function bqa(t,e,r){return(($pa(e,r)*t+(3*r-6*e))*t+3*e)*t}function cqa(t,e,r){return 3*$pa(e,r)*t*t+2*(3*r-6*e)*t+3*e}function fqa(t){return t}function getQuadBezierValue(t,e,r,n){if(1<=t)return n;var i=1-t;return i*i*e+2*i*t*r+t*t*n}function cubic(t,e,r,n,i){if(1<=t)return i;var a=3*(r.pos[0]-e.pos[0]),o=3*(n.pos[0]-r.pos[0])-a,f=i.pos[0]-e.pos[0]-a-o,s=3*(r.pos[1]-e.pos[1]),r=3*(n.pos[1]-r.pos[1])-s,i=i.pos[1]-e.pos[1]-s-r,a=f*Math.pow(t,3)+o*Math.pow(t,2)+a*t+e.pos[0],e=i*Math.pow(t,3)+r*Math.pow(t,2)+s*t+e.pos[1];return ProjectionManager.getProjection("EPSG:3857").unproject(a,e)}function quad(t,e,r,n){return ProjectionManager.getProjection("EPSG:3857").unproject(getQuadBezierValue(t,e.pos[0],r.pos[0],n.pos[0]),getQuadBezierValue(t,e.pos[1],r.pos[1],n.pos[1]))}function p20CoordsToLngLat(t,e){return Array.isArray(e)&&(e=new Pixel(e[0],e[1])),t.ai(e,20)}function getSplitNum(t,e){for(var r=4,n=[3,300],r=Math.max(2,r),i=0,a=0,o=0,f=t.length;o<f-1;o++){var s=t[o],u=t[o+1];i+=Math.abs(u.pos[0]-s.pos[0]),a+=Math.abs(u.pos[1]-s.pos[1])}return Math.min(n[1],Math.max(n[0],Math.round(Math.max(i,a)/e/r)))}function interpolateCoords(t,e){var r=null;switch(e.length){case 3:r=quad;break;case 4:r=cubic;break;default:return null}for(var n=[],i=[0].concat(e),a=1;a<t-2;a++)i[0]=a/t,n.push(r.apply(null,i));return n.push(e[e.length-1]),n}function getCoordsWithControlPoints(t,e,r,n){var i=null;return t&&r&&r.length&&((t=[t]).push.apply(t,r),t.push(e),t.length,i=interpolateCoords(getSplitNum(t,n),t)),i||[e]}var BezierUtil={ag:quad,ug:cubic,sg:easing,xb:function(t,e){for(var r=[],n=0,i=t.length;n<i;n+=1)r.push.apply(r,getCoordsWithControlPoints(t[n-1],t[n],t[n].controlPoints,e));return r},fg:function(t,e,r,n){for(var i=this.xb(t,e,r,n),a=[],o=0,f=i.length;o<f;o++)a.push(p20CoordsToLngLat(e,i[o]));return a}},TagMap={2:"all",3:"all",4:"all",5:"all",6:"lite",7:"all",8:"lite",9:"all",10:"lite",11:"lite",12:"all",13:"all",14:"all",15:"lite",16:"lite",17:"all",18:"all",19:"all",20:"all"},colorNameDist={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Util$6=function(){var n,o,e,r,s={CLASS_NAME:"AMap.Util",WorldAxesCenter:{x:0,y:0},Single:{},stamp:(e=!0===Browser$1.DW,r=1e5,function(t){return t.$K=e?++r:--r,t.$K}),singlton:function(t){return c.Single[t]||new t},getOptimalZoom:function(t){return t<Math.floor(t)+.8?Math.floor(t):Math.ceil(t)},join:function(t,e){if(t.join)return t.join(e);var r,n=[];for(r in t)t.hasOwnProperty(r)&&n.push(r+"="+(t[r]||""));return n.join(e)},getGuid:function(t,e){return void 0===e&&(e=10),(t||"")+Math.round(Math.random()*Math.pow(10,e))+"_"+(new Date).getTime()},uuid:(o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),function(t,e){void 0===t&&(t=0),void 0===e&&(e=62);var r,n=o,i=[];if(e=e||n.length,t)for(r=0;r<t;r++)i[r]=n[0|Math.random()*e];else{var a;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(a=0|16*Math.random(),i[r]=n[19===r?3&a|8:a])}return i.join("")}),endsWith:function(t,e){return t.endsWith?t.endsWith(e):!(t.length<e.length)&&t.substr(t.length-e.length)===e},mg:[],gg:268435456,wg:[215440491,106744817],Mg:{start:function(e){e.startTime=new Date,e.jg=[];var r=(new Date).getTime(),n=function(){var t=(new Date).getTime();e.jg.push(t-r),r=t,e.id=c.requestAnimFrame(n)};e.id=c.requestAnimFrame(n)},cancel:function(t){t.id&&c.cancelAnimFrame(t.id)},stop:function(t){t.Ag=Date.now()-t.startTime,this.cancel(t),t.Mg=Math.round(1e3/(t.Ag/(t.jg.length+1)))}},kg:function(t,e,r,n,i){if(void 0===n&&(n="linear"),void 0===i&&(i=!1),t===e)return e;switch(n){case"ease":r=BezierUtil.sg(.25,.1,.25,1)(r);break;case"ease-in":r=BezierUtil.sg(.42,0,1,1)(r);break;case"ease-out":r=BezierUtil.sg(0,0,.58,1)(r);break;case"ease-in-out":r=BezierUtil.sg(.42,0,.58,1)(r)}t+=(e-t)*r;return i&&(t>>=0),t},createObjectURL:function(t,e){void 0===e&&(e="text/javascript; charset=utf-8");var r=null;try{r=(globalInstance.URL||globalInstance.webkitURL).createObjectURL(new Blob([t],{type:e}))}catch(t){r=null}return r},revokeObjectURL:function(t){try{(globalInstance.URL||globalInstance.webkitURL).revokeObjectURL(t)}catch(t){}},Og:function(t){for(var e={},r=0,n=t.length;r<n;r++)e[t[r]]=r;return e},xg:function(t){var e={};if(c.is(t,"object"))for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e},Ig:function(t,e){if(e.length<5e4)t.push.apply(t,e);else for(var r=0,n=e.length;r<n;r+=1)t.push(e[r])},clone:function(t){if("object"!=typeof t||null===t)return t;if(t.Tg||this.is(t,"Float32Array")||this.is(t,"Uint16Array"))return t;var e,r=this.isArray(t)?[]:{};for(e in t)t.hasOwnProperty(e)&&(r[e]=c.clone(t[e]));return r},isInteger:function(t){return(0|t)===t},vB:function(t){return!isNaN(t)},setPrototypeOf:"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:function(t,e){for(var r in e)t[r]=e[r]},isFunction:function(t){return"function"==typeof t},_g:function(t,e){if(void 0===e&&(e="webgl"),!t)return t;for(var r=[],n=0,i=t.length;n<i;n+=2){var a=parseInt(t.substr(n,2),16);("webgl"===e||"rgba"===e&&0===n)&&(a=this.format(a/255,3)),r.push(a)}return r.push(r.shift()),r},Sg:function(){},keys:"function"==typeof Object.keys?Object.keys:function(t){var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push(e);return r},map:function(n,i,a){void 0===a&&(a=null);var o=[];return n&&n.length?(c.Cg(n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[1];o[r]=i.apply(a||n,t)}),o):n},forEach:function(t,e){if(t&&t.length){var r=t.length;if(0<r&&(e(t[0],0),1<r)){e(t[1],1);for(var n=2;n<r;n++)e(t[n],n)}}},Cg:function(t,e,r){if(void 0===r&&(r=null),t&&t.length)for(var n=0,i=t.length;n<i&&!1!==e.call(r,t[n],n,t);n++);},find:function(t,e,r){void 0===r&&(r=null);for(var n=0,i=t.length;n<i;n++)if("function"==typeof e){if(e.call(r,t[n],n,t))return t[n]}else if(t[n]===e)return t[n];return null},isDOM:function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},Eg:function(t,e){for(var r,n,i="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM",a="v5"<(e=e||"v5")?(r=i.length,512):(r=27,i=i.substr(0,27),333),o=[],f=NaN,s=0,u=t.length;s<u;s++)n=t[s],n=i.indexOf(n),f=isNaN(f)?n*r:(o.push(f+n-a),NaN);return o},Ng:function(t,e){for(var r=1,r=512<e.length?Math.round(Math.pow(e.length,.5)):e.length,n=Math.ceil(e.length/r),i=0;i<n;i+=1){var a=r*i,o=a+r;o>e.length&&(o=e.length);for(var f=a;f<o;f+=1)t(e[f])}},Lg:function(t){if(/^rgba\\(/.test(t))return this.Dg(t);var e=this.colorNameToHex(t),t=e;return"#"===e[0]&&(3===(e=e.substring(1)).length&&(e=e.replace(/./g,function(t){return t+t})),t=this.argbHex2Rgba(8===e.length?e:"ff"+e)),this.Dg(t)},colorNameToHex:function(t){return void 0===t&&(t=""),"string"==typeof(t=t.toLowerCase())&&colorNameDist[t]||t},Rg:function(t,e,r){var n=Math.floor(r/2),i=r-n,n=(1<<n)-1<<i,i=(1<<i)-1;return[r,t&n|e&i,e&n|t&i]},Pg:function(t){return t?encodeURIComponent(t):""},n_:function(t,e,r,n){var i=t[e].i[r];if(void 0===i)return null;if(t=t[e].s,"number"==typeof i)return t[i];for(;void 0===i[n.toString()]&&!(--n<3););return"number"==typeof(e=i[n.toString()])?t[e]:null},Dg:function(t){t=t.split(",");return t[0]=parseFloat(t[0].split("rgba(")[1])/255,t[1]=parseFloat(t[1])/255,t[2]=parseFloat(t[2])/255,t[3]=parseFloat(t[3]),t},Ug:function(t){t=t.split(",");return t[0]=parseFloat(t[0].split("rgb(")[1])/255,t[1]=parseFloat(t[1])/255,t[2]=parseFloat(t[2])/255,t},Bg:function(t){return"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+t[3]+")"},color2Rgba:function(t){return this.Bg(this.color2RgbaArray(t))},color2RgbaArray:function(t){if(t instanceof Array)return 3==t.length&&t.push(1),t;var e=this.colorNameToHex(t);if(0==e.indexOf("rgb(")){var r=this.Ug(e);return r.push(1),r}if(0==e.indexOf("rgba("))return this.Dg(e);if(0!=e.indexOf("#")){if(0===e.indexOf("hsla")){var n=t.substr(5).split(","),i=parseInt(n[0],10)/360,a=parseInt(n[1],10)/100,o=parseInt(n[2],10)/100,r=parseFloat(n[3]);return this.GQ(i,a,o,r)}if(0===e.indexOf("hsl")){n=t.substr(4).split(","),i=parseInt(n[0],10)/360,a=parseInt(n[1],10)/100,o=parseInt(n[2],10)/100;return this.GQ(i,a,o,1)}if(3!==e.length)return 6==e.length?this.zg(e):8==e.length?this.qg(e):void 0;o=e.replace(/./g,function(t){return t+t});return this.zg(o)}if(4===e.length){var o=e.substr(1).replace(/./g,function(t){return t+t});return this.zg(o)}if(7==e.length)return this.zg(e.substr(1));if(9==e.length){e=e.substr(1);return this.qg(e)}},GQ:function(t,e,r,n){var i,a,o;return 0===e?i=a=o=r:(e=2*r-(r=r<.5?r*(1+e):r+e-r*e),i=this.uQ(e,r,t+1/3),a=this.uQ(e,r,t),o=this.uQ(e,r,t-1/3)),[i,a,o,n]},uQ:function(t,e,r){return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},rgbHex2Rgba:function(t){return t.startsWith("#")&&(t=t.slice(1)),c.argbHex2Rgba("ff"+t)},argbHex2Rgba:function(t){t.startsWith("#")&&(t=t.slice(1));for(var e=[],r=0,n=t.length;r<n;r+=2)e.push(parseInt(t.substr(r,2),16));return e.push((e.shift()/255).toFixed(2)),"rgba("+e.join(",")+")"},Opacity2Rgba:function(t,e){var r=e;return e&&e[3]&&t&&(e[3]=Math.floor(255*t)),r},Hex2Rgba:function(t){if("string"!=typeof t)return!1;for(var e=[],r=0,n=t.length;r<n;r+=2)e.push(parseInt(t.substr(r,2),16));return e.push(parseInt(e.shift())),e},zg:function(t){return this.uE(t+"ff")},qg:function(t){for(var e=[],r=0,n=t.length;r<n;r+=2)e.push(parseInt(t.substr(r,2),16)/255);return e.push(e.shift()),e},uE:function(t){t=parseInt(t,16);return[(t>>24&255)/255,(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},Wg:function(t,e){return 0<=e&&t.splice(e,1),t},startsWith:function(t,e){return t.startsWith?t.startsWith(e):t.substr(0,e.length)===e},deleteItemFromArray:function(t,e){e=c.indexOf(t,e);return c.Wg(t,e)},deleteItemFromArrayByIndex:function(t,e){return c.Wg(t,e)},filter:function(t,r,n){var i=[];return c.Cg(t,function(t,e){r.call(n,t,e)&&i.push(t)}),i},indexOf:function(t,e){if(!t||!t.length)return-1;if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},Gg:function(t,e){return t.endsWith?t.endsWith(e):!(t.length<e.length)&&t.substr(t.length-e.length)==e},bind:(n=!1,Boolean(Function.prototype.bind)&&(n=!0),function(t,e){var r=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return n?r?(r.unshift(e),t.bind.apply(t,r)):t.bind(e):function(){return t.apply(e,r||arguments)}}),setOptions:function(t,e){return e=e||{},t.opts=assign({},t.opts,e),t.opts},yn:function(t,e,r){return"function"==typeof e?this.Hg(t,!0,this.Vg(e,r,1)):this.Hg(t,!0)},Hg:function(r,n,i,t,e,a,o){var f;if(i&&(f=e?i(r,t,e):i(r)),void 0!==f)return f;if(!this.$g(r))return r;var s=this.isArray(r);if(s){if(f=this.Yg(r),!n)return this.Kg(r,f)}else{var u=Object.prototype.toString.call(r),t="[object Function]"==u;if("[object Object]"!=u&&"[object Arguments]"!=u&&(!t||e))return e?r:{};if(f=this.Xg(t?{}:r),!n)return this.baseAssign(f,r)}o=o||[];for(var l=(a=a||[]).length;l--;)if(a[l]==r)return o[l];return a.push(r),o.push(f),(s?this.Zg:this.Qg)(r,function(t,e){f[e]=c.Hg(t,n,i,e,r,a,o)}),f},baseAssign:function(t,e){return null==e?t:this.tM(e,Object.keys(e),t)},$g:function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},rM:function(t){return!!t&&"object"==typeof t},nM:function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},Yg:function(t){var e=t.length,r=new Array(e);return e&&"string"==typeof t[0]&&Object.hasOwnProperty.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Kg:function(t,e){var r=-1,n=t.length;for(e=e||Array(n);++r<n;)e[r]=t[r];return e},Xg:function(t){t=t.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t},Vg:function(a,o,t){if("function"!=typeof a)return this.identity;if(void 0===o)return a;switch(t){case 1:return function(t){return a.call(o,t)};case 3:return function(t,e,r){return a.call(o,t,e,r)};case 4:return function(t,e,r,n){return a.call(o,t,e,r,n)};case 5:return function(t,e,r,n,i){return a.call(o,t,e,r,n,i)}}return function(){return a.apply(o,arguments)}},Zg:function(t,e){for(var r=-1,n=t.length;++r<n&&!1!==e(t[r],r,t););return t},identity:function(t){return t},iM:function(s){return function(t,e,r){for(var n=c.eM(t),i=r(t),a=i.length,o=s?a:-1;s?o--:++o<a;){var f=i[o];if(!1===e(n[f],f,n))break}return t}},Qg:function(t,e){return c.iM()(t,e,Object.keys)},eM:function(t){return c.$g(t)?t:Object(t)},tM:function(t,e,r){r=r||{};for(var n=-1,i=e.length;++n<i;){var a=e[n];r[a]=t[a]}return r},oM:function(){return!1},aM:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",uM:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},sM:function(t,e,r,n){var i,a,o,f,s,u,l;return f=n?(i=0,o=this.uM,function(){if((a=o())-i<e)return!1;i=a,t.apply(r,arguments)}):(l=function(){s=!1,u&&(f.apply(r,u),u=!1)},function(){s?u=arguments:(s=!0,t.apply(r,arguments),setTimeout(l,e))})},format:function(t,e){return t===t<<0?t:+parseFloat(t+"").toFixed(e||0)},isArray:Array.isArray||function(t){return this.is(t,"array")},is:function(t,e){return Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase()===e.toLowerCase()},includes:"function"==typeof Array.prototype.includes?function(t,e){return t.includes(e)}:function(t,e){return-1!==this.indexOf(t,e)},fM:function(t){var e=0;if(0===t.length)return e;for(var r=0,n=t.length;r<n;r+=1)e=(e<<5)-e+t.charCodeAt(r),e&=e;return e},hM:function(t,e){e=e?Math.ceil(parseInt(e.substr(6))/24):1;for(var r="",n=0,i=t.length;n<i;n++)r+=String.fromCharCode((t.charCodeAt(n)-256-e+65535)%65535);return r},cM:function(t,e){var r=(t+"").slice(-2),n=(e+"").slice(-2);t=t.slice(0,-2),e=e.slice(0,-2);var i=parseInt((n+r).slice(1)),a=Math.ceil(i/250)%2?1:-1,i=1<i/500?1:-1;return t-=parseInt("1"+r)/3e3*a,e-=parseInt("1"+n)/3e3*i,new LngLat$2(parseFloat(t).toFixed(5),parseFloat(e).toFixed(5))},vM:function(t){return"undefined"!=typeof JSON&&JSON.stringify?c.fM(JSON.stringify(t)):null},lM:function(t,e){var r="_amap_hash";return!e&&t.hasOwnProperty(r)||(e=c.vM(t))&&(t[r]=e),t[r]},parseLngLatData:function(t){if(c.isArray(t)){if(!c.isArray(t[0])){var e=typeof t[0];return"string"==e||"number"==e?new LngLat$2(t[0],t[1]):t}for(var r=0;r<t.length;r+=1)t[r]=c.parseLngLatData(t[r])}return t},dM:function(t){for(var e=[],r=0,n=t.length;r<n;r+=1)e[r]=[t[r].x,t[r].y];return e},bM:function(t){return c.isArray(t)?new Size(t[0],t[1]):t},hp:function(t,e){var r,n=[0,0],i=c.getOptimalZoom(e.$n.zoom);return t&&LocalZoom<=i?(r=lcs$4.getSize(),i=e.$n.centerCoord,e=lcs$4.getLocalByCoord([i[0],i[1]]),i=t.x-e.x,e=t.y-e.y,0!=i&&(i*=r[0],n[0]=i),0!=e&&(e*=r[1],n[1]=e)):t&&(n[0]+=t.center[0],n[1]+=t.center[1]),n},dS:function(t,e){return t>=e[0]&&t<=e[1]},kD:function(t,e,r){void 0===t&&(t=""),void 0===r&&(r=!1);t=t.split(",")[0]||"";return!r&&t&&e&&TagMap[e]||"all"},VF:function(t,e,r){return void 0===r&&(r=!1),!r&&t&&e&&TagMap[e]||"all"},LD:function(t,e){if(!t||!e)return!1;t=this.iN(t);return this.iN(e)<=t},SD:function(t){var e;switch(void 0===t&&(t="all"),t){case"lite":e=0;break;case"left":e=1;break;case"all":default:e=2}return e},pW:function(t){var e;switch(void 0===t&&(t=2),t){case 0:e=NebulaTagType.LITE;break;case 1:e=NebulaTagType.LEFT;break;case 2:default:e=NebulaTagType.ALL}return e},iN:function(t){var e=0;switch(t){case"lite":e=0;break;case"left":e=1;break;case"all":e=2}return e}};!function(){var n=0;function t(t){var e=+new Date,r=Math.max(0,(Browser$1.ZV?50:20)-(e-n));return n=e+r,globalInstance.setTimeout(t,r)}function e(t){globalInstance.clearTimeout(t)}if(Browser$1.DW){var i=t,r=e;return s.requestAnimFrame=function(t,e,r,n){if(!r)return i(function(){e?c.bind(t,e).call(e,n):t()});e?c.bind(t,e).call(e,n):t()},s.cancelAnimFrame=function(t){t&&r.call(globalInstance,t)}}function a(t){for(var e,r=["webkit","moz","o","ms"],n=0;n<r.length&&!e;n+=1)e=globalInstance[r[n]+t];return e}var o=globalInstance.requestAnimationFrame||a("RequestAnimationFrame")||t,f=globalInstance.cancelAnimationFrame||a("CancelAnimationFrame")||a("CancelRequestAnimationFrame")||e;s.requestAnimFrame=function(t,e,r,n){if(!r)return o(function(){e?c.bind(t,e).call(e,n):t()});e?c.bind(t,e).call(e,n):t()},s.cancelAnimFrame=function(t){t&&f.call(globalInstance,t)}}(),Browser$1.DW||(s.requestIdleCallback=globalInstance.requestIdleCallback?function(t,e){return globalInstance.requestIdleCallback(t,e)}:function(t,e){void 0===e&&(e={});var r=c.uM();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,70-(c.uM()-r))}})},e.timeout||0)},s.cancelIdleCallback=globalInstance.cancelIdleCallback?function(t){return globalInstance.cancelIdleCallback(t)}:function(t){clearTimeout(t)});var c=s;return c}(),LabelFormat=(Bza.prototype.Ns=function(t,e){return e.lang&&(this.lang=e.lang),this.rV(t)},Bza.prototype.rV=function(t){return t},Bza.prototype.Ws=function(t,e){void 0===t&&(t=""),void 0===e&&(e=[]);for(var r=this.Es,e=labelsUtil$2.EQ(t,e),n=labelsUtil$2.aQ(e),i=0;i<n.length;i++)r[n[i]]=1},Bza.id="labelFormat",Bza);function Bza(){this.Fs={},this.Es={},this.Ts=[]}var SmartTypedArray$2=(Lza.prototype.set=function(t){this.check(t)?t.length<this.uf?this.value.set(t):(this.cf(t.length),this.value.set(t),this.length=t.length):assert("SmartTypedArray: error value")},Lza.prototype.check=function(t){if(Array.isArray(t))return!0;var e=!1;switch(this.type){case"uint8":e=t instanceof Uint8Array;break;case"int8":e=t instanceof Int8Array;break;case"uint16":e=t instanceof Uint16Array;break;case"int16":e=t instanceof Int16Array;break;case"uint32":e=t instanceof Uint32Array;break;case"int32":e=t instanceof Int32Array;break;case"float32":e=t instanceof Float32Array;break;case"float64":e=t instanceof Float64Array;break;default:e=!1}return e},Lza.prototype.subarray=function(t,e){return this.value.subarray(t,e)},Lza.prototype.ff=function(t){this.uf<t&&this.cf(t),this.length=t},Lza.prototype.cf=function(t){var e=this.pf(),r=this.value;return this.value=new e(t),r&&this.value.set(r),this.uf=t,this.value},Lza.prototype.pf=function(){var t=Float32Array;switch(this.type){case"uint8":t=Uint8Array;break;case"int8":t=Int8Array;break;case"uint16":t=Uint16Array;break;case"int16":t=Int16Array;break;case"uint32":t=Uint32Array;break;case"int32":t=Int32Array;break;case"float32":t=Float32Array;break;case"float64":t=Float64Array;break;default:t=Float32Array}return t},__decorate([InnerClass("SmartTypedArray")],Lza)),EnumSDFProperty,Yza;function Lza(t,e){void 0===e&&(e=1024),this.type=t,this.length=0,this.uf=0,this.value=this.cf(e)}Yza=EnumSDFProperty=EnumSDFProperty||{},Yza[Yza.fontWidth=0]="fontWidth",Yza[Yza.fontHeight=1]="fontHeight",Yza[Yza.horiBearingX=2]="horiBearingX",Yza[Yza.horiBearingY=3]="horiBearingY",Yza[Yza.horiAdvance=4]="horiAdvance",Yza[Yza.posX=5]="posX",Yza[Yza.posY=6]="posY",Yza[Yza.iconWidth=7]="iconWidth",Yza[Yza.iconHeight=8]="iconHeight";var INF=1e20,ControlChars=[[0,31],[127,159]],ZeroWidthChars=[[8203,8207]],f=new SmartTypedArray$2("float64",4096),d=new SmartTypedArray$2("float64",4096),z=new SmartTypedArray$2("float64",4096),v=new SmartTypedArray$2("float64",4096),ua=navigator.userAgent,TinySDF=(Zza.prototype.bU=function(t){this.size=t||[],this.xU(),this.mU()},Zza.prototype.Ce=function(t){var e=this.size,r=e[0],n=e[1],i=r*n,a=this.Nz;if(a){a.clearRect(0,0,r,n),a.fillText(t,this.buffer,this.wU);var o=a.getImageData(0,0,r,n),f=new Uint8ClampedArray(i),s=new Array(9).fill(0);s[0]=1,s[1]=1;e=t.charCodeAt(0);if(this.RU(e))return{bitmap:f,info:s};for(var u,l,c=INF,h=INF,v=0,d=0,_=0;_<i;_++){l=_-(u=Math.floor(_/r))*r;var y=o.data[4*_+3]/255;0<y&&(u<c&&(c=u),l<h&&(h=l),v<u&&(v=u),d<l&&(d=l)),this.TU.value[_]=1==y?0:0==y?INF:Math.pow(Math.max(0,.5-y),2),this.AU.value[_]=1==y?INF:0==y?0:Math.pow(Math.max(0,y-.5),2)}a=this.buffer,s=this.getWidth(t,d-h),t=void 0,t=32===e?[6,6,0,-21,9,0,0,r,n]:[s,v-c,h,-c+a,s,h-3,c-3,r,n];edt(this.TU.value,r,n),edt(this.AU.value,r,n);for(_=0;_<i;_++){var g=this.TU.value[_]-this.AU.value[_],g=Math.max(0,Math.min(255,Math.round(255-255*(g/this.radius+this.MU))));f[_]=g}return{bitmap:f,info:t}}return{}},Zza.prototype.getWidth=function(t,e){var r;switch(t){case"y":case"A":case"T":case"V":case"W":case"Y":r=e;break;default:r=e+2}return r},Zza.prototype.measureText=function(t){return this.Nz.measureText(t)},Zza.prototype.xU=function(){var t=this.size;this.canvas||(this.canvas=document.createElement("canvas")),this.canvas.width=t[0],this.canvas.height=t[1],this.Nz=this.canvas.getContext("2d"),this.Nz&&(this.Nz.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.Nz.textBaseline="middle",this.Nz.fillStyle="black")},Zza.prototype.mU=function(){var t=this.size,e=t[0],t=t[1],e=e*t;e>this.AU.uf&&(this.AU.ff(e),this.TU.ff(e));e=0<=ua.indexOf("Gecko/")||0<=ua.indexOf("Windows");this.wU=Math.round(t/2*(e?1.2:1))},Zza.prototype.RU=function(t){var e=this.SU(t,ControlChars),t=this.SU(t,ZeroWidthChars);return e||t},Zza.prototype.SU=function(t,e){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(t>=i[0]&&t<=i[1])return!0}},Zza);function Zza(t,e,r,n,i,a,o){this.fontSize=t||24,this.buffer=void 0===r?3:r,this.MU=i||.25,this.fontFamily=a||"sans-serif",this.fontWeight=o||"lighter",this.radius=n||8,this.size=e,this.xU();n=e[0]*e[1];this.TU=new SmartTypedArray$2("float64",n),this.AU=new SmartTypedArray$2("float64",n);n=0<=ua.indexOf("Gecko/")||0<=ua.indexOf("Windows");this.wU=Math.round(e[1]/2*(n?1.2:1))}function expandTypeArray(t){f.ff(t),d.ff(t),z.ff(t),v.ff(t)}function edt(t,e,r){f.uf<r&&expandTypeArray(r);for(var n=0;n<e;n++){for(var i=0;i<r;i++)f.value[i]=t[i*e+n];edt1d(f.value,d.value,v.value,z.value,r);for(i=0;i<r;i++)t[i*e+n]=d.value[i]}f.uf<e&&expandTypeArray(r);for(i=0;i<r;i++){for(n=0;n<e;n++)f.value[n]=t[i*e+n];edt1d(f.value,d.value,v.value,z.value,e);for(n=0;n<e;n++)t[i*e+n]=Math.sqrt(d.value[n])}}function edt1d(t,e,r,n,i){n[r[0]=0]=-INF,n[1]=+INF;for(var a=1,o=0;a<i;a++){for(var f=(t[a]+a*a-(t[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);f<=n[o];)o--,f=(t[a]+a*a-(t[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);r[++o]=a,n[o]=f,n[o+1]=+INF}for(a=0,o=0;a<i;a++){for(;n[o+1]<a;)o++;e[a]=(a-r[o])*(a-r[o])+t[r[o]]}}var LangConf={ch:{type:"ch",size:[32,32],fontSize:24,name:"中文简体"},en:{type:"en",size:[32,32],fontSize:24,name:"英文"},th:{type:"th",size:[32,32],fontSize:24,name:"泰语"},my:{type:"my",size:[56,56],fontSize:24,name:"缅甸语"},ja:{type:"ja",size:[32,32],fontSize:24,name:"日文"},km:{type:"km",size:[40,40],fontSize:24,name:"高棉语"},PU:{type:"lao",size:[40,40],fontSize:24,name:"老挝语"},$U:{type:"arabic",size:[40,40],fontSize:24,name:"阿拉伯语"},default:{type:"ch",size:[32,32],fontSize:24,name:"汉语"}},Lang=(pBa.prototype.Ce=function(t){return this.type===LangConf.PU.type?(console.time("measureText"),this.width=10*Math.floor(this.NU.measureText(t).width/10)+10+LangConf.PU.fontSize/2,console.timeEnd("measureText"),this.NU.bU([this.width,this.height])):(this.type===LangConf.my.type||this.type===LangConf.PU.type||this.type===LangConf.th.type||this.type===LangConf.$U.type||this.type===LangConf.km.type)&&1<t.length&&(this.width=Math.floor(this.CU.size[0]*t.length*.5),this.NU.bU([this.width,this.height])),this.NU.Ce(t)},pBa);function pBa(t){var e=this.CU=t,r=e.type,t=e.size,e=e.fontSize;this.type=r;r=this.width=t[0],t=this.height=t[1];this.NU=new TinySDF(e,[r,t],(r-e)/2,8,.25,"PingFang SC","normal")}var LangManager=(yBa.gG=function(t){t=t.split("|"),t=parseInt(t[0],10);return this.IU(t)},yBa.kU=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return yBa.gG(e.join("|"))},yBa.LU=function(t){t=yBa.kU(t);return-1!==yBa.EU.indexOf(t)},yBa.IU=function(t){return 32<t&&t<591?"en":4096<=t&&t<=4255?"my":3584<=t&&t<=3711?"th":6016<=t&&t<=6143?"km":3712<=t&&t<=3839?"lao":1536<=t&&t<=1791?"arabic":"ch"},yBa.prototype.D$=function(t){void 0===t&&(t="ch");var e,r=this.OU[t];return r||(e=LangConf[t]||LangConf.default,r=new Lang(e),this.OU[t]=r),r},yBa.EU=[LangConf.my.type,LangConf.km.type,LangConf.PU.type],yBa);function yBa(){this.OU={}}var CHN=[["90.398619","47.62125"],["90.493569","47.512157"],["90.491338","47.430787"],["90.552986","47.391174"],["90.522859","47.318461"],["90.584915","47.224989"],["90.782025","47.019194"],["90.923517","46.97996"],["90.986624","46.807403"],["91.082926","46.722064"],["91.051812","46.596604"],["91.100242","46.564068"],["91.102624","46.537196"],["90.935125","46.300398"],["91.032801","46.126363"],["91.055181","46.011658"],["90.741148","45.713536"],["90.699563","45.544726"],["90.700228","45.504993"],["90.795887","45.449956"],["90.832257","45.31629"],["90.919719","45.26871"],["90.920899","45.225065"],["91.136978","45.244316"],["91.253943","45.164928"],["91.372068","45.142003"],["91.45689","45.18485"],["91.624753","45.098124"],["92.062061","45.11548"],["92.497694","45.030848"],["92.887666","45.075869"],["93.513157","44.997233"],["94.22699","44.694971"],["94.374082","44.542037"],["94.620202","44.47394"],["94.737532","44.366876"],["95.002041","44.282908"],["95.42701","44.324539"],["95.440292","44.292217"],["95.365491","44.054053"],["95.549126","44.026335"],["95.883651","43.431746"],["95.911953","43.287656"],["96.385653","42.919774"],["96.41151","42.75927"],["97.176454","42.824161"],["98.198333","42.682435"],["99.505985","42.597497"],["99.964106","42.676693"],["100.259793","42.666107"],["100.320604","42.718863"],["100.867753","42.700052"],["101.814637","42.530852"],["102.090733","42.250567"],["102.451458","42.173439"],["102.716911","42.181644"],["103.426452","41.910629"],["103.858223","41.830321"],["104.537873","41.903108"],["104.55755","41.881352"],["104.554117","41.69046"],["104.929798","41.682608"],["105.010371","41.620463"],["105.220141","41.778353"],["105.732529","41.977008"],["106.776853","42.319288"],["107.167833","42.354897"],["107.458928","42.487147"],["107.937949","42.433308"],["108.241189","42.489425"],["108.84269","42.425722"],["109.022141","42.487574"],["109.290662","42.465227"],["109.534657","42.500548"],["109.723763","42.60669"],["110.100045","42.671172"],["110.420666","42.80617"],["111.005001","43.354829"],["111.446257","43.521761"],["111.555004","43.519925"],["111.780481","43.697712"],["111.925235","43.719055"],["111.936243","43.796237"],["111.863286","43.902314"],["111.643689","44.039247"],["111.386948","44.360034"],["111.610923","44.793044"],["111.742544","44.988614"],["111.9942","45.118751"],["112.435906","45.103062"],["112.61512","44.956037"],["112.806373","44.882816"],["113.624854","44.775834"],["113.896701","44.9424"],["114.104283","44.984106"],["114.437113","45.233044"],["114.543629","45.41585"],["114.742713","45.46746"],["114.977202","45.40645"],["115.36123","45.421513"],["115.688202","45.487095"],["116.023886","45.712008"],["116.163919","45.717567"],["116.251037","45.785617"],["116.213851","45.874652"],["116.246574","45.98171"],["116.56904","46.316673"],["116.83033","46.413023"],["117.353361","46.390324"],["117.41533","46.528251"],["117.39222","46.582448"],["117.411768","46.610108"],["117.618878","46.628442"],["117.72387","46.549579"],["118.312433","46.768455"],["118.774374","46.71799"],["118.828619","46.795917"],["118.912926","46.804113"],["118.941979","46.764971"],["119.028625","46.769292"],["119.119864","46.669494"],["119.724391","46.623078"],["119.791059","46.707882"],["119.884572","46.701717"],["119.896224","46.880494"],["119.836485","46.899381"],["119.742007","47.13776"],["119.30249","47.404711"],["119.315214","47.461827"],["119.134262","47.517476"],["119.10804","47.64174"],["118.755577","47.747779"],["118.55396","47.96464"],["118.177657","48.02096"],["117.82558","47.987997"],["117.388809","47.612384"],["117.082887","47.796869"],["116.816533","47.867783"],["116.452289","47.808327"],["116.270714","47.845797"],["115.938377","47.653883"],["115.559971","47.900966"],["115.500727","48.161305"],["115.791907","48.279437"],["115.776629","48.537807"],["116.042275","48.826715"],["116.024444","48.890046"],["116.709459","49.880215"],["117.07866","49.723328"],["117.482128","49.648667"],["117.801998","49.554185"],["117.858689","49.620567"],["118.068073","49.643304"],["118.210831","49.759243"],["118.358674","49.80286"],["118.37378","49.853853"],["118.468623","49.857768"],["118.559926","49.957101"],["119.082034","50.01451"],["119.311051","50.169532"],["119.328389","50.327724"],["119.175332","50.320094"],["119.103534","50.373674"],["119.103642","50.409488"],["119.224019","50.469114"],["119.262214","50.625767"],["119.470096","50.763554"],["119.480245","50.910299"],["119.734497","51.106944"],["119.73542","51.228925"],["119.789064","51.243368"],["119.787948","51.298691"],["119.896417","51.365189"],["119.889615","51.410731"],["119.950318","51.426267"],["120.067241","51.699773"],["120.632029","51.963004"],["120.755196","52.16206"],["120.733974","52.23734"],["120.60276","52.318868"],["120.688398","52.529211"],["120.459208","52.615218"],["120.046556","52.554881"],["120.004778","52.785297"],["120.275145","52.889292"],["120.877526","53.323248"],["121.231921","53.310391"],["122.338707","53.534212"],["122.443142","53.474191"],["122.84101","53.486577"],["123.278553","53.592823"],["123.480492","53.533829"],["123.518364","53.587614"],["123.901491","53.509565"],["124.129157","53.379309"],["124.260864","53.404185"],["124.447374","53.252351"],["124.696798","53.233398"],["124.854212","53.143501"],["124.877429","53.19179"],["125.14374","53.233437"],["125.500989","53.129213"],["125.53472","53.084642"],["125.631731","53.108131"],["125.776978","53.000452"],["125.732839","52.906456"],["125.842016","52.927481"],["125.973551","52.795444"],["126.049747","52.829373"],["126.137295","52.788424"],["126.136093","52.7501"],["126.082878","52.727183"],["126.094744","52.66376"],["126.01078","52.632295"],["126.225078","52.557751"],["126.227546","52.502887"],["126.28664","52.498733"],["126.378071","52.405299"],["126.365626","52.334723"],["126.460233","52.313556"],["126.457937","52.278438"],["126.370797","52.21752"],["126.587327","52.146539"],["126.544647","52.022831"],["126.483493","52.004144"],["126.489866","51.963387"],["126.757379","51.72942"],["126.769931","51.638237"],["126.737959","51.604012"],["126.870396","51.541384"],["126.8313","51.449554"],["126.939726","51.411373"],["126.952021","51.35238"],["127.007918","51.339647"],["126.930671","51.194554"],["126.950047","51.077214"],["127.328668","50.761993"],["127.324612","50.674039"],["127.399564","50.585975"],["127.336199","50.480736"],["127.39435","50.441709"],["127.374866","50.346296"],["127.622938","50.242265"],["127.624762","50.159938"],["127.524126","50.053819"],["127.569466","49.832087"],["127.686474","49.798414"],["127.716987","49.69577"],["127.838395","49.617717"],["128.185065","49.56898"],["128.533065","49.633229"],["128.791094","49.618148"],["128.84167","49.562161"],["128.811865","49.506248"],["129.022107","49.485245"],["129.11165","49.389985"],["129.230032","49.429552"],["129.343135","49.392234"],["129.383497","49.461849"],["129.526126","49.451932"],["129.593332","49.316758"],["129.745059","49.313625"],["129.972146","49.057136"],["130.243692","48.89923"],["130.444579","48.939218"],["130.526934","48.889044"],["130.693552","48.907086"],["130.705612","48.869994"],["130.580449","48.630526"],["130.630317","48.609845"],["130.648105","48.52472"],["130.790884","48.525345"],["130.778868","48.413864"],["130.875106","48.300724"],["130.708423","48.108792"],["130.914073","47.945556"],["131.01546","47.736076"],["131.552374","47.750448"],["131.621768","47.692216"],["131.711934","47.740348"],["131.958075","47.703033"],["131.995368","47.741041"],["132.235458","47.739381"],["132.340472","47.796162"],["132.546873","47.750881"],["132.655685","47.89209"],["132.654505","47.979308"],["132.811511","47.967327"],["133.097413","48.158185"],["133.473394","48.128346"],["133.728504","48.281365"],["134.199908","48.411499"],["134.519091","48.448618"],["134.797053","48.402511"],["134.903462","48.476549"],["135.111473","48.465979"],["135.087461","48.366044"],["134.70854","48.235879"],["134.705815","48.142967"],["134.587133","47.991745"],["134.802439","47.732613"],["134.805079","47.701502"],["134.584837","47.454022"],["134.327302","47.405829"],["134.203448","47.309543"],["134.189801","47.25835"],["134.258273","47.190339"],["134.25029","47.096963"],["134.160018","47.066453"],["134.091868","46.968583"],["134.042215","46.633997"],["133.892806","46.477753"],["133.978872","46.404235"],["133.938468","46.35728"],["133.943124","46.251663"],["133.734856","46.143924"],["133.77584","46.068467"],["133.698828","45.924364"],["133.509421","45.823745"],["133.533154","45.779212"],["133.488886","45.719859"],["133.513906","45.69461"],["133.496869","45.599732"],["133.229721","45.489276"],["133.168674","45.414886"],["133.124621","45.258199"],["133.158975","45.105773"],["132.946351","44.989767"],["131.996377","45.226214"],["131.893723","45.301592"],["131.80903","45.186922"],["131.72307","45.208468"],["131.688416","45.166214"],["131.716461","45.107939"],["131.507506","44.942491"],["131.131804","44.90387"],["131.021662","44.839439"],["131.137726","44.723122"],["131.338398","44.056058"],["131.273661","43.974086"],["131.248341","43.566337"],["131.344342","43.514183"],["131.346252","43.391702"],["131.236002","43.22857"],["131.242955","43.131057"],["131.13749","43.018486"],["131.168904","42.923466"],["131.065779","42.901952"],["131.05005","42.834641"],["130.673962","42.819219"],["130.46123","42.731347"],["130.617421","42.685874"],["130.650616","42.595365"],["130.604267","42.509264"],["130.661752","42.412289"],["130.553477","42.421191"],["130.507536","42.571366"],["130.42958","42.523293"],["130.416105","42.590452"],["130.235238","42.692151"],["130.237405","42.873951"],["130.125611","42.876169"],["130.075765","42.911319"],["130.092008","42.956423"],["129.933178","42.975108"],["129.878311","42.92378"],["129.795163","42.719399"],["129.815032","42.601778"],["129.735103","42.411401"],["129.607751","42.418118"],["129.55415","42.330996"],["129.383025","42.403749"],["129.268527","42.323223"],["129.222093","42.257635"],["129.2434","42.19201"],["128.992774","42.075243"],["128.959644","41.997184"],["128.121765","41.974471"],["128.183949","41.746614"],["128.336234","41.608881"],["128.268621","41.434008"],["128.127944","41.337429"],["128.00482","41.417516"],["127.65285","41.377517"],["127.537794","41.447986"],["127.248116","41.454805"],["127.234962","41.492217"],["127.08566","41.544545"],["127.128081","41.592273"],["127.012339","41.679643"],["127.035706","41.702541"],["126.914964","41.778689"],["126.809177","41.669562"],["126.74607","41.691325"],["126.612003","41.629975"],["126.529799","41.412013"],["126.562243","41.368516"],["126.557908","41.33825"],["126.45328","41.325763"],["126.3043","41.139979"],["126.148946","41.070584"],["126.132917","40.990783"],["126.041744","40.924117"],["126.041787","40.876401"],["125.721896","40.840697"],["125.681319","40.80754"],["125.712733","40.774611"],["125.686641","40.761853"],["125.582743","40.75319"],["125.423162","40.624246"],["125.310595","40.636606"],["125.022783","40.521123"],["125.06057","40.46396"],["124.907556","40.445935"],["124.374311","40.078794"],["124.388452","39.905638"],["123.741782","39.10294"],["123.282201","38.058466"],["124.24299","31.368588"],["124.714351","29.508006"],["125.072136","25.859069"],["124.935837","25.676612"],["123.836839","25.5127"],["122.751321","24.515956"],["121.947788","22.070621"],["121.867355","21.383021"],["119.827087","18.177352"],["119.026527","16.873489"],["119.11665","15.951676"],["119.101406","14.063252"],["119.100623","12.209516"],["119.07742","11.23357"],["116.011301","7.678721"],["114.941852","6.182877"],["114.229887","5.47862"],["113.86269","4.692236"],["112.795642","3.695169"],["111.953841","3.231846"],["109.894631","3.714037"],["108.659956","4.748032"],["107.925439","5.91737"],["107.96348","6.895899"],["108.555028","9.28242"],["110.128544","11.338543"],["109.983314","12.44102"],["109.806102","13.535124"],["109.636428","14.636855"],["109.78629","15.402577"],["109.449813","15.723154"],["108.117871","17.258818"],["107.310076","18.842045"],["107.374728","19.467179"],["108.051095","20.114414"],["108.328478","21.187373"],["108.278139","21.403412"],["108.107378","21.47839"],["107.943356","21.509097"],["107.849844","21.619412"],["107.547355","21.55724"],["107.470751","21.571209"],["107.451932","21.615722"],["107.357798","21.570152"],["107.289755","21.702532"],["107.207551","21.682454"],["106.998789","21.79714"],["107.015655","21.907972"],["106.951239","21.893876"],["106.768184","21.978429"],["106.703854","21.935422"],["106.674027","21.941175"],["106.664565","22.266461"],["106.643493","22.30484"],["106.538715","22.328641"],["106.53142","22.460275"],["106.592939","22.622033"],["106.708553","22.615477"],["106.793547","22.794758"],["106.548972","22.899047"],["106.304634","22.830954"],["106.190543","22.951201"],["106.088791","22.966118"],["105.867991","22.889816"],["105.712488","23.033058"],["105.550311","23.045755"],["105.530806","23.163759"],["105.330691","23.346393"],["105.249667","23.237422"],["105.089657","23.231409"],["104.951169","23.149476"],["104.843495","23.101267"],["104.893084","22.94393"],["104.747257","22.79551"],["104.567764","22.813411"],["104.371855","22.65974"],["104.249053","22.720536"],["104.237015","22.806132"],["104.137495","22.783462"],["104.078336","22.740585"],["104.017096","22.520843"],["103.962035","22.492019"],["103.666692","22.741534"],["103.525093","22.580551"],["103.458703","22.648987"],["103.394201","22.751092"],["103.341286","22.767397"],["103.306804","22.661878"],["103.215652","22.621855"],["103.205309","22.536362"],["103.107505","22.486567"],["103.076606","22.416444"],["102.91784","22.456309"],["102.840786","22.583305"],["102.610223","22.696625"],["102.558017","22.673838"],["102.493515","22.738071"],["102.424293","22.676273"],["102.446694","22.621241"],["102.327948","22.511268"],["102.278531","22.386786"],["102.142661","22.36867"],["102.03475","22.427651"],["101.942096","22.415036"],["101.8765","22.355136"],["101.764791","22.472926"],["101.700847","22.453176"],["101.694624","22.349917"],["101.579332","22.223979"],["101.631925","21.988099"],["101.718335","21.962549"],["101.79863","21.848016"],["101.778824","21.73654"],["101.856952","21.62392"],["101.847124","21.595911"],["101.773932","21.558438"],["101.760328","21.349162"],["101.862724","21.239522"],["101.764727","21.115389"],["101.663511","21.164623"],["101.587808","21.146813"],["101.574161","21.209359"],["101.53264","21.221881"],["101.293538","21.149214"],["101.203866","21.206559"],["101.216612","21.289294"],["101.114173","21.403592"],["101.183052","21.497378"],["101.111941","21.560533"],["101.095719","21.734009"],["100.901892","21.659343"],["100.747526","21.494902"],["100.586185","21.423588"],["100.468576","21.433695"],["100.414267","21.504705"],["100.248806","21.434534"],["100.115855","21.481604"],["100.078626","21.591362"],["100.11579","21.654357"],["100.010068","21.666462"],["99.916813","21.811046"],["99.968591","21.972539"],["99.950867","22.023392"],["99.699748","22.008512"],["99.585378","22.083453"],["99.19384","22.094388"],["99.129961","22.147006"],["99.24403","22.347694"],["99.226069","22.407775"],["99.348979","22.505302"],["99.289627","22.751963"],["99.429595","22.858203"],["99.422858","22.95454"],["99.521735","22.955884"],["99.488432","23.051046"],["99.336512","23.101188"],["99.258964","23.048934"],["99.10449","23.057463"],["98.99924","23.151389"],["98.858693","23.167152"],["98.89811","23.292382"],["98.844295","23.323341"],["98.878284","23.4184"],["98.821571","23.466061"],["98.773527","23.530055"],["98.849638","23.617887"],["98.774085","23.751823"],["98.656368","23.775684"],["98.63961","23.801661"],["98.649909","23.978332"],["98.828974","24.077833"],["98.83893","24.109859"],["98.594849","24.051324"],["98.534853","24.098401"],["98.118939","24.06406"],["97.652578","23.812007"],["97.500916","23.916402"],["97.507889","23.946076"],["97.703905","24.12772"],["97.7321","24.242073"],["97.646012","24.307132"],["97.678134","24.384313"],["97.653759","24.420913"],["97.528617","24.403523"],["97.504349","24.421636"],["97.520614","24.750904"],["97.686181","24.867223"],["97.726886","24.872596"],["97.701159","24.901891"],["97.691374","25.085579"],["97.816257","25.289948"],["97.844152","25.297669"],["97.93803","25.249897"],["98.122308","25.413237"],["98.152177","25.643055"],["98.313818","25.589382"],["98.380058","25.615679"],["98.510756","25.863626"],["98.635018","25.83211"],["98.668857","25.860517"],["98.546226","26.121072"],["98.648708","26.171346"],["98.686366","26.138757"],["98.648","26.279486"],["98.751404","26.620222"],["98.701365","26.849746"],["98.733852","27.033154"],["98.685272","27.065508"],["98.663149","27.194049"],["98.708661","27.325701"],["98.657935","27.422786"],["98.67244","27.532116"],["98.574979","27.540164"],["98.537407","27.61841"],["98.464022","27.631357"],["98.417695","27.512725"],["98.29766","27.498051"],["98.144388","27.832814"],["98.155954","27.920407"],["98.109477","27.953809"],["98.111","28.123353"],["97.991245","28.182664"],["97.984571","28.253152"],["97.904449","28.328541"],["97.775702","28.306704"],["97.650433","28.498038"],["97.537651","28.471615"],["97.537544","28.300942"],["97.374809","28.215134"],["97.340262","28.085365"],["97.441328","28.020526"],["97.41045","27.866111"],["97.271254","27.865238"],["97.104206","27.710621"],["97.074959","27.716851"],["96.959302","27.833554"],["96.799979","27.862962"],["96.485238","28.041967"],["96.435456","28.122218"],["96.282742","28.11548"],["96.254032","28.195619"],["96.011753","28.160892"],["95.866721","28.266533"],["95.747824","28.246895"],["95.417182","28.118906"],["95.304315","27.916842"],["94.898787","27.716889"],["94.531603","27.567615"],["94.290032","27.552854"],["93.888688","27.17204"],["93.845987","27.008916"],["93.571308","26.909059"],["92.944937","26.862668"],["92.647405","26.922873"],["92.093539","26.830122"],["92.094247","26.952103"],["91.998589","27.089524"],["92.083004","27.299047"],["92.034273","27.387239"],["91.995907","27.444668"],["91.729424","27.433927"],["91.566002","27.518015"],["91.534996","27.644815"],["91.602566","27.75719"],["91.514804","27.82382"],["91.562676","27.867913"],["91.468799","27.914302"],["91.441784","27.98019"],["91.319818","28.026891"],["91.09123","27.815659"],["90.700164","28.042914"],["90.592875","27.992071"],["90.457885","28.016188"],["90.284765","28.126494"],["90.15898","28.149257"],["90.026414","28.108761"],["89.808083","28.209972"],["89.741178","28.14466"],["89.620585","28.133666"],["89.394701","27.853894"],["89.261577","27.776101"],["89.129934","27.494282"],["89.208705","27.359876"],["89.003119","27.183627"],["88.914757","27.261172"],["88.754318","27.459692"],["88.742559","27.575756"],["88.824484","27.683585"],["88.858366","27.84585"],["88.817167","27.989323"],["88.749833","28.04227"],["88.643789","28.079175"],["88.414536","27.948938"],["88.164768","27.927649"],["88.119621","27.836742"],["87.844298","27.914245"],["87.731731","27.773994"],["87.596998","27.78341"],["87.555606","27.832169"],["87.226918","27.783961"],["87.114007","27.809055"],["87.017899","27.921014"],["86.741974","28.007834"],["86.699681","28.06541"],["86.621253","28.036683"],["86.583402","28.057988"],["86.53626","27.935498"],["86.410089","27.875861"],["86.21079","27.953771"],["86.168518","28.117581"],["86.115561","28.075237"],["86.149271","27.905693"],["85.994046","27.879218"],["85.944521","27.932939"],["85.832512","28.151055"],["85.730202","28.210313"],["85.701256","28.320003"],["85.608344","28.222546"],["85.501399","28.296408"],["85.379283","28.245137"],["85.108273","28.308745"],["85.080035","28.467918"],["85.159664","28.55567"],["85.153999","28.618263"],["85.06716","28.641711"],["84.995663","28.560816"],["84.851232","28.539159"],["84.68178","28.609315"],["84.624424","28.696084"],["84.465938","28.711423"],["84.389849","28.828396"],["84.202845","28.880867"],["84.21602","29.009754"],["84.163899","29.035197"],["84.138279","29.170731"],["84.156046","29.210987"],["84.110534","29.218441"],["84.085858","29.266484"],["83.922973","29.294016"],["83.658078","29.134976"],["83.571818","29.151918"],["83.232014","29.552591"],["83.070545","29.578981"],["82.920063","29.684809"],["82.816744","29.661877"],["82.675381","29.739992"],["82.684436","29.800693"],["82.605515","29.811846"],["82.541184","29.930689"],["82.159367","30.045582"],["82.174859","30.141657"],["82.084479","30.216893"],["82.077913","30.310431"],["81.993091","30.291904"],["81.637645","30.413095"],["81.562006","30.34101"],["81.44238","30.380465"],["81.419613","30.185719"],["81.306617","30.138261"],["81.279452","29.994378"],["81.11603","30.010804"],["80.995588","30.23662"],["80.302677","30.539587"],["80.0878","30.543727"],["79.94236","30.672449"],["79.868267","30.834188"],["79.825373","30.839126"],["79.673774","30.945519"],["79.593372","30.894565"],["79.4033","31.036535"],["79.346716","31.001927"],["79.336288","30.933391"],["79.224193","30.920174"],["79.170227","30.981969"],["79.092743","30.963258"],["78.986249","31.027673"],["78.96668","31.157988"],["78.856924","31.281503"],["78.783796","31.274131"],["78.728542","31.344273"],["78.757918","31.433515"],["78.697536","31.51499"],["78.804524","31.611708"],["78.62458","31.82264"],["78.722126","31.927562"],["78.578596","31.999524"],["78.497701","32.11424"],["78.432641","32.118838"],["78.402622","32.220389"],["78.4762","32.31131"],["78.36638","32.528271"],["78.381336","32.554898"],["78.75176","32.731065"],["78.809223","32.496551"],["78.976872","32.364195"],["79.005883","32.376536"],["79.080126","32.394077"],["79.114029","32.491665"],["79.279168","32.61355"],["79.272795","32.713951"],["79.195912","32.779409"],["79.222884","32.93039"],["79.135616","33.001861"],["79.1289","33.16414"],["78.818901","33.407102"],["78.715496","33.540948"],["78.723736","33.604683"],["78.656015","33.65053"],["78.749506","33.746395"],["78.715582","33.972994"],["78.631468","34.014908"],["78.635867","34.100789"],["78.894839","34.171104"],["78.97243","34.341399"],["78.867137","34.336615"],["78.698266","34.491737"],["78.566988","34.478543"],["78.527312","34.539705"],["78.430667","34.514354"],["78.403587","34.570207"],["78.247139","34.615374"],["78.238835","34.685346"],["78.179204","34.722162"],["78.172767","34.964414"],["78.056982","35.102584"],["77.985699","35.231108"],["77.986279","35.376996"],["78.060694","35.455461"],["77.904546","35.435236"],["77.815948","35.484733"],["77.688854","35.41908"],["77.389219","35.439747"],["77.300084","35.509365"],["77.189727","35.490691"],["76.844516","35.637645"],["76.746969","35.630442"],["76.675837","35.721674"],["76.57151","35.752903"],["76.552477","35.878323"],["76.372211","35.795695"],["76.149781","35.797227"],["76.124933","35.947734"],["75.922673","36.058952"],["75.911558","36.150212"],["76.037836","36.25097"],["75.962627","36.325913"],["75.987883","36.449905"],["75.852334","36.642976"],["75.645268","36.740208"],["75.442793","36.696296"],["75.389578","36.92691"],["75.229053","36.936669"],["75.144038","36.993436"],["74.896481","36.905551"],["74.830134","37.022531"],["74.731107","36.999897"],["74.690745","37.052831"],["74.559724","37.004866"],["74.481919","37.046871"],["74.437845","37.120308"],["74.499922","37.266966"],["74.739861","37.314987"],["74.866312","37.253902"],["75.109062","37.372562"],["75.102367","37.44057"],["74.921629","37.536802"],["74.864573","37.654148"],["74.964759","37.773242"],["74.890065","37.834937"],["74.908884","37.982278"],["74.777327","38.153069"],["74.761705","38.335766"],["74.838288","38.415972"],["74.834661","38.466073"],["74.630191","38.571841"],["74.373536","38.625873"],["74.159667","38.646204"],["74.103234","38.581"],["74.111817","38.521998"],["74.000838","38.494528"],["73.77285","38.599147"],["73.670411","38.8621"],["73.725193","38.95749"],["73.802719","38.951449"],["73.807654","38.986017"],["73.72221","39.008697"],["73.473516","39.38863"],["73.616295","39.498494"],["73.852308","39.511093"],["73.918183","39.600828"],["73.897347","39.705585"],["73.808942","39.800228"],["73.93934","39.994893"],["73.923182","40.040084"],["74.206402","40.150079"],["74.349396","40.120697"],["74.57305","40.295485"],["74.65313","40.30568"],["74.68538","40.371234"],["74.834146","40.370645"],["74.764109","40.445837"],["74.82522","40.547706"],["74.991968","40.485604"],["75.234225","40.478276"],["75.595829","40.68866"],["75.623209","40.675235"],["75.670288","40.537172"],["75.761075","40.482617"],["75.702088","40.361506"],["75.718331","40.319244"],["75.831778","40.356634"],["75.909498","40.327457"],["75.962198","40.405801"],["76.169136","40.4108"],["76.276231","40.468254"],["76.350474","40.381058"],["76.518981","40.485522"],["76.629574","40.63177"],["76.618888","40.769281"],["76.705191","40.836687"],["76.738064","40.970777"],["76.866853","41.052415"],["77.002079","41.102703"],["77.174621","41.038594"],["77.761016","41.051719"],["77.819595","41.177071"],["78.104789","41.252161"],["78.153155","41.41058"],["78.633699","41.494773"],["78.691227","41.573398"],["79.204752","41.752489"],["79.314144","41.836204"],["79.760721","41.919283"],["79.886034","42.062214"],["80.133162","42.067184"],["80.141101","42.212865"],["80.253518","42.271926"],["80.176806","42.427971"],["80.233755","42.509043"],["80.134728","42.629333"],["80.233669","42.836907"],["80.527124","42.908804"],["80.358446","43.012006"],["80.363209","43.05597"],["80.77054","43.196057"],["80.751915","43.283969"],["80.657952","43.321619"],["80.722024","43.489763"],["80.498157","43.799783"],["80.367136","44.112086"],["80.382199","44.282371"],["80.320637","44.484489"],["80.375676","44.600628"],["80.200903","44.711915"],["80.153825","44.809898"],["79.982829","44.769908"],["79.863417","44.896027"],["79.863911","44.925979"],["80.099001","45.081976"],["80.380783","45.073778"],["80.472493","45.151008"],["80.593643","45.1361"],["80.723355","45.20611"],["80.897505","45.157969"],["81.777248","45.412611"],["81.933761","45.262246"],["82.295816","45.254845"],["82.544253","45.206065"],["82.569401","45.340669"],["82.52743","45.402307"],["82.265496","45.514783"],["82.238288","45.626914"],["82.311373","45.780155"],["82.319655","45.956177"],["82.440763","46.003982"],["82.822452","46.775333"],["83.012309","47.24291"],["83.148286","47.241861"],["83.371532","47.179737"],["83.583899","47.087891"],["83.927865","46.999324"],["84.753106","47.038661"],["84.955001","46.896507"],["85.227256","47.083274"],["85.529079","47.087102"],["85.670679","47.295094"],["85.656817","47.416255"],["85.581307","47.505664"],["85.500433","48.023314"],["85.564678","48.210504"],["85.778117","48.445159"],["86.21609","48.461326"],["86.297393","48.520485"],["86.571493","48.56921"],["86.745751","48.738276"],["86.72689","48.79468"],["86.785169","48.850936"],["86.706676","48.980358"],["86.708565","49.011387"],["86.889625","49.162344"],["87.145572","49.183316"],["87.435358","49.10582"],["87.476878","49.120484"],["87.490826","49.169134"],["87.836187","49.198616"],["87.895432","49.115877"],["87.87024","49.056222"],["87.9406","48.974696"],["87.803872","48.87904"],["88.125672","48.72326"],["88.023491","48.591881"],["88.35763","48.495848"],["88.450756","48.423234"],["88.527102","48.435337"],["88.631537","48.352171"],["88.608513","48.280466"],["88.657844","48.207172"],["88.828926","48.136652"],["88.942652","48.146274"],["89.088199","48.017358"],["89.571383","48.066881"],["89.777999","47.863838"],["90.077548","47.910676"],["90.155997","47.747389"],["90.399628","47.669347"],["90.413575","47.647046"],["90.398619","47.62125"]],JPN=[["145.824681","43.408601"],["145.802708","43.198731"],["145.188847","43.068449"],["144.992667","42.907867"],["143.970938","42.890345"],["143.384543","42.351736"],["143.299399","41.875506"],["142.95333","42.100071"],["142.391844","42.272669"],["141.369501","42.535185"],["140.832544","42.147648"],["141.028863","41.945699"],["141.296655","41.765675"],["141.564447","41.265171"],["141.675004","40.481173"],["141.829516","40.300647"],["141.982619","40.122464"],["142.142627","39.594221"],["142.025897","39.368452"],["142.021777","39.317473"],["141.850783","38.901626"],["140.939308","35.65669"],["139.436268","34.193845"],["137.347075","34.1603"],["135.63835","33.29272"],["133.488103","32.70897"],["131.614016","31.325292"],["130.633951","28.842845"],["127.785048","25.789008"],["126.597333","26.344784"],["128.404011","28.563857"],["128.940636","30.856318"],["128.544464","32.79621"],["129.194642","34.475467"],["129.324698","34.765641"],["129.502255","34.700627"],["129.480282","33.855809"],["130.439605","33.915587"],["130.801388","34.159716"],["130.791882","34.445506"],["131.121471","34.437578"],["131.298124","34.567727"],["132.535148","35.287335"],["132.978675","36.154847"],["133.268559","36.366209"],["134.710796","35.708808"],["135.303308","35.794165"],["136.404389","36.456814"],["136.612743","37.37546"],["137.409252","37.580348"],["137.291471","36.906421"],["137.982237","37.126821"],["138.504087","37.383552"],["138.758146","37.83898"],["139.207212","38.04151"],["139.310081","38.315743"],["139.737028","38.85997"],["139.403318","39.234917"],["139.952634","39.328459"],["140.002073","39.745742"],["139.695586","39.824208"],["139.679107","40.025361"],["139.935912","40.077921"],["140.001079","40.309807"],["139.922802","40.434311"],["139.828954","40.646676"],["139.95008","40.766604"],["139.957833","41.432491"],["140.001779","42.027933"],["139.389291","42.038134"],["139.346719","42.242877"],["139.63099","42.291658"],["139.72712","42.641155"],["139.942098","42.710048"],["140.194783","42.842098"],["140.30396","42.856193"],["140.309453","43.306551"],["140.393224","43.399418"],["140.61976","43.355264"],["140.788732","43.238558"],["140.923314","43.24556"],["141.029058","43.24356"],["141.083989","43.216544"],["141.141667","43.185513"],["141.336675","43.240561"],["141.328435","43.731771"],["141.350408","43.792272"],["141.594854","43.937818"],["141.565334","44.291761"],["141.70541","44.45177"],["141.708157","44.742196"],["141.683437","45.002047"],["141.226594","45.076599"],["141.053559","45.165748"],["140.987641","45.335905"],["140.943696","45.481498"],["141.201589","45.501064"],["141.972005","45.52416"],["142.341996","45.204477"],["142.567215","45.014513"],["142.747966","44.801094"],["143.487122","44.343678"],["144.463587","44.078617"],["144.874201","44.098345"],["145.125513","44.222478"],["145.300832","44.391445"],["145.487445","44.320885"],["145.111163","43.848378"],["145.420933","43.545126"],["145.451146","43.393635"]],EAST=[["73.757316","29.95798"],["73.045185","28.989136"],["72.434431","28.60931"],["72.060098","28.097836"],["71.631749","27.60702"],["70.67236","27.593264"],["69.82743","27.041579"],["70.337045","26.566045"],["70.070655","26.098932"],["70.070655","25.85946"],["70.290717","25.713457"],["70.626599","25.671708"],["70.68451","25.201036"],["70.974064","24.791642"],["70.811914","24.612763"],["70.139151","24.465923"],["69.268014","24.435423"],["68.313114","24.267539"],["67.911051","23.808548"],["68.547651","23.00912"],["69.11724","22.684917"],["68.748682","22.406416"],["69.301519","21.536417"],["70.153052","20.55461"],["71.170222","20.332219"],["72.234349","21.204506"],["72.501752","21.087142"],["72.627589","19.003767"],["72.973641","16.878922"],["74.267757","13.888898"],["75.369075","10.48118"],["76.976429","7.781262"],["78.374805","8.242836"],["79.427902","9.641233"],["80.513091","10.734685"],["80.254133","11.953377"],["80.702994","13.082541"],["80.402232","15.312175"],["82.991824","16.887862"],["85.259974","19.051683"],["87.784208","21.10679"],["89.263244","21.658877"],["89.121009","23.437218"],["88.869364","23.717994"],["88.93501","24.317619"],["88.267603","24.596482"],["88.727129","25.073086"],["89.186656","25.132532"],["88.891246","25.626788"],["88.650542","25.666241"],["88.201956","25.892841"],["88.420778","26.12883"],["88.54113","26.285892"],["89.241361","26.020727"],["89.613359","25.863309"],["89.657124","25.330477"],["90.190932","25.070998"],["91.175632","25.051175"],["91.811935","25.05221"],["92.234344","24.983507"],["92.104658","24.649259"],["91.844714","24.363456"],["91.46563","24.215373"],["90.999897","23.839459"],["91.216517","23.054471"],["91.389672","22.300847"],["92.125338","20.623521"],["93.946113","18.753448"],["92.823675","16.135717"],["91.224276","9.998681"],["93.522355","5.752403"],["96.409859","0.991383"],["100.048825","-3.72227"],["104.60328","-7.736835"],["114.01025","-9.967468"],["123.433702","-11.032285"],["123.717523","-10.536628"],["124.427075","-10.257467"],["125.004217","-9.79418"],["125.026253","-9.527403"],["125.12788","-9.406056"],["125.031601","-9.358561"],["124.946021","-9.216037"],["125.026253","-9.168516"],["125.192065","-9.13155"],["125.181368","-8.982538"],["124.999509","-8.987821"],["124.919277","-8.924418"],["125.095787","-8.596662"],["125.555784","-8.088612"],["125.721597","-8.120384"],["127.292232","-8.326419"],["132.424841","-8.447132"],["139.646777","-8.512957"],["141.039618","-9.209048"],["141.025347","-6.894209"],["140.978655","-6.887392"],["140.92235","-6.851943"],["140.912737","-6.791946"],["140.905871","-6.737397"],["140.850939","-6.695117"],["140.903124","-6.59554"],["140.945696","-6.509588"],["141.000442","-6.341825"],["140.971754","-2.322171"],["131.63417","2.671779"],["125.182746","17.665698"],["120.512231","19.243264"],["119.486602","16.550429"],["119.820154","12.379244"],["115.293339","5.77989"],["114.675587","4.850295"],["114.550618","4.735342"],["113.923024","4.60805"],["113.581092","3.881824"],["113.423754","3.763395"],["113.138025","3.427757"],["112.798973","3.119213"],["111.886744","2.960093"],["109.608393","3.016867"],["108.771364","3.935896"],["107.181008","7.101455"],["110.509765","12.398562"],["108.171244","18.449712"],["108.482399","21.923911"],["106.042422","23.36869"],["103.861684","23.500971"],["101.853026","22.51803"],["101.964992","22.453371"],["102.079606","22.467488"],["102.100842","22.366033"],["102.192713","22.264854"],["102.457234","22.052786"],["102.482552","21.991854"],["102.505944","21.933096"],["102.598494","21.858522"],["102.635027","21.768076"],["102.625285","21.706993"],["102.652076","21.663993"],["102.749497","21.641356"],["102.798208","21.673047"],["102.841349","21.836472"],["102.857688","21.688772"],["102.936435","21.684707"],["102.971433","21.587108"],["102.897061","21.530145"],["102.831439","21.416153"],["102.853313","21.363197"],["102.770191","21.249074"],["102.905811","20.975636"],["103.219101","20.747931"],["103.517772","20.714677"],["103.809332","20.581588"],["103.928404","20.796397"],["104.17602","20.868718"],["104.456453","20.674762"],["104.597217","20.649539"],["104.494205","20.561152"],["104.33078","20.448774"],["104.574769","20.381484"],["104.658948","20.213054"],["104.76838","20.149846"],["104.838529","20.181454"],["104.938282","20.043215"],["104.745932","19.888842"],["104.790827","19.817585"],["104.656142","19.725166"],["104.580381","19.643265"],["104.41625","19.738372"],["104.315236","19.711959"],["104.004834","19.776374"],["103.978829","19.601517"],["104.057089","19.487272"],["103.795479","19.292317"],["104.05618","19.205901"],["104.303857","19.041792"],["104.509718","18.953592"],["104.638381","18.819682"],["104.82816","18.734411"],["105.081179","18.714495"],["105.090265","18.561021"],["105.010482","18.494337"],["105.215532","18.232365"],["105.507333","18.022503"],["105.673181","17.706155"],["105.959258","17.411042"],["106.393016","16.974064"],["106.530565","16.907086"],["106.511314","16.705452"],["106.610307","16.485756"],["106.704089","16.360817"],["106.855183","16.430793"],["106.917705","16.245803"],["107.074009","16.275813"],["107.178212","16.130721"],["107.386617","15.975505"],["107.256364","15.895346"],["107.157745","15.729918"],["107.270294","15.538977"],["107.541111","15.371176"],["107.598724","15.119441"],["107.495192","15.087312"],["107.421241","14.973038"],["107.491494","14.719275"],["107.439728","14.558285"],["107.365777","14.619117"],["107.28443","14.576179"],["107.125343","14.454386"],["107.058787","14.468707"],["106.862816","14.336197"],["106.714913","14.443644"],["106.640961","14.525985"],["106.467176","14.622607"],["106.385829","14.475868"],["106.219438","14.500928"],["106.189858","14.42932"],["106.104814","14.407834"],["105.956911","14.346944"],["105.993887","14.192854"],["106.138092","14.056594"],["106.067838","13.984846"],["105.938423","13.948964"],["105.860774","14.067355"],["105.570516","14.196239"],["105.40579","14.123984"],["105.307739","14.207645"],["105.23322","14.257067"],["105.284207","14.321679"],["105.397946","14.336879"],["105.499919","14.435654"],["105.550906","14.617894"],["105.535217","14.773437"],["105.660723","14.90613"],["105.629347","15.019802"],["105.511685","15.118269"],["105.543062","15.182626"],["105.660723","15.2848"],["105.543062","15.368016"],["105.641113","15.40205"],["105.652879","15.526792"],["105.672489","15.723201"],["105.433244","15.866611"],["105.419865","16.077323"],["105.134284","16.158015"],["105.05029","16.303179"],["104.798307","16.56635"],["104.815106","16.791639"],["104.807079","17.064937"],["104.834545","17.357467"],["104.746654","17.518618"],["104.392993","17.569592"],["104.221867","17.790865"],["104.071113","18.043041"],["103.989584","18.196169"],["103.880878","18.236734"],["103.692584","18.269917"],["103.616878","18.310466"],["103.546996","18.349162"],["103.428584","18.336313"],["103.370348","18.277339"],["103.302336","18.221647"],["103.237773","18.102183"],["103.207191","18.040806"],["103.105249","17.937384"],["102.938746","17.875949"],["102.914959","17.827432"],["102.813018","17.765959"],["102.687291","17.753015"],["102.568359","17.830667"],["102.510593","17.840371"],["102.422244","17.921219"],["102.310109","17.960013"],["102.204769","17.995566"],["102.143605","18.066652"],["101.987295","17.966477"],["101.868364","17.927685"],["101.647491","17.811257"],["101.148809","17.535022"],["101.023374","17.599797"],["101.039054","17.808912"],["101.175591","17.993048"],["101.212078","18.10208"],["101.219896","18.173904"],["101.206865","18.240749"],["101.212078","18.344679"],["101.107829","18.394147"],["101.092192","18.45349"],["101.206865","18.578877"],["101.31372","18.655442"],["101.272021","18.741845"],["101.272021","18.830671"],["101.311114","18.939171"],["101.370997","19.079681"],["101.298023","19.148632"],["101.279779","19.212632"],["101.22818","19.375675"],["101.230424","19.441269"],["101.295484","19.487804"],["101.29997","19.591402"],["101.239397","19.633668"],["101.145173","19.587175"],["101.093574","19.629442"],["100.94102","19.650571"],["100.893907","19.65691"],["100.864742","19.616763"],["100.835578","19.570265"],["100.770518","19.534326"],["100.611233","19.574493"],["100.584312","19.52164"],["100.525983","19.540669"],["100.46541","19.637894"],["100.436245","19.777288"],["100.541687","19.91867"],["100.597773","20.190526"],["100.502946","20.195053"],["100.428788","20.262059"],["100.379218","20.36601"],["100.329779","20.413638"],["100.244635","20.387895"],["100.173224","20.317079"],["100.160865","20.244943"],["100.114789","20.260301"],["100.107922","20.315689"],["100.155988","20.507461"],["100.211891","20.650056"],["100.290818","20.736459"],["100.399973","20.811825"],["100.562866","20.788277"],["100.673701","20.899705"],["100.59616","20.954029"],["100.751867","21.254036"],["100.998402","21.338663"],["101.211622","21.580378"],["101.209043","21.846211"],["100.909901","21.894492"],["100.207565","21.580378"],["100.051491","22.159742"],["99.466212","22.436515"],["99.71333","23.024318"],["99.352488","23.281431"],["99.03983","24.3247"],["98.101855","24.95993"],["98.855913","25.608485"],["98.911088","26.812993"],["98.892697","27.483968"],["98.340947","27.826069"],["98.120247","28.377665"],["97.586888","28.733061"],["97.108705","28.329109"],["96.658506","27.787659"],["96.296725","28.010502"],["95.847241","28.136253"],["95.288126","27.787659"],["94.685158","27.233428"],["93.281889","26.647032"],["92.037851","26.720259"],["90.141229","26.820605"],["88.984724","26.833974"],["88.731159","27.080308"],["88.794435","27.331629"],["88.741186","27.914582"],["88.223484","27.953015"],["88.169108","27.50057"],["87.774017","27.262697"],["88.215457","26.870398"],["87.783036","26.535989"],["87.047344","26.702224"],["84.777332","27.310285"],["83.539214","27.665305"],["82.385985","27.880248"],["81.010299","28.662263"],["80.547568","29.001896"],["81.345045","30.304903"],["80.749935","31.185747"],["80.056967","31.015739"],["79.215234","31.178494"],["78.991224","31.346766"],["79.254658","31.656243"],["78.835019","31.979804"],["78.65109","32.12011"],["78.595912","32.240756"],["78.591313","32.400075"],["78.669483","32.54361"],["78.739513","32.426665"],["78.84424","32.288005"],["79.067657","32.24668"],["79.277111","32.470789"],["79.395802","32.676713"],["79.235221","33.233259"],["79.011803","33.47819"],["78.84424","33.681772"],["79.182009","34.336185"],["78.821102","34.565916"],["78.428537","34.758609"],["78.294895","34.940474"],["78.23791","35.530039"],["77.722544","35.628785"],["77.294994","35.609184"],["76.821489","35.701892"],["76.684572","35.988603"],["76.399329","35.919333"],["76.159724","35.933192"],["76.165429","36.20986"],["76.074151","36.366207"],["75.999987","36.641347"],["75.714744","36.787688"],["75.562518","36.805399"],["75.481245","36.811057"],["75.45651","36.950968"],["75.253968","37.023882"],["75.084541","37.066268"],["74.894884","37.084426"],["74.735572","37.122745"],["74.643309","37.074934"],["74.566145","37.033976"],["74.549925","36.938948"],["74.491692","37.015218"],["74.377803","36.998366"],["74.261908","36.915016"],["74.132106","36.91687"],["74.057933","36.840851"],["73.967535","36.853836"],["73.925813","36.892775"],["73.808039","36.908632"],["73.728388","36.920709"],["73.639124","36.911926"],["73.699986","36.820121"],["73.765904","36.814624"],["73.833196","36.776135"],["73.853795","36.743128"],["73.834569","36.711208"],["73.735692","36.736525"],["73.657414","36.707906"],["73.599736","36.711208"],["73.57227","36.735425"],["73.517339","36.729922"],["73.397862","36.757433"],["73.319585","36.738726"],["73.241307","36.720664"],["73.175389","36.732772"],["73.112218","36.71516"],["73.032567","36.686532"],["73.039433","36.651284"],["73.060033","36.609405"],["73.036687","36.564195"],["73.002355","36.529994"],["72.958409","36.507921"],["72.944676","36.475904"],["72.886998","36.474799"],["72.855412","36.448292"],["72.848546","36.400777"],["72.832334","36.374217"],["72.796629","36.362053"],["72.685258","36.303681"],["72.663286","36.274901"],["72.574022","36.267151"],["72.461412","36.175196"],["73.530389","35.809316"],["74.170542","35.420826"],["74.340245","35.055408"],["73.9237","34.612198"],["73.676858","34.332391"],["73.880481","33.422673"],["74.651862","32.906095"],["75.747223","32.542685"],["75.623802","32.256112"],["74.975842","31.968632"],["74.759855","31.732749"],["74.759855","30.955369"],["74.327882","30.584206"],["74.18929","30.224947"],["74.035013","29.864372"]],getOutseaData=function(t){return t&&"mapbox"===t?{boundsP16:[[CHN]],nebulaOutSea:[]}:{boundsP16:[[CHN],[JPN],[EAST]],nebulaOutSea:[[JPN],[EAST]]}},geoUtil=new GeometryUtilCls({}),CONSTS$1={sV:"https://webapi.amap.com/style_icon/sprite_v8@2x.png",EU:[LangConf.my.type,LangConf.km.type,LangConf.PU.type,LangConf.th.type,LangConf.$U.type]},MapboxLabelFormat$1=(NBa=LabelFormat,__extends(OBa,NBa),OBa.prototype.Ns=function(t,e){return NBa.prototype.Ns.call(this,t,e),this.rV(t)},OBa.prototype.rV=function(t){var e,r,n=t.data||{},i=n.poilabel||[],a={},o=this.hV(t);for(e in i)i.hasOwnProperty(e)&&(r=i[e],r=this.nV(r,o),a[e]=r);n=n.roadName||[],this.oV(n,{});return a},OBa.prototype.nV=function(t,e){for(var r=[],n=this.kQ,i=0,a=t;i<a.length;i++){var o,f,s,u,l,c,h,v=a[i],d=v.name,_=v.position,y=v.id,g=v.minzoom,p=v.maxzoom,m=v.style,b=void 0===m?{}:m;e&&!this.uV(_[0])||(o=b.lV,f=b.th,s=b.ih,u=b.nh,c=b.qU,l=b.eh,v=void 0===(h=b.textAnchor)?"bottom":h,m=b.rh,b.sh,h=b.Kr,b=b.Qr,g=[g,p],p=null,u&&c&&l&&(this.Fs[CONSTS$1.sV]=1,p=[{image:CONSTS$1.sV,size:[c[6]/2,c[7]/2],clipOrigin:[c[4],c[5]],clipSize:[c[6],c[7]]}]),u=null,d&&h&&(n[h]||(n[h]=Util$6.color2RgbaArray(h)),l=n[h],c=void 0,h=0,n[b]||(n[b]=Util$6.color2RgbaArray(b||"")),n[b]&&(c=n[b],h=3),b=this.fV(d)?[0,d.length]:[],this.Ws(d,b),u={txt:d,$G:b,direction:v||"center",offset:[0,0],style:{fontSize:m,fillColor:l,strokeColor:c,strokeWidth:h,BV:!1}}),g={data:{id:y,name:d,txt:d,position:_[0],RV:"relative",zooms:[f,s],extData:{id:y,type:"poi"}},opts:{zIndex:o,zooms:g,visible:!0}},p&&(g.opts.icon=p),u&&(g.opts.text=u),(g.opts.text||g.opts.icon)&&r.push(g))}return r},OBa.prototype.oV=function(t,e){for(var r=0,n=t;r<n.length;r++){var i=n[r].name,a=this.fV(i)?[0,i.length]:[];i&&this.Ws(i,a)}},OBa.prototype.DQ=function(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n],o=a.path,f=a.name||"",s=labelsUtil$2.aQ(f.split("")),u=a.distance||1e5,l=(_=a.style&&a.style[1]||{}).th,c=void 0===l?2:l,h=_.ih,v=void 0===h?22:h,d=_.Kr,a=_.Qr,l=_.rh,h=_.zIndex,_=_.Hr,_=void 0===_?"name_en":_;f&&o&&o.length&&(a={path:o,RV:"absolute",name:f,$G:[],CO:s,rank:h,BG:_,distance:u,zooms:[c,v],style:{fontSize:l||12,fillColor:d,strokeColor:a}},r.push(a))}return r},OBa.prototype.fV=function(t){t=LangManager.kU(t);return-1!==CONSTS$1.EU.indexOf(t)},OBa.prototype.uV=function(t){for(var e=ProjectionManager.getProjection("EPSG:3857").unproject(t[0],t[1]),r=getOutseaData("mapbox").boundsP16,n=0;n<r.length;n++){var i=r[n];if(geoUtil.isPointInPolygon(e,i[0]))return!1}return!0},OBa.prototype.hV=function(t){t=t.Ro,t=[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]];return this.cV(t)},OBa.prototype.cV=function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r],n=ProjectionManager.getProjection("EPSG:3857").unproject(n[0],n[1]);e.push(n)}for(var i=getOutseaData("mapbox").boundsP16,a=0;a<i.length;a++){var o=i[a];if(geoUtil.isRingInRingByMapboxB(e,o[0]))return!0}return!1},OBa.id="mapbox",OBa),NBa;function OBa(t){var e=NBa.call(this)||this;return e.kQ={},e}var Color$1=(LDa=KDa,KDa.Wb=function(t,e){return{rgba:t.rgba}},KDa.Gb=function(t){return new LDa(t.rgba)},KDa.Hb=function(t,e){void 0===e&&(e=[]);for(var r=0,n=t.length;r<n;r+=2)e[r/2]=parseInt(t.substr(r,2),16);return e},KDa.Yx=function(t){return t.startsWith("#")&&(t=t.substr(1)),colorNames[t]?LDa.Hb(colorNames[t].substr(1)):1===t.length?LDa.Hb(t+t+t+t+t+t):3===t.length?LDa.Hb(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]):6===t.length?LDa.Hb(t):[0,0,0]},KDa.normalize=function(t){for(var e=[],r=0,n=t.length;r<n;r++)e[r]=t[r]/255;return e},KDa.create=function(t){return t?new LDa(t):null},KDa.prototype.normalize=function(){return[this.rgba[0]/255,this.rgba[1]/255,this.rgba[2]/255,this.rgba[3]/255]},KDa.prototype.Vb=function(t){"string"==typeof t?colorNames[t]?this.Hb(colorNames[t].substr(1)):0!==t.length&&(t.startsWith("#")&&(t=t.substr(1)),1!==t.length?3!==t.length?6!==t.length?8!==t.length?t.startsWith("rgba(")?this.Yb(colorNames[t].substr(1)):t.startsWith("rgb(")&&this.Kb(colorNames[t].substr(1)):this.$b(t):this.Hb(t):this.Hb(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]):this.Hb(t+t+t+t+t+t)):t instanceof Array&&(this.rgba[0]=t[0],this.rgba[1]=t[1],this.rgba[2]=t[2],this.rgba[3]=t[3]||255)},KDa.prototype.Hb=function(t){this.$b(t+"FF")},KDa.prototype.$b=function(t){for(var e=0,r=t.length;e<r;e+=2)this.rgba[e/2]=parseInt(t.substr(e,2),16)},KDa.prototype.Kb=function(t){t=t.split(",");this.rgba[0]=parseInt(t[0].substr(4),10),this.rgba[1]=parseInt(t[1],10),this.rgba[2]=parseInt(t[2],10),this.rgba[3]=255},KDa.prototype.Yb=function(t){t=t.split(",");this.rgba[0]=parseInt(t[0].substr(5),10),this.rgba[1]=parseInt(t[1],10),this.rgba[2]=parseInt(t[2],10),this.rgba[3]=255*parseFloat(t[3])<<0},LDa=__decorate([InnerClass("Color")],KDa)),LDa;function KDa(t){this.type="AMap.Color",this.rgba=[],this.Vb(t)}var colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},NebulaLabelFormat$1=(hEa=LabelFormat,__extends(iEa,hEa),iEa.prototype.Ns=function(t,e){return e.lang&&(this.lang=e.lang),this._opts=e,this.bt=e.zoom,this.WW=e.ZL,this.rV(t,e.R_)},iEa.prototype.rV=function(t,e){var r,n,i=t.data||{},a=i.poilabel||[],o={},f=t.cQ;for(r in a)a.hasOwnProperty(r)&&(n=this.nV(a[r],{aV:t.zo.z<10,cQ:f,R_:e}),o[r]=n);i=i.roadName||[],i=this.oV(i,{R_:e});return o.eA=i,o},iEa.prototype.nV=function(t,e){void 0===e&&(e={});for(var r,n,i,a,o,f,s,u,l,c,h,v,d,_,y,g=CONSTS.Lj,p=g.file,m=g.size,b=CONSTS.Mp,x=(CONSTS.Rp,CONSTS.Pp),S=CONSTS.jp,M=this._opts.scale,C=e.aV,A=e.cQ,k=this.bt,w=[],T=this.lang,$=!A&&5<=k,I=0,L=t;I<L.length;I++){var F=L[I],P=F.cw,z=F.ew,B=F.pos,E=(K=labelsUtil$2.tQ(F,T,$?e.R_:void 0)).name,O=K.$G||[],D=F.rank,R=F.minzoom||b;if(C||F.maxzoom,r=F.Fp,n=F.Ep,(10002!==r||28!==n)&&(i=this.oA(r,n,this.WW),i&&(a=1<M||9<i.fontSize?i.fontSize:9,u=i.sn,l=i.Qe,c=i.forceShow,h=i.zIndex,G=i.zooms,v=labelsUtil$2.Jj([R,25],G)))){for(var N=(v=labelsUtil$2.$p(v))[0],H=[],U={};N<=v[1];){var j=this.vn.dn(r,n,N);j&&"0"!==j.He&&(Z=j.He,-1===H.indexOf(Z)&&(H.push(Z),U[Z]=[]),U[Z].push(N)),N++}(10002!==r||20!==n&&18!==n)&&16<a&&(a=15);var G=[v[0]-x,v[1]+S];10002===r&&(13===n||18===n)&&G[0]<=3&&(G[0]=2.5),d=u&&"https"+p[u],D={data:{id:P?P+n:"",position:B,name:E,txt:E,rank:D,BG:K.type,extData:{Lp:r,Ap:n,id:P,type:"poi",bz:z}},opts:{type:"billboard",angle:0,forceShow:c,zIndex:h,visible:!0,zooms:G}},_=i.nn||0,y=i.an||0;for(var V,W=[],K=void 0,P=[0,0],q=0;q<H.length;q++){var Z=H[q],Y=u&&this.aA(parseInt(Z,10)),J=m,Q=labelsUtil$2.$p(U[Z]),X=1;!E||"152"!==Z&&"153"!==Z&&"154"!==Z||(X=E.length<=2?1:E.length/2),V=vector$3.Up(J,2),d&&W.push({type:"image",image:d,clipOrigin:vector$3.add(Y,[0,0]),clipSize:J,size:[V[0]*X,V[1]],anchor:[10-20*_/24,10-20*y/24],angle:0,pe:!0,zooms:[Q[0]-x,Q[Q.length-1]+S]})}E&&(P=W.length&&W[0].image?(Z=H[0],A&&(K="bottom",P=[0,0]),"北京"===E?(K="top",[0,3]):"澳门"===E?(K="left",[0,-2]):"合肥"===E||"太原"===E||"西安"===E||"郑州"===E||"杭州"===E||"台北"===E?(K="bottom",[0,-3]):10002!==r||31!==n&&32!==n&&34!==n&&5!==n?1!==l&&("152"===Z||"153"===Z||"154"===Z)?(K="center",[0,-1]):(K="right",[0,-2]):(K="right",[-3,-3])):(K="center",[_,y]));z=""+r+n,G=this.uA[z];G?(o=G.faceColor,f=G.borderColor,s=G.Ke):(o=i.faceColor&&Color$1.normalize(i.faceColor.rgba),f=i.borderColor&&Color$1.normalize(i.borderColor.rgba),s=3===i.Qe?i.Ke&&Color$1.normalize(i.Ke.rgba):null,this.uA[z]={faceColor:o,borderColor:f,Ke:s}),P=E?{direction:K,offset:P,$G:O,style:{fontSize:a,fillColor:o,strokeColor:f,strokeWidth:2,padding:[0,1,0,1],backgroundColor:s,BV:!A&&5<=k}}:{},D.opts&&(D.opts.icon=W,D.opts.text=P),d&&(this.Fs[d]=1),E&&this.Ws(E,O),w.push(D),i=null}}return w},iEa.prototype.oV=function(t,e){void 0===e&&(e={});for(var r=CONSTS.Lj,n=r.file,i=r.size,a=CONSTS.Mp,o=CONSTS.Rp,f=CONSTS.Pp,s=CONSTS.jp,u=[],l=this._opts.scale,c=this.lang,h=e&&e.R_&&e.R_.protocol||"https",v=0,d=t;v<d.length;v++){var _,y=d[v],g=y.path,p=y.rank,m=y.minzoom||a,b=y.maxzoom||o,x=y.shield,S=y.shieldType,M=labelsUtil$2.tQ(y,c),C=M.name,A=M.$G;C&&this.Ws(C,A),x&&((_=Math.floor(g.length/2))<1||(y=[g[_-1],g[_]],A=S,(g=this.oA(40001,A,this.WW))&&(_=1<l||9<g.fontSize?g.fontSize:9,S=g.faceColor,g=g.He,m={data:{id:Util$6.stamp(this),position:y,RV:"relative",name:C,txt:x,rank:p,BG:M.type,extData:{type:"shield",Lp:40001,Ap:A}},opts:{type:"billboard",angle:0,zooms:[m-f,b+s],visible:!0}},b=this.aA(parseInt(g,10)),g=1<x.length/4?x.length/4:1,g=1<l?g:9*g/7,g={type:"image",image:h+n[0],clipOrigin:b,clipSize:i,size:[24*g,24],anchor:"center",angle:0,pe:!0},S=x?{direction:"center",offset:[0,0],style:{fontSize:_,fillColor:S&&Color$1.normalize(S.rgba),strokeWidth:0,padding:[0,1,0,1]}}:{},m.opts&&(m.opts.text=S,m.opts.icon=[g]),x&&this.Ws(x),u.push(m))))}return u},iEa.prototype.DQ=function(t,e){for(var r=CONSTS.Mp,n=CONSTS.Rp,i=CONSTS.Pp,a=CONSTS.jp,o=this.WW=e.zoom,f=0,s=[],u=this.lang,l=0,c=t;l<c.length;l++){var h,v,d,_,y,g,p,m,b=c[l],x=b.id,S=(y=labelsUtil$2.tQ(b,u)).name,M=y.$G||[];S&&(h=y.type,m=labelsUtil$2.EQ(S,M),v=labelsUtil$2.aQ(m),d=b.rank,g=b.Fp,p=b.Ep,f=b.distance||0,_=b.minzoom||r,y=b.maxzoom||n,g=(b=(m=this.vn.dn(g,p,o))&&m[1]||{}).fontSize,p=b.faceColor,m=b.borderColor,_=(b=labelsUtil$2.$p([_,y]))[0],y=b[1],S&&x&&g&&p&&(m={id:x,RV:"relative",name:S,$G:M,CO:v,rank:d,BG:h,distance:f,zooms:[_-i,y+a],style:{fontSize:g,fillColor:vector$3.Up(p.rgba,255),strokeColor:m&&vector$3.Up(m.rgba,255)}},s.push(m)))}return s},iEa.prototype.aA=function(t){var e=CONSTS.Lj,r=e.Rj,n=e.size,e=Math.floor(t/r);return t%10==0&&--e,[(t-r*e-1)*n[0],e*n[1]]},iEa.prototype.oA=function(t,e,r){var n=[3,20],i=this.vn.dn(t,e,r),a=this.vn.mn(t,e);if(!i)for(var o=1;(n[0]<=r-o||r+o<=n[1])&&!(i=(i=this.vn.dn(t,e,r-o))||this.vn.dn(t,e,r+o));)o++;return i&&(i.zooms=a),i},iEa.prototype.mN=function(t,e){var r=[0,0];if("0"===t)switch(e){case"3":r=[6,6];break;case"4":case"5":case"6":r=[9,9]}return r},iEa.prototype.TN=function(t,e,r){void 0===r&&(r=[0,0]);var n=r;if("0"===t)switch(e){case"3":n=[30,30];break;case"4":case"5":case"6":n=[20,20]}return n},iEa.id="nebula",iEa),hEa;function iEa(t){var e=hEa.call(this)||this;return e.bt=20,e.WW=20,e._opts={},e.uA={},e.vn=t.vn,e}function quickselect(t,e,r,n,i){quickselectStep(t,e,r||0,n||t.length-1,i||defaultCompare)}function quickselectStep(t,e,r,n,i){for(;r<n;){var a,o,f,s;600<n-r&&(a=n-r+1,o=e-r+1,s=Math.log(a),f=.5*Math.exp(2*s/3),s=.5*Math.sqrt(s*f*(a-f)/a)*(o-a/2<0?-1:1),quickselectStep(t,e,Math.max(r,Math.floor(e-o*f/a+s)),Math.min(n,Math.floor(e+(a-o)*f/a+s)),i));var u=t[e],l=r,c=n;for(swap(t,r,e),0<i(t[n],u)&&swap(t,r,n);l<c;){for(swap(t,l,c),l++,c--;i(t[l],u)<0;)l++;for(;0<i(t[c],u);)c--}0===i(t[r],u)?swap(t,r,c):swap(t,++c,n),c<=e&&(r=c+1),e<=c&&(n=c-1)}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function defaultCompare(t,e){return t<e?-1:e<t?1:0}var quickselect$1=Object.freeze({__proto__:null,default:quickselect}),quickselect$2=getCjsExportFromNamespace(quickselect$1),_rbush_2_0_2_rbush=rbush$1,default_1=rbush$1,Status,RKa,M$1;function rbush$1(t,e){if(!(this instanceof rbush$1))return new rbush$1(t,e);this.Bc=Math.max(4,t||9),this.Wc=Math.max(2,Math.ceil(.4*this.Bc)),e&&this.Gc(e),this.clear()}function findItem(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function calcBBox(t,e){distBBox(t,0,t.children.length,e,t)}function distBBox(t,e,r,n,i){(i=i||createNode(null)).ja=1/0,i.Fa=1/0,i.Oa=-1/0,i.Ea=-1/0;for(var a,o=e;o<r;o++)a=t.children[o],extend(i,t.Zc?n(a):a);return i}function extend(t,e){return t.ja=Math.min(t.ja,e.ja),t.Fa=Math.min(t.Fa,e.Fa),t.Oa=Math.max(t.Oa,e.Oa),t.Ea=Math.max(t.Ea,e.Ea),t}function compareNodeMinX(t,e){return t.ja-e.ja}function compareNodeMinY(t,e){return t.Fa-e.Fa}function bboxArea(t){return(t.Oa-t.ja)*(t.Ea-t.Fa)}function bboxMargin(t){return t.Oa-t.ja+(t.Ea-t.Fa)}function enlargedArea(t,e){return(Math.max(e.Oa,t.Oa)-Math.min(e.ja,t.ja))*(Math.max(e.Ea,t.Ea)-Math.min(e.Fa,t.Fa))}function intersectionArea(t,e){var r=Math.max(t.ja,e.ja),n=Math.max(t.Fa,e.Fa),i=Math.min(t.Oa,e.Oa),e=Math.min(t.Ea,e.Ea);return Math.max(0,i-r)*Math.max(0,e-n)}function contains(t,e){return t.ja<=e.ja&&t.Fa<=e.Fa&&e.Oa<=t.Oa&&e.Ea<=t.Ea}function intersects(t,e){return e.ja<=t.Oa&&e.Fa<=t.Ea&&e.Oa>=t.ja&&e.Ea>=t.Fa}function createNode(t){return{children:t,height:1,Zc:!0,ja:1/0,Fa:1/0,Oa:-1/0,Ea:-1/0}}function multiSelect(t,e,r,n,i){for(var a,o=[e,r];o.length;)(r=o.pop())-(e=o.pop())<=n||(a=e+Math.ceil((r-e)/n/2)*n,quickselect$2(t,a,e,r,i),o.push(e,a,a,r))}function getModule(){return M$1=M$1||{nS:function(clsName,clsText){try{eval(clsText)}catch(e){throw e}},eS:{iS:"__detaiVersion__"}},M$1}rbush$1.prototype={all:function(){return this.qc(this.data,[])},search:function(t){var e=this.data,r=[],n=this.Yc;if(!intersects(t,e))return r;for(var i,a,o,f,s=[];e;){for(i=0,a=e.children.length;i<a;i++)o=e.children[i],intersects(t,f=e.Zc?n(o):o)&&(e.Zc?r.push(o):contains(t,f)?this.qc(o,r):s.push(o));e=s.pop()}return r},Vc:function(t){var e=this.data,r=this.Yc;if(!intersects(t,e))return!1;for(var n,i,a,o,f=[];e;){for(n=0,i=e.children.length;n<i;n++)if(a=e.children[n],intersects(t,o=e.Zc?r(a):a)){if(e.Zc||contains(t,o))return!0;f.push(a)}e=f.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this.Wc){for(var e=0,r=t.length;e<r;e++)this.Xc(t[e]);return this}var n,i=this.Hc(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===i.height?this.Jc(this.data,i):(this.data.height<i.height&&(n=this.data,this.data=i,i=n),this.Kc(i,this.data.height-i.height-1,!0)):this.data=i,this},Xc:function(t){return t&&this.Kc(t,this.data.height-1),this},clear:function(){return this.data=createNode([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,a,o=this.data,f=this.Yc(t),s=[],u=[];o||s.length;){if(o||(o=s.pop(),n=s[s.length-1],r=u.pop(),a=!0),o.Zc&&-1!==(i=findItem(t,o.children,e)))return o.children.splice(i,1),s.push(o),this.Qc(s),this;a||o.Zc||!contains(o,f)?n?(r++,o=n.children[r],a=!1):o=null:(s.push(o),u.push(r),r=0,o=(n=o).children[0])}return this},Yc:function(t){return t},tf:compareNodeMinX,if:compareNodeMinY,toJSON:function(){return this.data},ef:function(t){return this.data=t,this},qc:function(t,e){for(var r=[];t;)t.Zc?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},Hc:function(t,e,r,n){var i,a=r-e+1,o=this.Bc;if(a<=o)return calcBBox(i=createNode(t.slice(e,r+1)),this.Yc),i;n||(n=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,n-1))),(i=createNode([])).Zc=!1,i.height=n;var f,s,u,l,c=Math.ceil(a/o),h=c*Math.ceil(Math.sqrt(o));for(multiSelect(t,e,r,h,this.tf),f=e;f<=r;f+=h)for(multiSelect(t,f,u=Math.min(f+h-1,r),c,this.if),s=f;s<=u;s+=c)l=Math.min(s+c-1,u),i.children.push(this.Hc(t,s,l,n-1));return calcBBox(i,this.Yc),i},nf:function(t,e,r,n){for(var i,a,o,f,s,u,l,c;n.push(e),!e.Zc&&n.length-1!==r;){for(l=c=1/0,i=0,a=e.children.length;i<a;i++)s=bboxArea(o=e.children[i]),(u=enlargedArea(t,o)-s)<c?(c=u,l=s<l?s:l,f=o):u===c&&s<l&&(l=s,f=o);e=f||e.children[0]}return e},Kc:function(t,e,r){var n=this.Yc,r=r?t:n(t),i=[],n=this.nf(r,this.data,e,i);for(n.children.push(t),extend(n,r);0<=e&&i[e].children.length>this.Bc;)this.af(i,e),e--;this.sf(r,i,e)},af:function(t,e){var r=t[e],n=r.children.length,i=this.Wc;this.rf(r,i,n);n=this.hf(r,i,n),n=createNode(r.children.splice(n,r.children.length-n));n.height=r.height,n.Zc=r.Zc,calcBBox(r,this.Yc),calcBBox(n,this.Yc),e?t[e-1].children.push(n):this.Jc(r,n)},Jc:function(t,e){this.data=createNode([t,e]),this.data.height=t.height+1,this.data.Zc=!1,calcBBox(this.data,this.Yc)},hf:function(t,e,r){for(var n,i,a,o,f,s=o=1/0,u=e;u<=r-e;u++)i=intersectionArea(n=distBBox(t,0,u,this.Yc),a=distBBox(t,u,r,this.Yc)),a=bboxArea(n)+bboxArea(a),i<s?(s=i,f=u,o=a<o?a:o):i===s&&a<o&&(o=a,f=u);return f},rf:function(t,e,r){var n=t.Zc?this.tf:compareNodeMinX,i=t.Zc?this.if:compareNodeMinY;this.lf(t,e,r,n)<this.lf(t,e,r,i)&&t.children.sort(n)},lf:function(t,e,r,n){t.children.sort(n);for(var i,a=this.Yc,o=distBBox(t,0,e,a),f=distBBox(t,r-e,r,a),s=bboxMargin(o)+bboxMargin(f),u=e;u<r-e;u++)i=t.children[u],extend(o,t.Zc?a(i):i),s+=bboxMargin(o);for(u=r-e-1;e<=u;u--)i=t.children[u],extend(f,t.Zc?a(i):i),s+=bboxMargin(f);return s},sf:function(t,e,r){for(var n=r;0<=n;n--)extend(e[n],t)},Qc:function(t){for(var e,r=t.length-1;0<=r;r--)0===t[r].children.length?0<r?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():calcBBox(t[r],this.Yc)},Gc:function(t){var e=["return a"," - b",";"];this.tf=new Function("a","b",e.join(t[0])),this.if=new Function("a","b",e.join(t[1])),this.Yc=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},_rbush_2_0_2_rbush.default=default_1,RKa=Status=Status||{},RKa.loading="loading",RKa.loaded="loaded",M$1=getModule();var Module=getModule(),TileState$3,UKa;function InnerClass(e){return function(t){getModule()[e]=t}}getModule().MapboxLabelFormat=MapboxLabelFormat$1,getModule().NebulaLabelFormat=NebulaLabelFormat$1,getModule()._LocalZoom={Ra:13,za:12,Ge:""},getModule().Support=Browser$1,getModule().geo={lcs:lcs$4,ProjectionManager:ProjectionManager},getModule().transform=transform,getModule().Util=Util$6,getModule().TileState=TileState$3,getModule().assign=assign,getModule().labelsUtil=labelsUtil$2,getModule().LabelsRenderUtil=LabelsRenderUtil$3,getModule().vector=vector$3,getModule().rbush=_rbush_2_0_2_rbush,getModule().lodash={map:map,find:find,assign:assign,every:every,some:some},UKa=TileState$3=TileState$3||{},UKa.TOLOAD="toload",UKa.LOADING="loading",UKa.LOADED="loaded",UKa.UNLOADED="unloaded",UKa.ERROR="error",UKa.RELOADING="reloading";var TileCoord=__decorate([InnerClass("TileCoord")],VKa);function VKa(t,e,r){this.x=e,this.y=r,this.z=t,this.key=t+","+e+","+r}var Tile$1=(ZKa.YH=function(t){return t.status===TileState$3.LOADED||t.status===TileState$3.RELOADING},ZKa.prototype.destroy=function(){assert(!0,"Tile should not implement destroy")},ZKa.prototype.nG=function(t){this.type=t},__decorate([InnerClass("Tile")],ZKa));function ZKa(t){this.type="tile",this.Ro=[0,0,0,0],this.stamp=0,this.zo=t,this.status=TileState$3.TOLOAD,this._v=null,this.data={}}var NebulaTile=(bLa=Tile$1,__extends(cLa,bLa),Object.defineProperty(cLa.prototype,"tag",{get:function(){return this.nN},set:function(t){this.aN=this.tag,this.nN=t},enumerable:!1,configurable:!0}),Object.defineProperty(cLa.prototype,"gB",{get:function(){return this.VN},set:function(t){this.BN=this.gB,this.VN=t},enumerable:!1,configurable:!0}),Object.defineProperty(cLa.prototype,"data",{get:function(){var t=[];return this.qc&&this.qc.Dc?t.push(this.qc):(this.sN&&t.push(this.sN),this.uN&&t.push(this.uN)),this.lU&&this.lU.Dc?t.push(this.lU):(this.fU&&t.push(this.fU),this.cU&&t.push(this.cU)),this.zN&&this.zN.labels?t.push(this.zN):(this.HN&&t.push(this.HN),this.WN&&t.push(this.WN)),this.dU&&this.dU.labels?t.push(this.dU):(this.vU&&t.push(this.vU),this.gU&&t.push(this.gU)),t},set:function(t){},enumerable:!1,configurable:!0}),cLa.prototype.xa=function(t,e){if(void 0===e&&(e=NebulaTagType.ALL),Object.keys(t))switch(e){case NebulaTagType.LITE:this.uN=__assign(__assign({},this.uN),t);break;case NebulaTagType.LEFT:this.sN=__assign(__assign({},this.sN),t);break;case NebulaTagType.ALL:default:this.qc=__assign(__assign({},this.qc),t)}},cLa.prototype.JE=function(t,e){if(void 0===e&&(e=NebulaTagType.ALL),Object.keys(t))switch(e){case NebulaTagType.LITE:this.cU=__assign(__assign({},this.cU),t);break;case NebulaTagType.LEFT:this.fU=__assign(__assign({},this.fU),t);break;case NebulaTagType.ALL:default:this.lU=__assign(__assign({},this.lU),t)}},cLa.prototype.rO=function(t,e){if(void 0===e&&(e=NebulaTagType.ALL),Object.keys(t))switch(e){case NebulaTagType.LITE:this.WN=__assign(__assign({},this.WN),t);break;case NebulaTagType.LEFT:this.HN=__assign(__assign({},this.HN),t);break;case NebulaTagType.ALL:default:this.zN=__assign(__assign({},this.zN),t)}},cLa.prototype.qE=function(t,e){if(void 0===e&&(e=NebulaTagType.ALL),Object.keys(t))switch(e){case NebulaTagType.LITE:this.gU=__assign(__assign({},this.gU),t);break;case NebulaTagType.LEFT:this.vU=__assign(__assign({},this.vU),t);break;case NebulaTagType.ALL:default:this.dU=__assign(__assign({},this.dU),t)}},cLa.prototype.ID=function(t){t&&(t.uN&&(this.uN=t.uN),t.sN&&(this.sN=t.sN),t.qc&&(this.qc=t.qc),t.WN&&(this.WN=t.WN),t.HN&&(this.HN=t.HN),t.zN&&(this.zN=t.zN))},cLa.prototype.rN=function(){this.aN?this.nN=this.aN:this.nN=NebulaTagType.NONE,this.BN&&(this.VN=this.BN,this.nN=NebulaTagType.NONE)},cLa.prototype.AB=function(){var t=[];return this.qc&&this.qc.road&&this.zN&&this.zN.labels?t.push(this.qc):(this.sN&&this.sN.road&&this.HN&&this.HN.labels&&t.push(this.sN),this.uN&&this.uN.road&&this.WN&&this.WN.labels&&t.push(this.uN)),t},cLa.prototype.zY=function(t,e){for(var r=0,n=this.data;r<n.length;r++){var i=n[r];i.Dc&&i.Dc.upload(t,!0),i.$c&&i.$c.upload(t,!0),i.A_&&i.A_.upload(t,!0),i.FD&&i.FD.upload(t,!0)}},cLa.prototype.destroy=function(){var t=this.data;if(t)for(var e=0,r=t;e<r.length;e++){var n=r[e];if(n.Dc&&(n.Dc.destroy(),delete n.Dc),n.$c&&(n.$c.destroy(),delete n.$c),n.labels){for(var i=0,a=n.labels;i<a.length;i++)a[i].destroy();delete n.labels}n.Ta=!1,delete n.gf}},cLa.prototype.KE=function(){for(var t,e=this.data,r=[],n=0,i=e;n<i.length;n++)(a=i[n]).road&&r.push(a.road);for(var a,o=0,f=e;o<f.length;o++)(a=f[o]).XE&&(t=a.XE,this.pU(r,t))},cLa.prototype.pU=function(t,e){for(var r=0,n=e;r<n.length;r++){var i=n[r],a=i.id;if(i.path)break;for(var o=0,f=t;o<f.length;o++){var s=f[o];i.path=this.yU(s,a)}}},cLa.prototype.yU=function(t,e){for(var r=0,n=t;r<n.length;r++){var i=n[r];if(i.id===e)return i.path}},cLa.prototype.oN=function(){var t=this.qc,t=Object.keys(t||{});return!!t.length&&(1!==t.length||"sdfLoaded"!==t[0])},__decorate([InnerClass("NebulaTile")],cLa)),bLa;function cLa(){var t=null!==bLa&&bLa.apply(this,arguments)||this;return t.type="nebula",t.region="world",t.aN=NebulaTagType.NONE,t.BN=NebulaTagType.NONE,t}var RasterTile=(cMa=Tile$1,__extends(dMa,cMa),dMa.prototype.destroy=function(){var t=this.data;t&&(t.texture&&(t.texture.destroy(),delete t.texture),t.zs&&(t.zs.context.deleteBuffer(t.zs),delete t.zs),t.Js&&(t.Js.destroy(),delete t.Js))},dMa),cMa;function dMa(){var t=null!==cMa&&cMa.apply(this,arguments)||this;return t.type="raster",t}var VectorTile=(gMa=Tile$1,__extends(hMa,gMa),hMa.prototype.destroy=function(){var t=this.data;t&&(t.$c&&(t.$c.destroy(),delete t.$c),t.Uc&&delete t.Uc)},__decorate([InnerClass("VectorTile")],hMa)),gMa;function hMa(){var t=null!==gMa&&gMa.apply(this,arguments)||this;return t.type="vector",t}var map$3=M.lodash.map,DistrictRender=(kMa=LayerRender,__extends(lMa,kMa),lMa.prototype.renderFrame=function(t,e,r,n,i){if(e.s_){for(var a,o=r.$n.optimalZoom,f=r.map.getMask(),s={},u=0,l=e.tiles;u<l.length;u++)(y=l[u]).status===TileState$3.LOADED&&(s[a=y.zo.z]||(s[a]=[]),s[a].push(y));var c=map$3(Object.keys(s),function(t){return parseInt(t,10)});c.sort(function(t,e){return e-t});e=c.indexOf(o-1);0<=e&&(c.splice(e,1),c.push(o-1));var o=n.layer.getLayerOptions(),h=o.styles,v=o.adcode;n.ce&&t.context.clear({depth:!0});for(var d=0,_=c;d<_.length;d++)for(var y,g=0,p=s[_[d]];g<p.length;g++)(y=p[g]).status===TileState$3.LOADED&&(this.Lc(t,y,r,n,h,v),this.Ic(t,y,r,n,h,v),this.lH(t,y,r,n));this.PB(t,r,n,f)}},lMa.prototype.destroy=function(){},lMa.prototype.clearStyleCache=function(){this.xC={}},lMa.prototype.Lc=function(t,e,r,n,i,a){var o=t.Wn(),f=e.data,t=f.Dc;if(t){t.upload(o.context,!0);var s=t.zs,u=t.Pc,f=f.Oc,l=n.opacity,c=[e.Sa[0],e.Sa[1]],h=1;"3D"===r.$n.viewMode&&(h=r.map.getView().EF()),e.zo.z<LocalZoom&&(e=e.localCoord.center,c[0]+=e[0],c[1]+=e[1]);for(var v=0,d=f.jc;v<d.length;v++){var _=d[v],y=JSON.parse(""+_.mainkey),g=this.Mn(i,y,"polygon").fill;g&&4===g.length&&(!a||a[y.adcode]||a[y.SOC]||a[y.adcode_pro]||a[y.adcode_cit])&&(g={u_matrix:r.$n.mvpMatrix,u_color:[g[0],g[1],g[2],g[3]*l],u_offset:[0,0],u_localDeltaCenter:c,u_viewHeight:r.$n.size[1],u_skyHeight:h},o.context.getExtension("OES_element_index_uint"),o.Ce(g,{a_pos:{type:"vec2",Re:s.size,offset:0,buffer:s}},_.length,u,"TRIANGLES",n.depthTest,ColorMode.Si,this.OH(n.rejectMapMask,!!r.map.getMask()),void 0,_.offset))}}},lMa.prototype.Ic=function(t,e,r,n,i,a){var o=this,f=t.Vn();if(e.data){var s=e.data,t=s.$c;if(t){t.upload(f.context,!0);var u=t.zs.buffer,l=t.Pc.buffer,c=s.Uc.jc,h=(r.$n.optimalZoom,[e.Sa[0],e.Sa[1]]),v=n.opacity,d=1;"3D"===r.$n.viewMode&&(d=r.map.getView().EF()),e.zo.z<LocalZoom&&(e=e.localCoord.center,h[0]+=e[0],h[1]+=e[1]);var _={},y={};1===c.length&&(S=c[0].mainkey,m=JSON.parse(S,void 0),b=this.Mn(i,m,"line"),_[S]=b,y[S]=m),c.sort(function(t,e){var r=t.mainkey,n=JSON.parse(r,void 0),t=o.Mn(i,n,"line");_[r]||(_[r]=t),y[r]||(y[r]=n);r=e.mainkey,n=JSON.parse(r,void 0),e=o.Mn(i,n,"line");return _[r]||(_[r]=e),y[r]||(y[r]=n),t.zIndex-e.zIndex});for(var g=0,p=c.length;g<p;g++){var m,b,x=c[g],S=x.mainkey,M=+(m=y[S]).type_,C=[1,0,1,0];(b=_[S]).dash&&(C=__spreadArrays(b.dash)),1==M||8==M?C=[3,2,3,2]:10==M?C=[1,2,1,2]:11==M?C=[5,5,5,5]:4==M&&(C=[2,2,6,2]);M=b[this.gC[m.type]];M&&4===M.length&&(!a||a[m.adcode]||a[m.SOC]||a[m.adcode_pro]||a[m.adcode_cit])&&(M={u_matrix:r.$n.mvpMatrix,u_meter_per_pixel:r.$n.resolution,u_width:b["stroke-width"],u_color:[M[0],M[1],M[2],M[3]*v],u_dash:C,u_border:0,u_localDeltaCenter:h,u_viewHeight:r.$n.size[1],u_skyHeight:d},C=u.size,f.context.getExtension("OES_element_index_uint"),f.Ce(M,{a_pos:{type:"vec2",buffer:u,Re:C,offset:0},a_normal:{type:"vec2",buffer:u,Re:C,offset:8},a_distance:{type:"float",buffer:u,Re:C,offset:16},a_dir:{type:"vec2",buffer:u,Re:C,offset:20}},x.length,l,"TRIANGLES",n.depthTest,ColorMode.Si,this.OH(n.rejectMapMask,!!r.map.getMask()),void 0,x.offset))}}}else console.error("tile have no data")},lMa.prototype.lH=function(t,e,r,n){var i=t.Wn(),a=i.context,o=new Float32Array(this.fH(e)),t=e.Sa,a=a.fe(o,8),o=e.zo.z;o<LocalZoom&&(f=e.localCoord.center,t[0]+=f[0],t[1]+=f[1]);var f=[0,1,0,0];o===r.$n.optimalZoom-1&&(f=[1,0,0,0]);t={u_matrix:r.$n.mvpMatrix,u_color:f,u_offset:[0,0],u_localDeltaCenter:t,u_viewHeight:r.$n.size[1],u_skyHeight:1};i.Ce(t,{a_pos:{type:"vec2",buffer:a,Re:0,offset:0}},6,void 0,"TRIANGLES",!1,ColorMode.Si,this.BH(n.rejectMapMask,!!r.map.getMask()),void 0,0)},lMa.prototype.OH=function(t,e){return void 0===t&&(t=!1),e?e&&!t?StencilMode.DH:e&&t?StencilMode.HH:void 0:StencilMode.nH},lMa.prototype.BH=function(t,e){return void 0===t&&(t=!1),e?e&&!t?StencilMode.FH:e&&t?StencilMode.PH:void 0:StencilMode.$H},lMa.prototype.Mn=function(t,e,r){var n=JSON.stringify(e);if(this.xC[n])return this.xC[n];var i=["nation-stroke","coastline-stroke","province-stroke","city-stroke","county-stroke"],a={};if(!e)return a;if("line"===r){for(var o=0,f=i.length;o<f;o++){var s=i[o];t[s]&&(AMap.Util.isFunction(t[s])?a[s]=AMap.Util.color2RgbaArray(t[s](e)):a[s]=AMap.Util.color2RgbaArray(t[s]))}AMap.Util.isFunction(t["stroke-width"])?a["stroke-width"]=t["stroke-width"](e):a["stroke-width"]=t["stroke-width"],e&&(e.adcode_pro||e.adcode_city)&&(a.dash=AMap.Util.isFunction(t.dash)?t.dash(e):t.dash),e&&void 0!==t.zIndex&&(a.zIndex=AMap.Util.isFunction(t.zIndex)?t.zIndex(e):t.zIndex)}else"polygon"===r&&(AMap.Util.isFunction(t.fill)?a.fill=AMap.Util.color2RgbaArray(t.fill(e)):a.fill=AMap.Util.color2RgbaArray(t.fill),a["stroke-width"]=t["stroke-width"]);return this.xC[n]=a},lMa.prototype.fH=function(t){var e=t.Ro,r=t.localCoord.center,n=[e[0]-r[0],e[1]-r[1]],i=[e[0]-r[0],e[3]-r[1]],t=[e[2]-r[0],e[1]-r[1]];return __spreadArrays(n,t,i,t,[e[2]-r[0],e[3]-r[1]],i)},lMa.prototype.PB=function(t,e,r,n){var i;t.context.clear({stencil:!0}),!n||(i=e.map.getLayerByClass("AMap.MaskLayer"))&&(n=e.uo.getData(i.co(),e.$n,t.context),i=i.getRender(),n&&i&&i.renderFrame(t,n,e,r))},lMa),kMa;function lMa(){var t=kMa.call(this)||this;return t.gC={Nation_Border_China:"nation-stroke",Nation_Border_Foreign:"nation-stroke",Coastline_China:"coastline-stroke",Coastline_Foreign:"coastline-stroke",Province_Border_China:"province-stroke",Province_Border_Foreign:"province-stroke",City_Border_China:"city-stroke",County_Border_China:"county-stroke"},t.xC={},t}var Util$7=AMap.Util,MapboxRender=(LOa=LayerRender,__extends(MOa,LOa),MOa.prototype.renderFrame=function(t,e,r,n,i){if(e.s_&&e&&!(e.tiles.length<1)){var a=r.$n.optimalZoom;this.ZG=a<=9.8?void 0:StencilMode.HE;for(var o=0;o<e.tiles.length;o++){var f=e.tiles[o];f&&(this.GG(t,f,r,n),this.Lc(t,f,r,n),this.sT(t,f,r,n),this.Ic(t,f,r,n),this.UG(t,f,r,n))}e.tiles&&0<e.tiles.length&&i.map.bZ.dynamic.set("firstPaint",!0)}},MOa.prototype.GG=function(t,e,r,n){var i=t.Wn(),a=e.stencil;if(a){var o=a.Dc;if(o){o.upload(i.context);var f=o.zs,s=o.Pc,t=a.Oc,a=r.$n.optimalZoom,u=(n.opacity,[e.Sa[0],e.Sa[1]]),l=1;"3D"===r.$n.viewMode&&(l=r.map.getView().EF()),a<LocalZoom&&(u=[0,0]);for(var c=0,h=t.jc;c<h.length;c++){var v=h[c],d={u_matrix:r.$n.mvpMatrix,u_color:[0,0,0,0],u_offset:[0,0],u_localDeltaCenter:u,u_viewHeight:r.$n.size[1],u_skyHeight:l};o.Qx&&(i.context.getExtension("OES_element_index_uint"),i.Ce(d,{a_pos:{type:"vec2",Re:f.size,offset:0,buffer:f}},v.length,s,"TRIANGLES",void 0,ColorMode.Si,StencilMode.TE,void 0,v.offset))}}}},MOa.prototype.UG=function(t,e,r,n){var i=t.Wn(),a=e.stencil;if(a){var o=a.Dc;if(o){o.upload(i.context);var f=o.zs,s=o.Pc,t=a.Oc,a=r.$n.optimalZoom,u=(n.opacity,[e.Sa[0],e.Sa[1]]),l=1;"3D"===r.$n.viewMode&&(l=r.map.getView().EF()),a<LocalZoom&&(u=[0,0]);for(var c=0,h=t.jc;c<h.length;c++){var v=h[c],d={u_matrix:r.$n.mvpMatrix,u_color:[0,0,0,0],u_offset:[0,0],u_localDeltaCenter:u,u_viewHeight:r.$n.size[1],u_skyHeight:l};o.Qx&&(i.context.getExtension("OES_element_index_uint"),i.Ce(d,{a_pos:{type:"vec2",Re:f.size,offset:0,buffer:f}},v.length,s,"TRIANGLES",void 0,ColorMode.Si,StencilMode.FE,void 0,v.offset))}}}},MOa.prototype.Lc=function(t,e,r,n){var i=t.Wn(),a=e.data;if(a){var o=a.Dc;if(o){o.upload(i.context);var f=o.zs,s=o.Pc,u=a.Oc,t=r.$n.optimalZoom,l=(n.opacity,[e.Sa[0],e.Sa[1]]),c=1;"3D"===r.$n.viewMode&&(c=r.map.getView().EF()),t<LocalZoom&&(e.fY||(l=[0,0]));for(var h=0,v=u.jc;h<v.length;h++){var d,_=v[h],y={u_matrix:r.$n.mvpMatrix,u_color:a.bgColor,u_offset:[0,0],u_localDeltaCenter:l,u_viewHeight:r.$n.size[1],u_skyHeight:c};!_.style||(d=_.style).fillColor&&(d=d.fillColor,y.u_color=d),y&&o.Qx&&(i.context.getExtension("OES_element_index_uint"),i.Ce(y,{a_pos:{type:"vec2",Re:f.size,offset:0,buffer:f}},_.length,s,"TRIANGLES",void 0,ColorMode.Si,this.ZG,void 0,_.offset))}}}},MOa.prototype.Ic=function(t,e,r,n){var i=e.data;if(i&&i.$c){var a=i.Uc,o=r.$n.optimalZoom,f=[e.Sa[0],e.Sa[1]];o<LocalZoom&&(f=[0,0]);var s=i.$c;if(s.upload(t.context),s.uploaded&&s.zs){a.jc.sort(function(t,e){return t.style&&t.style[0]&&t.style[0].jr&&e.style&&e.style[0]&&e.style[0].jr?e.style[0].jr<t.style[0].jr?1:-1:0});for(var u=0,l=a.jc;u<l.length;u++){var c=l[u],h=s.zs.buffer;if(c.style&&!(c.style.length<1)){var v={u_color:[0,0,0,.5],u_matrix:r.$n.mvpMatrix,u_meter_per_pixel:r.$n.resolution,u_width:1,u_offset:[0,0],u_localDeltaCenter:f,u_dash:"vec3",u_dashType:"int",u_skyHeight:1,u_viewHeight:1},d=c.style[0];if(d&&d.faceColor&&d.faceWidth&&d.type&&"line"===d.type){var _=c.style[0].faceColor;if(v.u_color=_,v.u_width=d.faceWidth,!v)return;d=t.Xn();d.context.getExtension("OES_element_index_uint"),d.Ce(v,{a_pos:{buffer:h,type:"vec2",Re:h.size,offset:0},a_normal:{type:"vec2",buffer:h,Re:h.size,offset:8},a_distance:{type:"float",buffer:h,Re:h.size,offset:16},a_dir:{type:"vec2",buffer:h,Re:h.size,offset:20}},c.length,s.Pc.buffer,void 0,void 0,ColorMode.Si,this.ZG,void 0,c.offset)}}}}}},MOa.prototype.sT=function(t,e,r,n){var i=e.data;if(i&&i.$c){var a=i.Uc,o=r.$n.optimalZoom,f=[e.Sa[0],e.Sa[1]];o<LocalZoom&&(f=[0,0]);var s=i.$c;if(s.upload(t.context),s.uploaded&&s.zs){a.jc.sort(function(t,e){return t.style&&t.style[0]&&t.style[0].Or&&e.style&&e.style[0]&&e.style[0].Or?e.style[0].Or<t.style[0].Or?1:-1:0});for(var u=0,l=a.jc;u<l.length;u++){var c=l[u],h=s.zs.buffer;if(c.style&&!(c.style.length<1)){var v={u_color:[0,0,0,.5],u_matrix:r.$n.mvpMatrix,u_meter_per_pixel:r.$n.resolution,u_width:1,u_offset:[0,0],u_localDeltaCenter:f,u_dash:"vec3",u_dashType:"int",u_skyHeight:1,u_viewHeight:1},d=c.style[0];if(d&&d.borderColor&&d.borderWidth&&d.type&&"line"===d.type){var _=c.style[0].borderColor;if(v.u_color=_,v.u_width=d.borderWidth,!v)return;d=t.Xn();d.context.getExtension("OES_element_index_uint"),d.Ce(v,{a_pos:{buffer:h,type:"vec2",Re:h.size,offset:0},a_normal:{type:"vec2",buffer:h,Re:h.size,offset:8},a_distance:{type:"float",buffer:h,Re:h.size,offset:16},a_dir:{type:"vec2",buffer:h,Re:h.size,offset:20}},c.length,s.Pc.buffer,void 0,void 0,ColorMode.Si,this.ZG,void 0,c.offset)}}}}}},MOa.prototype.fb=function(t,e){var r=1,n="rgb(0,0,0)",i=2,n=Util$7.color2RgbaArray(n);if(n)return(n=n.slice(0,3)).push(r),{u_color:n,u_matrix:e.$n.mvpMatrix,u_meter_per_pixel:e.$n.resolution,u_width:i,u_offset:t.zx}},MOa),LOa;function MOa(){var t=LOa.call(this)||this;return t.yz=1,t.VG=1,t.VG=1,t.ZG=StencilMode.HE,t}var Attribute=(NQa.prototype.set=function(t){var e,r,n=this.context.gl;if(!t)return this.current=void 0,void n.disableVertexAttribArray(this.location);if(t.type===this.type){if(this.ke(t)){switch(this.current=t,n.enableVertexAttribArray(this.location),this.context.de.set(t.buffer),this.type){case"float":case"int":e=1;break;case"vec2":e=2;break;case"vec3":e=3;break;case"vec4":e=4;break;default:e=1}switch(this.Me){case"int8":r=n.BYTE;break;case"uint8":r=n.UNSIGNED_BYTE;break;case"int16":r=n.SHORT;break;case"uint16":r=n.UNSIGNED_SHORT;break;case"float32":r=n.FLOAT}assert(r,"invalid datatype "+this.Me),n.vertexAttribPointer(this.location,e,r,this.normalize,t.Re,t.offset)}}else console.error("error webglBuffer type,need "+this.type+", receive "+t.type+" ")},NQa.prototype.ke=function(t){return!0},NQa);function NQa(t,e,r,n,i){void 0===i&&(i=!1),this.context=t,this.type=e,this.Me=r,this.location=n,this.normalize=i}var Uniform=(YQa.prototype.set=function(t){if(!this.te(this.current,t)&&void 0!==t){switch(this.type){case"bool":case"int":case"sampler2D":this.ze.uniform1i(this.location,t);break;case"sampler2D[]":this.ze.uniform1iv(this.location,t);break;case"float":this.ze.uniform1f(this.location,t);break;case"float[]":this.ze.uniform1fv(this.location,t);break;case"vec2":this.ze.uniform2f(this.location,t[0],t[1]);break;case"vec3":this.ze.uniform3f(this.location,t[0],t[1],t[2]);break;case"vec4":this.ze.uniform4f(this.location,t[0],t[1],t[2],t[3]);break;case"mat2":this.ze.uniformMatrix2fv(this.location,!1,new Float32Array(t));break;case"mat3":this.ze.uniformMatrix3fv(this.location,!1,new Float32Array(t));break;case"mat4":this.ze.uniformMatrix4fv(this.location,!1,new Float32Array(t))}this.current=t}},YQa);function YQa(t,e,r){this.context=t,this.type=e,this.location=r,this.Re=0,this.offset=0,this.te=same,this.ze=t.gl}var Program=(bRa.createProgram=function(t,e,r){var n=bRa.Se(t,t.VERTEX_SHADER,e),i=bRa.Se(t,t.FRAGMENT_SHADER,r);if(!n||!i)return null;e=t.createProgram();if(!e)return null;t.attachShader(e,n),t.attachShader(e,i),t.bindAttribLocation(e,0,"a_Position"),t.linkProgram(e);r=t.getProgramParameter(e,t.LINK_STATUS);if(t.deleteShader(i),t.deleteShader(n),r)return e;r=t.getProgramInfoLog(e);return console.log("Failed to link program: "+r),t.deleteProgram(e),null},bRa.Se=function(t,e,r){e=t.createShader(e);if(null===e)return null;if(t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))return e;r=t.getShaderInfoLog(e);return console.log("Failed to compile shader: "+r),t.deleteShader(e),null},bRa.prototype.Ce=function(t,e,r,n,i,a,o,f,s,u){var l,c;void 0===i&&(i="TRIANGLES"),void 0===a&&(a=!1),void 0===o&&(o=ColorMode.Mi),void 0===f&&(f=StencilMode.disable),void 0===s&&(s=CullFaceMode.we),void 0===u&&(u=0),this.je&&(c=(l=this.context).gl,l.ge.set(this),l.ne(a),l.ae(f),l.Qi(o),l.re(s),l.hB.set(!1),this.Le(t),this.Ae(e),n?(l.me.set(n),32===n.size?c.drawElements(c[i],r,c.UNSIGNED_INT,n.size/8*u):c.drawElements(c[i],r,c.UNSIGNED_SHORT,n.size/8*u)):c.drawArrays(c[i],u,r))},bRa.prototype.Le=function(t){if(this.je)for(var e in this.Te){var r=this.Te[e];if("sampler2D"===r.type)0<=(l=this.Ie.indexOf(e))&&(this.context.activeTexture.set(l),(u=t[e]).bind(),r.set(l));else if("sampler2D[]"===r.type){for(var n=t[e],i=n.De,a=n.offset||0,o=n.count||i.length,f=[],s=0;s<o;s++){var u,l=a+s;(u=i[s])?(this.context.activeTexture.set(l),u.bind(),f.push(l)):(this.context.activeTexture.set(a),i[0].bind(),f.push(a))}r.set(f)}else r.set(t[e])}},bRa.prototype.Ae=function(t){if(this.je)for(var e in this.attributes)this.attributes.hasOwnProperty(e)&&this.attributes[e].set(t[e])},bRa.prototype.Pe=function(t,e,r,n,i,a,o,f){var s,u;void 0===e&&(e=0),void 0===n&&(n="TRIANGLES"),void 0===i&&(i=!1),void 0===a&&(a=ColorMode.Mi),void 0===o&&(o=StencilMode.disable),void 0===f&&(f=CullFaceMode.we),this.je&&(u=(s=this.context).gl,s.ge.set(this),s.ne(i),s.ae(o),s.Qi(a),s.re(f),r?(s.me.set(r),u.drawElements(u[n],t,u.UNSIGNED_SHORT,r.size/8*e)):u.drawArrays(u[n],e,t))},bRa.prototype.Ni=function(){if(this.je)for(var t in this.attributes)this.attributes.hasOwnProperty(t)&&this.attributes[t].set(null)},bRa.prototype.destroy=function(){this.je&&(this.context.gl.deleteProgram(this.$i),this.$i=null)},bRa);function bRa(t,e,r,n,i,a){this.name=a,this.Ie=[],this.context=t,this.attributes={},this.Te={};var o,f,s,u,l,c=t.gl,r=bRa.createProgram(c,e,r);if(this.$i=r,!this.$i)return console.log("createProgram fail",this.name),this.je=!1,this;for(s in this.je=!0,n)n.hasOwnProperty(s)&&(u=n[s].Oe,o=n[s].Me,l=c.getAttribLocation(this.$i,s),f=n[s].normalize,this.attributes[s]=new Attribute(t,u,o,l,f));for(s in i)i.hasOwnProperty(s)&&(u=i[s],(l=c.getUniformLocation(this.$i,s))&&(this.Te[s]=new Uniform(t,u,l)),"sampler2D"===u&&this.Ie.push(s))}var rasterVertextString="precision highp float;\\n\\nuniform mat4 u_mvpMatrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nvarying vec2 v_TextureCoord;\\nvarying vec4 v_pos;\\n\\nattribute vec4 a_Position;\\n\\nvoid main(){\\n    v_TextureCoord=a_Position.zw;\\n    vec4 pos=vec4(a_Position.x+u_localDeltaCenter.x,a_Position.y+u_localDeltaCenter.y,0.,1.);\\n    gl_Position=u_mvpMatrix*pos;\\n    v_pos = gl_Position;\\n}\\n",rasterFragmentString="precision highp float;\\n\\nuniform sampler2D u_texture;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform vec3 u_skyColor;\\n\\nvarying vec2 v_TextureCoord;\\nvarying vec4 v_pos;\\n\\nvoid main(void) {\\n    vec4 smpColor = texture2D(u_texture, v_TextureCoord);\\n    if(smpColor.a < 0.01){\\n        discard;\\n    }\\n    gl_FragColor = smpColor;\\n    gl_FragColor.a *= u_opacity;\\n\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor = vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    // gl_FragColor = vec4(1.0,0,0,1.0);\\n}\\n",rasterUniforms={u_skyColor:"vec3",u_viewHeight:"float",u_skyHeight:"float",u_texture:"sampler2D",u_opacity:"float",u_mvpMatrix:"mat4",u_localDeltaCenter:"vec2"},rasterAttributes={a_Position:{Oe:"vec4",Me:"float32"}},raster={uniforms:rasterUniforms,attributes:rasterAttributes,vertexSource:rasterVertextString,fragmentSource:rasterFragmentString},labelsLayerVertexString="precision mediump float;\\nattribute highp vec2 a_vertex;\\nattribute vec2 a_texcoord;\\nattribute highp vec2 a_origin;\\nattribute lowp float a_type;\\nattribute lowp float a_texIndex;\\nattribute vec4 a_color;\\nattribute lowp vec2 a_zooms;\\nattribute lowp float a_visible;\\nattribute highp float a_height;\\nattribute lowp float a_angle;\\n\\nuniform lowp vec2 u_gl_size;\\nuniform highp mat4 u_matrix;\\nuniform float u_texsize[_TotalTextureLenTwice];\\nuniform lowp int u_event;\\nuniform float u_zoom;\\nuniform highp vec2 u_delta_center;\\nuniform highp vec2 u_offset;\\n// u_transform.x => rotate; u_transform.y => pinch; u_transform.z => scale\\nuniform lowp vec4 u_transform;\\nuniform float u_skyHeight;\\n\\nvarying vec2 v_texcoord;\\nvarying float v_texIndex;\\nvarying float v_type;\\nvarying vec4 v_color;\\nvarying vec2 v_pos;\\n\\nmat4 rotateMat4(mat4 a, float rad, vec3 axis) {\\n    float x = axis[0], y = axis[1], z = axis[2];\\n    float len = length(axis);\\n    float s, c, t;\\n    float a00, a01, a02, a03;\\n    float a10, a11, a12, a13;\\n    float a20, a21, a22, a23;\\n    float b00, b01, b02;\\n    float b10, b11, b12;\\n    float b20, b21, b22;\\n\\n    len = 1.0 / len;\\n    x *= len;\\n    y *= len;\\n    z *= len;\\n\\n    s = sin(rad);\\n    c = cos(rad);\\n    t = 1.0 - c;\\n\\n    a00 = a[0][0]; a01 = a[0][1]; a02 = a[0][2]; a03 = a[0][3];\\n    a10 = a[1][0]; a11 = a[1][1]; a12 = a[1][2]; a13 = a[1][3];\\n    a20 = a[2][0]; a21 = a[2][1]; a22 = a[2][2]; a23 = a[2][3];\\n\\n    // Construct the elements of the rotation matrix\\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\\n\\n    // Perform rotation-specific matrix multiplication\\n    mat4 outMatrix = mat4(\\n    a00 * b00 + a10 * b01 + a20 * b02,\\n    a00 * b10 + a10 * b11 + a20 * b12,\\n    a00 * b20 + a10 * b21 + a20 * b22,\\n    a[3][0],\\n\\n    a01 * b00 + a11 * b01 + a21 * b02,\\n    a01 * b10 + a11 * b11 + a21 * b12,\\n    a01 * b20 + a11 * b21 + a21 * b22,\\n    a[3][1],\\n\\n    a02 * b00 + a12 * b01 + a22 * b02,\\n    a02 * b10 + a12 * b11 + a22 * b12,\\n    a02 * b20 + a12 * b21 + a22 * b22,\\n    a[3][2],\\n\\n    a03 * b00 + a13 * b01 + a23 * b02,\\n    a03 * b10 + a13 * b11 + a23 * b12,\\n    a03 * b20 + a13 * b21 + a23 * b22,\\n    a[3][3]\\n    );\\n\\n\\n    //    outMatrix = mat4(1.0);\\n    return outMatrix;\\n}\\n\\nmat4 scaleMat4(mat4 a, vec3 v) {\\n    float x = v.x, y = v.y, z = v.z;\\n\\n    mat4 outMatrix = mat4(\\n        a[0][0] * x, a[1][0] * y, a[2][0] * z, a[3][0],\\n        a[0][1] * x, a[1][1] * y, a[2][1] * z, a[3][1],\\n        a[0][2] * x, a[1][2] * y, a[2][2] * z, a[3][2],\\n        a[0][3] * x, a[1][3] * y, a[2][3] * z, a[3][3]\\n    );\\n\\n    return outMatrix;\\n}\\n\\nvec2 getSizeFromArray(float u_texsize[_TotalTextureLenTwice], int ndx){\\n    vec2 texsize;\\n\\n    if (ndx==0){\\n        texsize=vec2(u_texsize[0], u_texsize[1]);\\n    } else if (ndx==1){\\n        texsize=vec2(u_texsize[2], u_texsize[3]);\\n    } \\n    // else if (ndx==2){\\n    //     texsize=vec2(u_texsize[4], u_texsize[5]);\\n    // } else if (ndx==3){\\n    //     texsize=vec2(u_texsize[6], u_texsize[7]);\\n    // } else if (ndx==4){\\n    //     texsize=vec2(u_texsize[8], u_texsize[9]);\\n    // } else if (ndx==5){\\n    //     texsize=vec2(u_texsize[10], u_texsize[11]);\\n    // }else if (ndx==6){\\n    //     texsize=vec2(u_texsize[12], u_texsize[13]);\\n    // }\\n\\n    return texsize;\\n}\\n\\nvoid main(){\\n    float pi = 3.141592653589793238462;\\n\\nif (a_visible!=0. && u_zoom>=a_zooms.x && u_zoom<=a_zooms.y){\\n    // if (a_visible>0.3 ){\\n    // if(int(floor(a_visible + 0.1))!=0){\\n        // 绘制背景 || border\\n        if (a_type==6. || a_type==8.){\\n            vec4 cur_position=u_matrix*vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\\n            gl_Position=cur_position/cur_position.w+vec4(a_vertex.x/u_gl_size.x*2., -a_vertex.y/u_gl_size.y*2., 0, 0);\\n            v_type=a_type;\\n            v_pos = gl_Position.xy;\\n        }else if(a_type==1.){\\n            // 绘制贴地效果文字\\n            gl_Position = u_matrix * vec4(a_vertex.xy, 0, 1);\\n        } else {\\n            // 绘制 billborad 效果\\n            mat4 originMatirx = mat4(1.0);\\n            mat4 scaleMatrix = scaleMat4(originMatirx, vec3(u_transform.z));\\n            mat4 rotateMatrix = rotateMat4(originMatirx, a_angle + u_transform.x, vec3(0, 0, 1));\\n            vec4 trans_position = rotateMatrix * scaleMatrix * vec4(a_vertex.x, -a_vertex.y, 0, 1);\\n\\n            vec4 trans_normalize_position = vec4(trans_position.xy/u_gl_size.xy*2., 0, 1);\\n\\n            vec4 cur_position = u_matrix * vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\\n\\n            // 修复文字超出 z 轴范围没有裁剪的问题，现象就是在地图最大级别、pitch 最大的时候出现文字（不应该在地图中的）悬浮在高空中。\\n            gl_Position=vec4(cur_position.xy/cur_position.w+trans_normalize_position.xy/trans_normalize_position.w,cur_position.z/cur_position.w,1);\\n        }\\n\\n        v_texcoord=a_texcoord/getSizeFromArray(u_texsize, int(a_texIndex));\\n        v_texIndex=a_texIndex;\\n        v_type=floor(a_type + 0.1);\\n        v_pos = gl_Position.xy;\\n    }else {\\n       v_type= -1.0; \\n    }\\n}\\n",labelsLayerFragmentString="precision mediump float;\\nuniform sampler2D u_texture[_TotalTextureLen];\\nuniform vec4 u_color;\\nuniform vec4 u_borderColor;\\nuniform vec4 u_strokeColor;\\nuniform vec4 u_backgroundColor;\\nuniform float u_borderBuffer;\\nuniform float u_buffer;\\nuniform float u_gamma;\\nuniform lowp int u_event;\\nuniform float u_zoom;\\nuniform lowp float u_opacity;\\nuniform float u_skyHeight;\\n\\nvarying vec2 v_texcoord;\\nvarying float v_texIndex;\\nvarying float v_type;\\nvarying vec4 v_color;\\nvarying vec2 v_pos;\\n\\nfloat skyOpacity() {\\n    if (v_pos.y > u_skyHeight){\\n        return 1.0 - smoothstep(u_skyHeight, u_skyHeight + (1.0 - u_skyHeight) / 6.0, v_pos.y);\\n    }\\n    return 1.0;\\n}\\n\\n/*由于片元着色器的数据index必须是常量，只能如此取出相应的值*/\\n\\nvoid main() {\\n   \\n    // texture5\\n    int texIdx = int(floor(v_texIndex + 0.1));\\n\\n    vec4 distColor;\\n     __SmpColorLoop__\\n    if (v_type == 6.0){\\n        // bg\\n        gl_FragColor = vec4(u_backgroundColor.rgb, u_backgroundColor.a * u_opacity);\\n        gl_FragColor.a *= skyOpacity();\\n    } else if (v_type == 8.0){\\n        // textborder\\n        gl_FragColor = vec4(u_borderColor.rgb, u_borderColor.a * u_opacity);\\n        gl_FragColor.a *= skyOpacity();\\n    } else if(v_type == 0.0){\\n        // icon\\n        // gl_FragColor = vec4(0,0,1.0,0.2);\\n        // return;\\n        float opacity = u_opacity * distColor.a;\\n        if (opacity < 0.03){\\n            discard;\\n        }\\n        gl_FragColor = vec4(distColor.rgb, opacity);\\n        // gl_FragColor = vec4(distColor.rgb, u_opacity * distColor.a);\\n        gl_FragColor.a *= skyOpacity();\\n    }else if(v_type==2.0){\\n        // text\\n        float dist;\\n        float alpha;\\n\\n        // 后端加载纹理 rgba => [[0, 255], [0, 255], [0, 255], [0, 1]]\\n        // 前端加载纹理 rgba => [[0, 0, 0, [0, 1]]\\n        if (distColor.r != 0.){\\n            dist = distColor.r;\\n        } else if (distColor.a == 1.0){\\n            dist = 0.0;\\n        } else {\\n            dist = distColor.a;\\n        }\\n\\n        //    gl_FragColor = vec4(dist, dist, dist, 1);\\n        //    return;\\n        //    dist = 255.0;\\n       \\n        if (u_borderBuffer == 0.0){\\n            alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\\n            gl_FragColor = vec4(u_color.rgb, alpha * u_color.a * u_opacity);\\n        } else {\\n            if (dist <= u_buffer - u_gamma){\\n                // border 与外界交界\\n                alpha = smoothstep(u_borderBuffer - u_gamma, u_borderBuffer, dist);\\n                float opacity = alpha * u_strokeColor.a * u_opacity;\\n                if (opacity == 0.0){\\n                    discard;\\n                }\\n                gl_FragColor = vec4(u_strokeColor.rgb, opacity);\\n                // gl_FragColor = vec4(0,0,1.0,0.2);\\n            } else if (dist < u_buffer){\\n                // 文字与 border 交界\\n                alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\\n                gl_FragColor = vec4(alpha * u_color.rgb + (1.0 - alpha) * u_strokeColor.rgb, 1.0 * u_color.a *\\n                alpha * u_opacity + (1.0 - alpha) * u_strokeColor.a * u_opacity);\\n            } else {\\n                // 文字\\n                alpha = 1.0;\\n                gl_FragColor = vec4(u_color.rgb, alpha * u_color.a * u_opacity);\\n            }\\n        }\\n        gl_FragColor.a *= skyOpacity();\\n    }else {\\n        discard;\\n    }\\n}\\n",labelsLayerUniforms={u_gl_size:"vec2",u_matrix:"mat4",u_texsize:"float[]",u_texture:"sampler2D[]",u_event:"int",u_zoom:"float",u_color:"vec4",u_borderColor:"vec4",u_strokeColor:"vec4",u_backgroundColor:"vec4",u_borderBuffer:"float",u_buffer:"float",u_gamma:"float",u_opacity:"float",u_delta_center:"vec2",u_offset:"vec2",u_transform:"vec4",u_skyHeight:"float"},labelsLayerAttributes={a_vertex:{Oe:"vec2",Me:"float32"},a_texcoord:{Oe:"vec2",Me:"float32"},a_origin:{Oe:"vec2",Me:"float32"},a_zooms:{Oe:"vec2",Me:"float32"},a_height:{Oe:"float",Me:"float32"},a_angle:{Oe:"float",Me:"float32"},a_type:{Oe:"float",Me:"float32"},a_texIndex:{Oe:"float",Me:"float32"},a_visible:{Oe:"float",Me:"uint8"}},labelsLayer={uniforms:labelsLayerUniforms,attributes:labelsLayerAttributes,vertexSource:labelsLayerVertexString,fragmentSource:labelsLayerFragmentString},combineTextVertexString="precision highp float;\\n\\nattribute vec2 a_targetTexturePos;\\nattribute vec2 a_sourceTexturePos;\\n\\nuniform vec2 u_targetTextureSize;\\nuniform vec2 u_sourceTextureSize;\\n\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n  v_textureCoord = a_sourceTexturePos / u_sourceTextureSize;\\n  // v_textureCoord = vec2(a_sourceTexturePos.x / u_sourceTextureSize.x, a_sourceTexturePos.y / u_sourceTextureSize.y);\\n\\n  vec2 pos = (a_targetTexturePos / u_targetTextureSize) *2.0 -vec2(1.0,1.0);\\n  // vec2 pos = vec2(a_targetTexturePos.x / u_targetTextureSize.x, a_targetTexturePos.y / u_targetTextureSize.y);\\n  // pos.x = (pos.x - 0.5)*2.0;\\n  // pos.y = (pos.y - 0.5)*2.0;\\n\\n  gl_Position = vec4(pos, 0, 1.0);\\n  // gl_Position = vec4(a_targetTexturePos,0,1.0);\\n}",combineTextFragmentString="precision highp float;\\n\\nuniform sampler2D u_sourceTexture; \\n\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main(){\\n  gl_FragColor = texture2D(u_sourceTexture, v_textureCoord);\\n  // gl_FragColor = vec4(1,0, 0, 0 ,1.0);\\n    // gl_FragColor = vec4(0,0,1.0,1.0);\\n}",combineTextUniforms={u_sourceTexture:"sampler2D",u_sourceTextureSize:"vec2",u_targetTextureSize:"vec2"},combineTextAttributes={a_targetTexturePos:{Oe:"vec2",Me:"uint16"},a_sourceTexturePos:{Oe:"vec2",Me:"uint16"}},combineText={uniforms:combineTextUniforms,attributes:combineTextAttributes,vertexSource:combineTextVertexString,fragmentSource:combineTextFragmentString},debugImageVertexString="precision highp float;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_coord;\\n\\nvarying vec2 v_coord;\\n\\nvoid main() {\\n  v_coord = vec2(a_coord.x,1.0 - a_coord.y) ;\\n  vec2 pos = a_pos *2.0 -vec2(1.0,1.0);\\n  // vec2 pos = a_pos -vec2(,1.0);\\n  gl_Position = vec4(pos,0,1.0);\\n}",debugImageFragmentString="precision highp float;\\n\\nvarying vec2 v_coord;\\n\\nuniform sampler2D u_texture;\\n\\nvoid main(){\\n  gl_FragColor = texture2D(u_texture, v_coord);\\n  // gl_FragColor = vec4(1.0,0,0,1.0);\\n}\\n",debugImageUniforms={u_texture:"sampler2D"},debugImageAttributes={a_pos:{Oe:"vec2",Me:"uint16"},a_coord:{Oe:"vec2",Me:"uint16"}},debugImage={uniforms:debugImageUniforms,attributes:debugImageAttributes,vertexSource:debugImageVertexString,fragmentSource:debugImageFragmentString},circleFragmentString="\\n\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform  float u_radius;\\nuniform  vec2 u_range;\\nuniform highp vec4 u_color;\\nuniform highp vec4 u_borderColor;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\n\\nvarying vec4 v_pos;\\n\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n  float offset = distance(gl_PointCoord, vec2(0.5,0.5))*2.0;\\n  float flag = step(1.0,offset);\\n  float borderFlag = 1.- smoothstep(1.0 -1./u_radius, 1.0, offset);\\n  if(flag > 0.0){\\n    discard;\\n  }\\n  float opacity_t = 1.-smoothstep(u_range[1] -1./u_radius, u_range[1], offset);\\n  gl_FragColor = mix(u_borderColor, u_color, opacity_t);\\n  gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight)*borderFlag;\\n}",circleVertextString="precision highp float;\\n#define GLSLIFY 1\\nuniform vec2 u_pos;\\nuniform mat4 u_matrix;\\nuniform float u_radius;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_retinaRatio;\\nvarying vec4 v_pos;\\n\\nvoid main(){\\n    vec2 pos=vec2(u_pos.x+u_localDeltaCenter.x+u_offset.x,u_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position=u_matrix * vec4(pos,0,1);\\n    gl_PointSize = u_radius * u_retinaRatio * 2.0;\\n    v_pos = gl_Position;\\n}\\n",circleUniforms={u_pos:"vec2",u_color:"vec4",u_borderColor:"vec4",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_offset:"vec2",u_radius:"float",u_range:"vec2",u_retinaRatio:"float",u_skyHeight:"float",u_viewHeight:"float"},circleAttributes={},circle={uniforms:circleUniforms,attributes:circleAttributes,vertexSource:circleVertextString,fragmentSource:circleFragmentString},lineFragmentString$2="precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform vec4 u_color;\\nuniform vec4 u_outLinecolor;\\n// uniform float u_opacity;\\nuniform vec3 u_dash;\\nuniform int u_dashType;\\nuniform sampler2D u_texture;\\nuniform  mediump float u_width;\\n\\nvarying highp float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    // vec2 icon_offset = vec2(80.0, 0.0);\\n    // vec2 icon_size = vec2(40.0, 40.0);\\n    // vec2 icon_offset = vec2(0.0, 0.0);\\n    // vec2 icon_size = vec2(44.0, 32.0);\\n    // vec2 texture_size = vec2(512.0, 2048.0);\\n    float offset = 0.0;\\n    if( u_dashType == 2 ){\\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n            discard;\\n        }\\n    }else if(u_dashType == 3) {\\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\\n        offset = mod(v_distance, all);\\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\\n\\n        if (offset > solidBound.x && offset <= dashBound.x\\n            || offset > solidBound.y && offset <= dashBound.y\\n            || offset > solidBound.z && offset <= dashBound.z) {\\n            discard;\\n        }\\n    }\\n\\n    float startBlur = 0.0;\\n    float endBlur = 1.0;\\n    // float dist = length(v_normal) * 0.8;\\n\\n    // if(v_width < 4.0 && u_border == 1.0) {\\n    //     startBlur = 0.0;\\n    // } else {\\n    //     // 线主体\\n    //     if(v_width < 4.0 && u_border == 0.0) {\\n    //         startBlur = 0.0;\\n    //     } else {\\n    //         startBlur = 0.4;\\n    //     }\\n    // }\\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\\n\\n    // startBlur = 0.0;\\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\\n\\n    gl_FragColor = u_color;\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n",lineVertextString$2="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  mediump float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\nvarying float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width;\\n    float cosValue = dot(a_normal , a_dir);\\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\\n    sinValue = step(0.0, sinValue);\\n    sinValue = (sinValue - 0.5)* 2.0;\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n//    gl_PointSize = 3.0;\\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_width = width;\\n    v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\\n    v_flag = sinValue;\\n    v_pos = gl_Position;\\n\\n}",linePatternFragmentString="precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform sampler2D u_texture;\\nuniform  highp vec2 u_iconsize;\\nuniform  mediump vec3 u_dir_color;\\nuniform  bool u_custom_img_flag;\\nuniform  highp float u_width;\\nuniform highp float u_meter_per_pixel;\\nuniform highp float u_meter_per_pixel_optimal;\\n\\nvarying highp float v_distance;\\n// varying float v_width;\\n// varying vec2 v_normal;\\nvarying highp float v_flag;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    // if(abs(v_flag)>=1.0){\\n    //     discard;\\n    // }\\n    vec2 icon_size = u_iconsize * vec2(u_width/u_iconsize.y, 1.0 );\\n    float offset = 0.0;\\n    float text_offset_x = mod(v_distance, (icon_size.x*4.0)*u_meter_per_pixel_optimal/u_meter_per_pixel);\\n    // float text_offset_x = mod(v_distance, 120.0);\\n\\n    if(text_offset_x<=0.0){\\n        discard;\\n    }\\n    if(text_offset_x>=icon_size.x){\\n        discard;\\n    }\\n\\n    text_offset_x = 1.0 - clamp(0.0,1.0,text_offset_x/icon_size.x);\\n\\n    // float  text_offset_y  = (v_flag+1.0)/2.0  ;\\n    float  text_offset_y  = v_flag  ;\\n\\n    if(u_custom_img_flag){\\n        gl_FragColor = texture2D(u_texture, vec2(text_offset_y, text_offset_x));\\n    }else{\\n        vec4 color = texture2D(u_texture, vec2(text_offset_y,text_offset_x));\\n        if(color.a>0.0){\\n            gl_FragColor = vec4(u_dir_color,1.0);\\n        }\\n    }\\n   gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n",linePatternVertextString="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform highp float u_meter_per_pixel;\\nuniform highp float u_meter_per_pixel_optimal;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  highp float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\nvarying highp float v_distance;\\n// varying mediump float v_width;\\n// varying vec2 v_normal;\\nvarying highp float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width + 0.0;\\n    float cosValue = dot(a_normal , a_dir);\\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\\n    sinValue = step(0.0, sinValue);\\n    // sinValue = (sinValue - 0.5)* 2.0;\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n//    gl_PointSize = 3.0;\\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    // v_width = width;\\n    // v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\\n    v_flag = sinValue;\\n    v_pos = gl_Position;\\n\\n}",lineGradinetFragmentString="precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform vec4 u_outLinecolor;\\n// uniform float u_opacity;\\nuniform vec3 u_dash;\\nuniform int u_dashType;\\nuniform sampler2D u_texture;\\nuniform  mediump float u_width;\\nuniform  highp float u_total_distance;\\n\\nvarying highp float v_distance;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n\\n    float offset = 0.0;\\n    if( u_dashType == 2 ){\\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n            discard;\\n        }\\n    }else if(u_dashType == 3) {\\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\\n        offset = mod(v_distance, all);\\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\\n\\n        if (offset > solidBound.x && offset <= dashBound.x\\n            || offset > solidBound.y && offset <= dashBound.y\\n            || offset > solidBound.z && offset <= dashBound.z) {\\n            discard;\\n        }\\n    }\\n    float texture_x = v_distance/u_total_distance;\\n    gl_FragColor = texture2D(u_texture, vec2(texture_x,0.5));\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n",lineGradientVertextString="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  mediump float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\n\\nvarying float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width;\\n    float cosValue = dot(a_normal , a_dir);\\n\\n    v_distance = a_distance + (cosValue * width *0.5)*u_meter_per_pixel;\\n    // v_distance = a_distance;\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_pos = gl_Position;\\n}",lineUniforms$1={u_width:"float",u_dashType:"int",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_color:"vec4",u_dash:"vec3",u_localDeltaCenter:"vec2",u_skyHeight:"float",u_viewHeight:"float"},lineAttributes$1={a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},linePatternUniforms={u_width:"float",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_meter_per_pixel_optimal:"float",u_localDeltaCenter:"vec2",u_texture:"sampler2D",u_iconsize:"vec2",u_dir_color:"vec3",u_custom_img_flag:"bool",u_skyHeight:"float",u_viewHeight:"float"},linePatternAttributes={a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},lineGradientUniforms={u_width:"float",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_localDeltaCenter:"vec2",u_texture:"sampler2D",u_total_distance:"float",u_skyHeight:"float",u_viewHeight:"float"},polyline={uniforms:lineUniforms$1,attributes:lineAttributes$1,vertexSource:lineVertextString$2,fragmentSource:lineFragmentString$2},polylinePattern={uniforms:linePatternUniforms,attributes:linePatternAttributes,vertexSource:linePatternVertextString,fragmentSource:linePatternFragmentString},polylineGradient={uniforms:lineGradientUniforms,attributes:linePatternAttributes,vertexSource:lineGradientVertextString,fragmentSource:lineGradinetFragmentString},maskFragmentString="precision highp float;\\n// uniform float u_opacity;\\nuniform vec4 u_color;\\n\\n// varying vec4 v_color;\\n\\nvoid main() {\\n    gl_FragColor = u_color;\\n    // gl_FragColor = vec4(0, 0, 0, 0);\\n}",maskVertextString="precision highp float;\\nuniform mat4 u_mvpMatrix;\\nuniform vec2 u_deltaCenter;\\nattribute vec2 a_pos;\\n\\nvoid main() {\\n    gl_Position = u_mvpMatrix * vec4(a_pos.xy+u_deltaCenter, 0, 1);\\n}\\n",maskUniforms={u_mvpMatrix:"mat4",u_color:"vec4",u_deltaCenter:"vec2"},maskAttributes={a_pos:{Me:"float32",Oe:"vec2"}},mask={uniforms:maskUniforms,attributes:maskAttributes,vertexSource:maskVertextString,fragmentSource:maskFragmentString},programs={fill:fill,fillPattern:fillPattern,sky:sky,skyPattern:skyPattern,mask:mask,fillExtrusion:fillExt,fillExtrusionPattern:fillExtPattern,raster:raster,labelsLayer:labelsLayer,fillOutline:fillOutline,line:line,combineText:combineText,debugImage:debugImage,circle:circle,polyline:polyline,"polyline-pattern":polylinePattern,"polyline-gradient":polylineGradient},ProgramManager=(mSa.prototype.Un=function(){return this.Bn("circle")},mSa.prototype.rS=function(){return this.Bn("sky")},mSa.prototype.EB=function(){return this.Bn("skyPattern")},mSa.prototype.aS=function(){return this.Bn("mask")},mSa.prototype.Wn=function(){return this.Bn("fill")},mSa.prototype.aH=function(){return this.Bn("fillPattern")},mSa.prototype.k_=function(){return this.Bn("fillExtrusion")},mSa.prototype.sH=function(){return this.Bn("fillExtrusionPattern")},mSa.prototype.Gn=function(){return this.Bn("raster")},mSa.prototype.Zn=function(){var t=this.context.gl,e="labelsLayer";if(!this.cache[e]){for(var t=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r=Math.min(t,16,TextureMaxLength),t=programs[e],n=[],i=0;i<r;i++)n.push((0<i?"else ":" ")+"if(texIdx=="+i+"){ distColor = texture2D(u_texture["+i+"], v_texcoord); }");t.vertexSource=t.vertexSource.replace(/_TotalTextureLenTwice/g,(2*r).toString()).replace(/_TotalTextureLen/g,r.toString()),t.fragmentSource=t.fragmentSource.replace(/_TotalTextureLen/g,r.toString()).replace(/__SmpColorLoop__/g,n.join("\\n"))}return this.Bn(e)},mSa.prototype.Yn=function(){return this.Bn("fillOutline")},mSa.prototype.Vn=function(){return this.Bn("line")},mSa.prototype.Xn=function(){return this.Bn("polyline")},mSa.prototype.M_=function(){return this.Bn("polyline-pattern")},mSa.prototype.sS=function(){return this.Bn("polyline-gradient")},mSa.prototype.Hn=function(){return this.Bn("combineText")},mSa.prototype.Jn=function(){return this.Bn("debugImage")},mSa.prototype.destroy=function(){for(var t in this.cache)this.cache.hasOwnProperty(t)&&(this.cache[t].destroy(),delete this.cache[t])},mSa.prototype.Bn=function(t){if(this.cache[t])return this.cache[t];var e=programs[t];return e&&(this.cache[t]=new Program(this.context,e.vertexSource,e.fragmentSource,e.attributes,e.uniforms,t)),this.cache[t]},mSa);function mSa(t){this.context=t,this.context=t,this.cache={}}var Util$8=AMap.Util,LandRender=(ASa=LayerRender,__extends(BSa,ASa),BSa.prototype.renderFrame=function(t,e,r,n,i){},BSa),ASa;function BSa(){var t=ASa.call(this)||this;return t.CLASS_NAME="AMap.Land",t.e_=[0,0,0,0],t.Qn={color:[.9882352941176471,.9764705882352941,.9490196078431372,1]},t}var MapRenderBase=(ISa.prototype.lS=function(t,e){var r,n,i=this.map.fS(),a=i.uS(),o={};for(r in a)a.hasOwnProperty(r)&&(n=a[r],n=e.uo.getData(n.co(),e.$n,this.context||null),o[r]=n);i.cS(t,e,o)},ISa);function ISa(t){this.map=t}var Support$5=M.Support,DomUtil$1=AMap.DomUtil,utils$1=AMap.Util,scale$2=Support$5.scale,MapRender=(SSa=MapRenderBase,__extends(TSa,SSa),TSa.prototype.getMapState=function(){return this.map&&this.map.getMapState()||{}},TSa.prototype.IK=function(){return this.map},TSa.prototype.to=function(){this.map&&this.map.setNeedUpdate(!0)},TSa.prototype.renderFrame=function(t){t.size[0]*scale$2!==this.io.width&&(this.io.width=t.size[0]*scale$2,this.io.style.width=t.size[0]+"px"),t.size[1]*scale$2!==this.io.height&&(this.io.height=t.size[1]*scale$2,this.io.style.height=t.size[1]+"px"),this.context.be.set([0,0,this.io.width,this.io.height]),this.context.clear({stencil:!0,color:!0,depth:!0});var e=t.$n.zoom,r=t.layers.sort(function(t,e){return t.getLayerConfig().zIndex-e.getLayerConfig().zIndex});this.no.renderFrame(this.oo,this.map.options.backgroundColor,t,{},this),this.map.so.update(this.oo);var n,i=this.map.TL();!i&&this.map.bZ.MZ.gY.Kv&&(this.DV.update(this.map.bZ.MZ.gY.mY),this.map.bZ.MZ.gY.Kv=!1),!i&&this.map.bZ.dynamic.get("firstLabelDataAllLoaded")&&this.lS(this.oo,t);for(var a=!0,o=0,f=r.length;o<f;o+=1){var s=(n=r[o]).getState(),u=n.getLayerConfig().zooms,l=0<s.opacity;"AMap.IndoorMap"===n.CLASS_NAME&&(l=0<=s.opacity),!(s.visible&&l&&utils$1.dS(e,u)||"AMap.CustomLayer"===n.CLASS_NAME)||(l=n.getRender())&&(n.lo()||(a=!1),(u=t.uo.getData(r[o].co(),t.$n,this.context))&&(n.beforeRender(),l.renderFrame(this.oo,u,t,s,this,r[o],u.fo),n.afterRender()))}!this.map.complete&&a&&(this.map.emit("complete"),this.map.complete=!0),this.map.getView().h_()||(this.map.getView().aD(),this.map.emit("viewchange",{zoom:t.$n.zoom,center:t.$n.center,pitch:t.$n.pitch,rotation:t.$n.rotation}));var c=this.map.bZ.dynamic.get("stamp"),i=Date.now();this.map.bZ.dynamic.set("stamp",i);c=Math.floor(1e3/(i-c));this.map.bZ.MZ.tY.update(),50<=c&&this.map.bZ.MZ.tY.RZ("default"),(0<this.map.bZ.MZ.tY.BZ("default")||this.map.bZ.MZ.gY.Kv)&&this.to()},TSa.prototype.destroy=function(){this.oo.destroy()},TSa.prototype.LK=function(){var t=this;this.map.bZ.MZ.tY.add({NZ:function(){t.oo.Hn()},UZ:function(){return Boolean(t.oo.cache.combineText)},group:"default",FZ:function(){return 1}}),"3D"===this.map.getViewMode_()&&this.map.bZ.MZ.tY.add({NZ:function(){t.oo.rS()},UZ:function(){return Boolean(t.oo.cache.sky)},group:"default",FZ:function(){return 1}}),this.map.yS()||this.map.bZ.MZ.tY.add({NZ:function(){t.oo.Yn()},UZ:function(){return Boolean(t.oo.cache.fillOutline)},group:"default",FZ:function(){return 1}}),this.map.bZ.MZ.tY.add({NZ:function(){t.oo.Wn()},UZ:function(){return Boolean(t.oo.cache.fill)},group:"default",FZ:function(){return 1}}),this.map.bZ.MZ.tY.add({NZ:function(){t.oo.Vn()},UZ:function(){return Boolean(t.oo.cache.line)},group:"default",FZ:function(){return 1}}),this.map.setNeedUpdate(!0)},TSa),SSa;function TSa(t){var e=SSa.call(this,t)||this;e.map=t,e.io=DomUtil$1.create("canvas",t.do,"amap-layer"),e.io.width=0,e.io.height=0;var r=Support$5.getContext(e.io,!1);return(e.gl=r).getExtension("OES_standard_derivatives"),r.getExtension("OES_element_index_uint"),e.context=new Context(r),e.oo=new ProgramManager(e.context),e.z_=t.z_,e.R_=t.R_,e.no=new LandRender,e.LK(),e.DV=e.context.createTexture({height:4096,width:4096,data:null}),e.DV.bind(e.context.gl.CLAMP_TO_EDGE,e.context.gl.LINEAR,e.context.gl.LINEAR),e}M.FK=MapRender,M.$Z=MapRender,M.LayerRenderManager.addLayerRender("AMap.NebulaLayer",NebulaRender),M.LayerRenderManager.addLayerRender("AMap.Buildings",BuildingRender),M.LayerRenderManager.addLayerRender("AMap.Inner.LabelsLayer",TileLabelsLayerRender),M.LayerRenderManager.addLayerRender("AMap.LabelsLayer",LabelsLayerRender),M.LayerRenderManager.addLayerRender("AMap.ImageLayer",ImageRender),M.LayerRenderManager.addLayerRender("AMap.CanvasLayer",ImageRender),M.LayerRenderManager.addLayerRender("AMap.RasterLayer",RasterLayerRender),M.LayerRenderManager.addLayerRender("AMap.TileLayer.Flexible",RasterLayerRender),M.LayerRenderManager.addLayerRender("AMap.TileLayer.RoadNet",RasterLayerRender),M.LayerRenderManager.addLayerRender("AMap.TileLayer",RasterLayerRender),M.LayerRenderManager.addLayerRender("AMap.TileLayer.Satellite",RasterLayerRender),M.LayerRenderManager.addLayerRender("AMap.TileLayer.Traffic",VectorTrafficRender),M.LayerRenderManager.addLayerRender("AMap.WMTSLayer",RasterLayerRender),M.LayerRenderManager.addLayerRender("AMap.TileLayer.WMS",RasterLayerRender),M.LayerRenderManager.addLayerRender("AMap.TileLayer.WMTS",RasterLayerRender),M.LayerRenderManager.addLayerRender("AMap.CustomLayer",CustomRender),M.LayerRenderManager.addLayerRender("AMap.GLCustomLayer",GLCustomRender),M.LayerRenderManager.addLayerRender("AMap.VTLayer",VTRender),M.LayerRenderManager.addLayerRender("AMap.SkyLayer",SkyLayerRender),M.LayerRenderManager.addLayerRender("AMap.MaskLayer",MaskLayerRender),M.LayerRenderManager.addLayerRender("AMap.MapboxLayer",MapboxRender),M.LayerRenderManager.addLayerRender("AMap.VectorLayer",OverlayRender),M.LayerRenderManager.addLayerRender("AMap.VectorSvgLayer",OverlayRender),M.LayerRenderManager.addLayerRender("AMap.IndoorMap",IndoorRender),M.LayerRenderManager.addLayerRender("AMap.DistrictLayer",DistrictRender),M.LayerRenderManager.addLayerRender("AMap.DistrictLayer.World",DistrictRender),M.LayerRenderManager.addLayerRender("AMap.DistrictLayer.Country",DistrictRender),M.LayerRenderManager.addLayerRender("AMap.DistrictLayer.Province",DistrictRender)}(); ')